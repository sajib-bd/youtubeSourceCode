"use strict";var pv=Object.create;var Wi=Object.defineProperty;var mv=Object.getOwnPropertyDescriptor;var yv=Object.getOwnPropertyNames;var Ev=Object.getPrototypeOf,gv=Object.prototype.hasOwnProperty;var q=(r,e)=>()=>(r&&(e=r(r=0)),e);var E=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),Dt=(r,e)=>{for(var t in e)Wi(r,t,{get:e[t],enumerable:!0})},Qf=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of yv(e))!gv.call(r,i)&&i!==t&&Wi(r,i,{get:()=>e[i],enumerable:!(n=mv(e,i))||n.enumerable});return r};var vr=(r,e,t)=>(t=r!=null?pv(Ev(r)):{},Qf(e||!r||!r.__esModule?Wi(t,"default",{value:r,enumerable:!0}):t,r)),be=r=>Qf(Wi({},"__esModule",{value:!0}),r);function eh(){return process.env.CI==="true"||process.env.TF_BUILD==="true"||process.env.GITHUB_ACTIONS==="true"||process.env.BUILDKITE==="true"||process.env.CIRCLECI==="true"||process.env.CIRRUS_CI==="true"||process.env.TRAVIS==="true"||!!process.env["bamboo.buildKey"]||!!process.env.CODEBUILD_BUILD_ID||!!process.env.GITLAB_CI||!!process.env.HEROKU_TEST_RUN_ID||!!process.env.BUILD_ID||!!process.env.BUILD_BUILDID||!!process.env.TEAMCITY_VERSION}var th=q(()=>{"use strict"});var sh=E((BN,da)=>{"use strict";var _v=require("fs"),rh=require("path"),bv=require("os");function nh(r){console.log(`[dotenv][DEBUG] ${r}`)}var vv=`
`,Sv=/^\s*([\w.-]+)\s*=\s*(.*)?\s*$/,wv=/\\n/g,Rv=/\r\n|\n|\r/;function ih(r,e){let t=!!(e&&e.debug),n={};return r.toString().split(Rv).forEach(function(i,s){let o=i.match(Sv);if(o!=null){let a=o[1],c=o[2]||"",l=c.length-1,u=c[0]==='"'&&c[l]==='"';c[0]==="'"&&c[l]==="'"||u?(c=c.substring(1,l),u&&(c=c.replace(wv,vv))):c=c.trim(),n[a]=c}else t&&nh(`did not match key and value when parsing line ${s+1}: ${i}`)}),n}function xv(r){return r[0]==="~"?rh.join(bv.homedir(),r.slice(1)):r}function Ov(r){let e=rh.resolve(process.cwd(),".env"),t="utf8",n=!1;r&&(r.path!=null&&(e=xv(r.path)),r.encoding!=null&&(t=r.encoding),r.debug!=null&&(n=!0));try{let i=ih(_v.readFileSync(e,{encoding:t}),{debug:n});return Object.keys(i).forEach(function(s){Object.prototype.hasOwnProperty.call(process.env,s)?n&&nh(`"${s}" is already defined in \`process.env\` and will not be overwritten`):process.env[s]=i[s]}),{parsed:i}}catch(i){return{error:i}}}da.exports.config=Ov;da.exports.parse=ih});var oh=E((Kn,pa)=>{"use strict";(function(r,e){typeof Kn=="object"&&typeof pa=="object"?pa.exports=e(require("child_process"),require("crypto")):typeof define=="function"&&define.amd?define(["child_process","crypto"],e):typeof Kn=="object"?Kn["electron-machine-id"]=e(require("child_process"),require("crypto")):r["electron-machine-id"]=e(r.child_process,r.crypto)})(Kn,function(r,e){return function(t){function n(s){if(i[s])return i[s].exports;var o=i[s]={exports:{},id:s,loaded:!1};return t[s].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var i={};return n.m=t,n.c=i,n.p="",n(0)}([function(t,n,i){t.exports=i(34)},function(t,n,i){var s=i(29)("wks"),o=i(33),a=i(2).Symbol,c=typeof a=="function",l=t.exports=function(u){return s[u]||(s[u]=c&&a[u]||(c?a:o)("Symbol."+u))};l.store=s},function(t,n){var i=t.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=i)},function(t,n,i){var s=i(9);t.exports=function(o){if(!s(o))throw TypeError(o+" is not an object!");return o}},function(t,n,i){t.exports=!i(24)(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},function(t,n,i){var s=i(12),o=i(17);t.exports=i(4)?function(a,c,l){return s.f(a,c,o(1,l))}:function(a,c,l){return a[c]=l,a}},function(t,n){var i=t.exports={version:"2.4.0"};typeof __e=="number"&&(__e=i)},function(t,n,i){var s=i(14);t.exports=function(o,a,c){if(s(o),a===void 0)return o;switch(c){case 1:return function(l){return o.call(a,l)};case 2:return function(l,u){return o.call(a,l,u)};case 3:return function(l,u,f){return o.call(a,l,u,f)}}return function(){return o.apply(a,arguments)}}},function(t,n){var i={}.hasOwnProperty;t.exports=function(s,o){return i.call(s,o)}},function(t,n){t.exports=function(i){return typeof i=="object"?i!==null:typeof i=="function"}},function(t,n){t.exports={}},function(t,n){var i={}.toString;t.exports=function(s){return i.call(s).slice(8,-1)}},function(t,n,i){var s=i(3),o=i(26),a=i(32),c=Object.defineProperty;n.f=i(4)?Object.defineProperty:function(l,u,f){if(s(l),u=a(u,!0),s(f),o)try{return c(l,u,f)}catch{}if("get"in f||"set"in f)throw TypeError("Accessors not supported!");return"value"in f&&(l[u]=f.value),l}},function(t,n,i){var s=i(42),o=i(15);t.exports=function(a){return s(o(a))}},function(t,n){t.exports=function(i){if(typeof i!="function")throw TypeError(i+" is not a function!");return i}},function(t,n){t.exports=function(i){if(i==null)throw TypeError("Can't call method on  "+i);return i}},function(t,n,i){var s=i(9),o=i(2).document,a=s(o)&&s(o.createElement);t.exports=function(c){return a?o.createElement(c):{}}},function(t,n){t.exports=function(i,s){return{enumerable:!(1&i),configurable:!(2&i),writable:!(4&i),value:s}}},function(t,n,i){var s=i(12).f,o=i(8),a=i(1)("toStringTag");t.exports=function(c,l,u){c&&!o(c=u?c:c.prototype,a)&&s(c,a,{configurable:!0,value:l})}},function(t,n,i){var s=i(29)("keys"),o=i(33);t.exports=function(a){return s[a]||(s[a]=o(a))}},function(t,n){var i=Math.ceil,s=Math.floor;t.exports=function(o){return isNaN(o=+o)?0:(o>0?s:i)(o)}},function(t,n,i){var s=i(11),o=i(1)("toStringTag"),a=s(function(){return arguments}())=="Arguments",c=function(l,u){try{return l[u]}catch{}};t.exports=function(l){var u,f,h;return l===void 0?"Undefined":l===null?"Null":typeof(f=c(u=Object(l),o))=="string"?f:a?s(u):(h=s(u))=="Object"&&typeof u.callee=="function"?"Arguments":h}},function(t,n){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,n,i){var s=i(2),o=i(6),a=i(7),c=i(5),l="prototype",u=function(f,h,d){var m,b,p,w=f&u.F,k=f&u.G,O=f&u.S,C=f&u.P,L=f&u.B,T=f&u.W,z=k?o:o[h]||(o[h]={}),G=z[l],I=k?s:O?s[h]:(s[h]||{})[l];k&&(d=h);for(m in d)b=!w&&I&&I[m]!==void 0,b&&m in z||(p=b?I[m]:d[m],z[m]=k&&typeof I[m]!="function"?d[m]:L&&b?a(p,s):T&&I[m]==p?function(N){var j=function(X,V,J){if(this instanceof N){switch(arguments.length){case 0:return new N;case 1:return new N(X);case 2:return new N(X,V)}return new N(X,V,J)}return N.apply(this,arguments)};return j[l]=N[l],j}(p):C&&typeof p=="function"?a(Function.call,p):p,C&&((z.virtual||(z.virtual={}))[m]=p,f&u.R&&G&&!G[m]&&c(G,m,p)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},function(t,n){t.exports=function(i){try{return!!i()}catch{return!0}}},function(t,n,i){t.exports=i(2).document&&document.documentElement},function(t,n,i){t.exports=!i(4)&&!i(24)(function(){return Object.defineProperty(i(16)("div"),"a",{get:function(){return 7}}).a!=7})},function(t,n,i){"use strict";var s=i(28),o=i(23),a=i(57),c=i(5),l=i(8),u=i(10),f=i(45),h=i(18),d=i(52),m=i(1)("iterator"),b=!([].keys&&"next"in[].keys()),p="@@iterator",w="keys",k="values",O=function(){return this};t.exports=function(C,L,T,z,G,I,N){f(T,L,z);var j,X,V,J=function(A){if(!b&&A in U)return U[A];switch(A){case w:return function(){return new T(this,A)};case k:return function(){return new T(this,A)}}return function(){return new T(this,A)}},B=L+" Iterator",K=G==k,$=!1,U=C.prototype,H=U[m]||U[p]||G&&U[G],le=H||J(G),Re=G?K?J("entries"):le:void 0,R=L=="Array"&&U.entries||H;if(R&&(V=d(R.call(new C)),V!==Object.prototype&&(h(V,B,!0),s||l(V,m)||c(V,m,O))),K&&H&&H.name!==k&&($=!0,le=function(){return H.call(this)}),s&&!N||!b&&!$&&U[m]||c(U,m,le),u[L]=le,u[B]=O,G)if(j={values:K?le:J(k),keys:I?le:J(w),entries:Re},N)for(X in j)X in U||a(U,X,j[X]);else o(o.P+o.F*(b||$),L,j);return j}},function(t,n){t.exports=!0},function(t,n,i){var s=i(2),o="__core-js_shared__",a=s[o]||(s[o]={});t.exports=function(c){return a[c]||(a[c]={})}},function(t,n,i){var s,o,a,c=i(7),l=i(41),u=i(25),f=i(16),h=i(2),d=h.process,m=h.setImmediate,b=h.clearImmediate,p=h.MessageChannel,w=0,k={},O="onreadystatechange",C=function(){var T=+this;if(k.hasOwnProperty(T)){var z=k[T];delete k[T],z()}},L=function(T){C.call(T.data)};m&&b||(m=function(T){for(var z=[],G=1;arguments.length>G;)z.push(arguments[G++]);return k[++w]=function(){l(typeof T=="function"?T:Function(T),z)},s(w),w},b=function(T){delete k[T]},i(11)(d)=="process"?s=function(T){d.nextTick(c(C,T,1))}:p?(o=new p,a=o.port2,o.port1.onmessage=L,s=c(a.postMessage,a,1)):h.addEventListener&&typeof postMessage=="function"&&!h.importScripts?(s=function(T){h.postMessage(T+"","*")},h.addEventListener("message",L,!1)):s=O in f("script")?function(T){u.appendChild(f("script"))[O]=function(){u.removeChild(this),C.call(T)}}:function(T){setTimeout(c(C,T,1),0)}),t.exports={set:m,clear:b}},function(t,n,i){var s=i(20),o=Math.min;t.exports=function(a){return a>0?o(s(a),9007199254740991):0}},function(t,n,i){var s=i(9);t.exports=function(o,a){if(!s(o))return o;var c,l;if(a&&typeof(c=o.toString)=="function"&&!s(l=c.call(o))||typeof(c=o.valueOf)=="function"&&!s(l=c.call(o))||!a&&typeof(c=o.toString)=="function"&&!s(l=c.call(o)))return l;throw TypeError("Can't convert object to primitive value")}},function(t,n){var i=0,s=Math.random();t.exports=function(o){return"Symbol(".concat(o===void 0?"":o,")_",(++i+s).toString(36))}},function(t,n,i){"use strict";function s(O){return O&&O.__esModule?O:{default:O}}function o(){return process.platform!=="win32"?"":process.arch==="ia32"&&process.env.hasOwnProperty("PROCESSOR_ARCHITEW6432")?"mixed":"native"}function a(O){return(0,m.createHash)("sha256").update(O).digest("hex")}function c(O){switch(p){case"darwin":return O.split("IOPlatformUUID")[1].split(`
`)[0].replace(/\=|\s+|\"/gi,"").toLowerCase();case"win32":return O.toString().split("REG_SZ")[1].replace(/\r+|\n+|\s+/gi,"").toLowerCase();case"linux":return O.toString().replace(/\r+|\n+|\s+/gi,"").toLowerCase();case"freebsd":return O.toString().replace(/\r+|\n+|\s+/gi,"").toLowerCase();default:throw new Error("Unsupported platform: "+process.platform)}}function l(O){var C=c((0,d.execSync)(k[p]).toString());return O?C:a(C)}function u(O){return new h.default(function(C,L){return(0,d.exec)(k[p],{},function(T,z,G){if(T)return L(new Error("Error while obtaining machine id: "+T.stack));var I=c(z.toString());return C(O?I:a(I))})})}Object.defineProperty(n,"__esModule",{value:!0});var f=i(35),h=s(f);n.machineIdSync=l,n.machineId=u;var d=i(70),m=i(71),b=process,p=b.platform,w={native:"%windir%\\System32",mixed:"%windir%\\sysnative\\cmd.exe /c %windir%\\System32"},k={darwin:"ioreg -rd1 -c IOPlatformExpertDevice",win32:w[o()]+"\\REG.exe QUERY HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Cryptography /v MachineGuid",linux:"( cat /var/lib/dbus/machine-id /etc/machine-id 2> /dev/null || hostname ) | head -n 1 || :",freebsd:"kenv -q smbios.system.uuid || sysctl -n kern.hostuuid"}},function(t,n,i){t.exports={default:i(36),__esModule:!0}},function(t,n,i){i(66),i(68),i(69),i(67),t.exports=i(6).Promise},function(t,n){t.exports=function(){}},function(t,n){t.exports=function(i,s,o,a){if(!(i instanceof s)||a!==void 0&&a in i)throw TypeError(o+": incorrect invocation!");return i}},function(t,n,i){var s=i(13),o=i(31),a=i(62);t.exports=function(c){return function(l,u,f){var h,d=s(l),m=o(d.length),b=a(f,m);if(c&&u!=u){for(;m>b;)if(h=d[b++],h!=h)return!0}else for(;m>b;b++)if((c||b in d)&&d[b]===u)return c||b||0;return!c&&-1}}},function(t,d,i){var s=i(7),o=i(44),a=i(43),c=i(3),l=i(31),u=i(64),f={},h={},d=t.exports=function(m,b,p,w,k){var O,C,L,T,z=k?function(){return m}:u(m),G=s(p,w,b?2:1),I=0;if(typeof z!="function")throw TypeError(m+" is not iterable!");if(a(z)){for(O=l(m.length);O>I;I++)if(T=b?G(c(C=m[I])[0],C[1]):G(m[I]),T===f||T===h)return T}else for(L=z.call(m);!(C=L.next()).done;)if(T=o(L,G,C.value,b),T===f||T===h)return T};d.BREAK=f,d.RETURN=h},function(t,n){t.exports=function(i,s,o){var a=o===void 0;switch(s.length){case 0:return a?i():i.call(o);case 1:return a?i(s[0]):i.call(o,s[0]);case 2:return a?i(s[0],s[1]):i.call(o,s[0],s[1]);case 3:return a?i(s[0],s[1],s[2]):i.call(o,s[0],s[1],s[2]);case 4:return a?i(s[0],s[1],s[2],s[3]):i.call(o,s[0],s[1],s[2],s[3])}return i.apply(o,s)}},function(t,n,i){var s=i(11);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(o){return s(o)=="String"?o.split(""):Object(o)}},function(t,n,i){var s=i(10),o=i(1)("iterator"),a=Array.prototype;t.exports=function(c){return c!==void 0&&(s.Array===c||a[o]===c)}},function(t,n,i){var s=i(3);t.exports=function(o,a,c,l){try{return l?a(s(c)[0],c[1]):a(c)}catch(f){var u=o.return;throw u!==void 0&&s(u.call(o)),f}}},function(t,n,i){"use strict";var s=i(49),o=i(17),a=i(18),c={};i(5)(c,i(1)("iterator"),function(){return this}),t.exports=function(l,u,f){l.prototype=s(c,{next:o(1,f)}),a(l,u+" Iterator")}},function(t,n,i){var s=i(1)("iterator"),o=!1;try{var a=[7][s]();a.return=function(){o=!0},Array.from(a,function(){throw 2})}catch{}t.exports=function(c,l){if(!l&&!o)return!1;var u=!1;try{var f=[7],h=f[s]();h.next=function(){return{done:u=!0}},f[s]=function(){return h},c(f)}catch{}return u}},function(t,n){t.exports=function(i,s){return{value:s,done:!!i}}},function(t,n,i){var s=i(2),o=i(30).set,a=s.MutationObserver||s.WebKitMutationObserver,c=s.process,l=s.Promise,u=i(11)(c)=="process";t.exports=function(){var f,h,d,m=function(){var k,O;for(u&&(k=c.domain)&&k.exit();f;){O=f.fn,f=f.next;try{O()}catch(C){throw f?d():h=void 0,C}}h=void 0,k&&k.enter()};if(u)d=function(){c.nextTick(m)};else if(a){var b=!0,p=document.createTextNode("");new a(m).observe(p,{characterData:!0}),d=function(){p.data=b=!b}}else if(l&&l.resolve){var w=l.resolve();d=function(){w.then(m)}}else d=function(){o.call(s,m)};return function(k){var O={fn:k,next:void 0};h&&(h.next=O),f||(f=O,d()),h=O}}},function(t,n,i){var s=i(3),o=i(50),a=i(22),c=i(19)("IE_PROTO"),l=function(){},u="prototype",f=function(){var h,d=i(16)("iframe"),m=a.length,b=">";for(d.style.display="none",i(25).appendChild(d),d.src="javascript:",h=d.contentWindow.document,h.open(),h.write("<script>document.F=Object</script"+b),h.close(),f=h.F;m--;)delete f[u][a[m]];return f()};t.exports=Object.create||function(h,d){var m;return h!==null?(l[u]=s(h),m=new l,l[u]=null,m[c]=h):m=f(),d===void 0?m:o(m,d)}},function(t,n,i){var s=i(12),o=i(3),a=i(54);t.exports=i(4)?Object.defineProperties:function(c,l){o(c);for(var u,f=a(l),h=f.length,d=0;h>d;)s.f(c,u=f[d++],l[u]);return c}},function(t,n,i){var s=i(55),o=i(17),a=i(13),c=i(32),l=i(8),u=i(26),f=Object.getOwnPropertyDescriptor;n.f=i(4)?f:function(h,d){if(h=a(h),d=c(d,!0),u)try{return f(h,d)}catch{}if(l(h,d))return o(!s.f.call(h,d),h[d])}},function(t,n,i){var s=i(8),o=i(63),a=i(19)("IE_PROTO"),c=Object.prototype;t.exports=Object.getPrototypeOf||function(l){return l=o(l),s(l,a)?l[a]:typeof l.constructor=="function"&&l instanceof l.constructor?l.constructor.prototype:l instanceof Object?c:null}},function(t,n,i){var s=i(8),o=i(13),a=i(39)(!1),c=i(19)("IE_PROTO");t.exports=function(l,u){var f,h=o(l),d=0,m=[];for(f in h)f!=c&&s(h,f)&&m.push(f);for(;u.length>d;)s(h,f=u[d++])&&(~a(m,f)||m.push(f));return m}},function(t,n,i){var s=i(53),o=i(22);t.exports=Object.keys||function(a){return s(a,o)}},function(t,n){n.f={}.propertyIsEnumerable},function(t,n,i){var s=i(5);t.exports=function(o,a,c){for(var l in a)c&&o[l]?o[l]=a[l]:s(o,l,a[l]);return o}},function(t,n,i){t.exports=i(5)},function(t,n,i){var s=i(9),o=i(3),a=function(c,l){if(o(c),!s(l)&&l!==null)throw TypeError(l+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(c,l,u){try{u=i(7)(Function.call,i(51).f(Object.prototype,"__proto__").set,2),u(c,[]),l=!(c instanceof Array)}catch{l=!0}return function(f,h){return a(f,h),l?f.__proto__=h:u(f,h),f}}({},!1):void 0),check:a}},function(t,n,i){"use strict";var s=i(2),o=i(6),a=i(12),c=i(4),l=i(1)("species");t.exports=function(u){var f=typeof o[u]=="function"?o[u]:s[u];c&&f&&!f[l]&&a.f(f,l,{configurable:!0,get:function(){return this}})}},function(t,n,i){var s=i(3),o=i(14),a=i(1)("species");t.exports=function(c,l){var u,f=s(c).constructor;return f===void 0||(u=s(f)[a])==null?l:o(u)}},function(t,n,i){var s=i(20),o=i(15);t.exports=function(a){return function(c,l){var u,f,h=String(o(c)),d=s(l),m=h.length;return d<0||d>=m?a?"":void 0:(u=h.charCodeAt(d),u<55296||u>56319||d+1===m||(f=h.charCodeAt(d+1))<56320||f>57343?a?h.charAt(d):u:a?h.slice(d,d+2):(u-55296<<10)+(f-56320)+65536)}}},function(t,n,i){var s=i(20),o=Math.max,a=Math.min;t.exports=function(c,l){return c=s(c),c<0?o(c+l,0):a(c,l)}},function(t,n,i){var s=i(15);t.exports=function(o){return Object(s(o))}},function(t,n,i){var s=i(21),o=i(1)("iterator"),a=i(10);t.exports=i(6).getIteratorMethod=function(c){if(c!=null)return c[o]||c["@@iterator"]||a[s(c)]}},function(t,n,i){"use strict";var s=i(37),o=i(47),a=i(10),c=i(13);t.exports=i(27)(Array,"Array",function(l,u){this._t=c(l),this._i=0,this._k=u},function(){var l=this._t,u=this._k,f=this._i++;return!l||f>=l.length?(this._t=void 0,o(1)):u=="keys"?o(0,f):u=="values"?o(0,l[f]):o(0,[f,l[f]])},"values"),a.Arguments=a.Array,s("keys"),s("values"),s("entries")},function(t,n){},function(t,n,i){"use strict";var s,o,a,c=i(28),l=i(2),u=i(7),f=i(21),h=i(23),d=i(9),m=(i(3),i(14)),b=i(38),p=i(40),w=(i(58).set,i(60)),k=i(30).set,O=i(48)(),C="Promise",L=l.TypeError,z=l.process,T=l[C],z=l.process,G=f(z)=="process",I=function(){},N=!!function(){try{var R=T.resolve(1),A=(R.constructor={})[i(1)("species")]=function(S){S(I,I)};return(G||typeof PromiseRejectionEvent=="function")&&R.then(I)instanceof A}catch{}}(),j=function(R,A){return R===A||R===T&&A===a},X=function(R){var A;return!(!d(R)||typeof(A=R.then)!="function")&&A},V=function(R){return j(T,R)?new J(R):new o(R)},J=o=function(R){var A,S;this.promise=new R(function(W,de){if(A!==void 0||S!==void 0)throw L("Bad Promise constructor");A=W,S=de}),this.resolve=m(A),this.reject=m(S)},B=function(R){try{R()}catch(A){return{error:A}}},K=function(R,A){if(!R._n){R._n=!0;var S=R._c;O(function(){for(var W=R._v,de=R._s==1,At=0,ct=function(yt){var _e,Yr,br=de?yt.ok:yt.fail,Pe=yt.resolve,Vt=yt.reject,y=yt.domain;try{br?(de||(R._h==2&&H(R),R._h=1),br===!0?_e=W:(y&&y.enter(),_e=br(W),y&&y.exit()),_e===yt.promise?Vt(L("Promise-chain cycle")):(Yr=X(_e))?Yr.call(_e,Pe,Vt):Pe(_e)):Vt(W)}catch(_){Vt(_)}};S.length>At;)ct(S[At++]);R._c=[],R._n=!1,A&&!R._h&&$(R)})}},$=function(R){k.call(l,function(){var A,S,W,de=R._v;if(U(R)&&(A=B(function(){G?z.emit("unhandledRejection",de,R):(S=l.onunhandledrejection)?S({promise:R,reason:de}):(W=l.console)&&W.error&&W.error("Unhandled promise rejection",de)}),R._h=G||U(R)?2:1),R._a=void 0,A)throw A.error})},U=function(R){if(R._h==1)return!1;for(var A,S=R._a||R._c,W=0;S.length>W;)if(A=S[W++],A.fail||!U(A.promise))return!1;return!0},H=function(R){k.call(l,function(){var A;G?z.emit("rejectionHandled",R):(A=l.onrejectionhandled)&&A({promise:R,reason:R._v})})},le=function(R){var A=this;A._d||(A._d=!0,A=A._w||A,A._v=R,A._s=2,A._a||(A._a=A._c.slice()),K(A,!0))},Re=function(R){var A,S=this;if(!S._d){S._d=!0,S=S._w||S;try{if(S===R)throw L("Promise can't be resolved itself");(A=X(R))?O(function(){var W={_w:S,_d:!1};try{A.call(R,u(Re,W,1),u(le,W,1))}catch(de){le.call(W,de)}}):(S._v=R,S._s=1,K(S,!1))}catch(W){le.call({_w:S,_d:!1},W)}}};N||(T=function(R){b(this,T,C,"_h"),m(R),s.call(this);try{R(u(Re,this,1),u(le,this,1))}catch(A){le.call(this,A)}},s=function(R){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},s.prototype=i(56)(T.prototype,{then:function(R,A){var S=V(w(this,T));return S.ok=typeof R!="function"||R,S.fail=typeof A=="function"&&A,S.domain=G?z.domain:void 0,this._c.push(S),this._a&&this._a.push(S),this._s&&K(this,!1),S.promise},catch:function(R){return this.then(void 0,R)}}),J=function(){var R=new s;this.promise=R,this.resolve=u(Re,R,1),this.reject=u(le,R,1)}),h(h.G+h.W+h.F*!N,{Promise:T}),i(18)(T,C),i(59)(C),a=i(6)[C],h(h.S+h.F*!N,C,{reject:function(R){var A=V(this),S=A.reject;return S(R),A.promise}}),h(h.S+h.F*(c||!N),C,{resolve:function(R){if(R instanceof T&&j(R.constructor,this))return R;var A=V(this),S=A.resolve;return S(R),A.promise}}),h(h.S+h.F*!(N&&i(46)(function(R){T.all(R).catch(I)})),C,{all:function(R){var A=this,S=V(A),W=S.resolve,de=S.reject,At=B(function(){var ct=[],yt=0,_e=1;p(R,!1,function(Yr){var br=yt++,Pe=!1;ct.push(void 0),_e++,A.resolve(Yr).then(function(Vt){Pe||(Pe=!0,ct[br]=Vt,--_e||W(ct))},de)}),--_e||W(ct)});return At&&de(At.error),S.promise},race:function(R){var A=this,S=V(A),W=S.reject,de=B(function(){p(R,!1,function(At){A.resolve(At).then(S.resolve,W)})});return de&&W(de.error),S.promise}})},function(t,n,i){"use strict";var s=i(61)(!0);i(27)(String,"String",function(o){this._t=String(o),this._i=0},function(){var o,a=this._t,c=this._i;return c>=a.length?{value:void 0,done:!0}:(o=s(a,c),this._i+=o.length,{value:o,done:!1})})},function(t,n,i){i(65);for(var s=i(2),o=i(5),a=i(10),c=i(1)("toStringTag"),l=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],u=0;u<5;u++){var f=l[u],h=s[f],d=h&&h.prototype;d&&!d[c]&&o(d,c,f),a[f]=a.Array}},function(t,n){t.exports=require("child_process")},function(t,n){t.exports=require("crypto")}])})});var ah={};Dt(ah,{configureLightClientRequire:()=>Tv,configuredPaths:()=>Sr,lightClientRequire:()=>ie});function Tv(r){Sr=r,ie=function(e){if(Sr.length===0)throw new Error("Light client require must have paths configured with `configureLightClientRequire`.");let t;try{t=require.resolve(e,{paths:r})}catch(n){throw process.env.NX_VERBOSE_LOGGING==="true"&&console.error(`Was not able to require.resolve module ${e} from the following paths: ${r}. This may be expected.`),n}try{return require(t)}catch(n){throw process.env.NX_VERBOSE_LOGGING==="true"&&console.error(`Was not able require module ${e} from path ${t}. This may be expected. `),n}}}var ie,Sr,wr=q(()=>{"use strict";Sr=[]});var Y=E(Rr=>{"use strict";wr();try{try{let{output:r}=ie("nx/src/utils/output"),e;try{e=ie("nx/src/utils/app-root").workspaceRoot}catch{e=ie("nx/src/utils/workspace-root").workspaceRoot}Rr.workspaceRoot=e,Rr.output=r}catch{let{output:e}=ie("@nrwl/workspace/src/utilities/output"),{appRootPath:t}=ie("@nrwl/tao/src/utils/app-root");Rr.workspaceRoot=t,Rr.output=e}}catch{let e=t=>{var n;return`${t.title}

${(n=t.bodyLines)==null?void 0:n.join(`
`)}`};Rr.output={note:t=>console.info(e(t)),error:t=>console.error(e(t)),warn:t=>console.warn(e(t)),success:t=>console.log(e(t)),addVerticalSeparator:()=>"",addNewline:()=>console.log(`
`)},Rr.workspaceRoot=process.cwd()}});function ut(r){return!!r}function mh(){return process.env.NX_INVOKED_BY_RUNNER==="true"||process.env.NX_CLOUD==="false"}function tt(){try{return(0,ma.execSync)("git rev-parse HEAD",{stdio:"pipe"}).toString().trim()}catch{return}}function Yi(){try{return(0,ma.execSync)("git rev-parse --symbolic-full-name HEAD",{stdio:"pipe"}).toString().trim()}catch{return}}function Av(){try{let r=(0,lh.readFileSync)((0,Xi.join)(Nv,"nx-cloud.env"));return Cv.parse(r)}catch{return{}}}function Dv(){let r=Av();Et=process.env.NX_CLOUD_AUTH_TOKEN||process.env.NX_CLOUD_ACCESS_TOKEN||r.NX_CLOUD_AUTH_TOKEN||r.NX_CLOUD_ACCESS_TOKEN,xr=process.env.NX_CLOUD_ENCRYPTION_KEY||r.NX_CLOUD_ENCRYPTION_KEY,P=process.env.NX_VERBOSE_LOGGING==="true"||r.NX_VERBOSE_LOGGING==="true",gt=process.env.NX_CLOUD_NO_TIMEOUTS==="true"||r.NX_CLOUD_NO_TIMEOUTS==="true"}function je(){return yh()}function yh(){return process.env.NX_CI_EXECUTION_ID!==void 0?process.env.NX_CI_EXECUTION_ID:process.env.NX_RUN_GROUP!==void 0?process.env.NX_RUN_GROUP:process.env.CIRCLECI!==void 0&&process.env.CIRCLE_WORKFLOW_ID?process.env.CIRCLE_WORKFLOW_ID:process.env.TRAVIS_BUILD_ID!==void 0?process.env.TRAVIS_BUILD_ID:process.env.GITHUB_ACTIONS&&process.env.GITHUB_RUN_ID?`${process.env.GITHUB_RUN_ID}-${process.env.GITHUB_RUN_ATTEMPT}`:process.env.BUILD_BUILDID?process.env.BUILD_BUILDID:process.env.BITBUCKET_BUILD_NUMBER!==void 0?process.env.BITBUCKET_BUILD_NUMBER:process.env.VERCEL_GIT_COMMIT_SHA!==void 0?process.env.VERCEL_GIT_COMMIT_SHA:process.env.CI_PIPELINE_ID?process.env.CI_PIPELINE_ID:process.env.BUILD_TAG?process.env.BUILD_TAG:null}function xe(){return process.env.NX_CI_EXECUTION_ENV??""}function ve(){if(process.env.NX_RUN_GROUP!==void 0)return process.env.NX_RUN_GROUP;let r=yh();return r?xe()?`${r}-${xe()}`:r:tt()}function me(){if(process.env.NX_BRANCH!==void 0)return process.env.NX_BRANCH;if(process.env.CIRCLECI!==void 0){if(process.env.CIRCLE_PR_NUMBER!==void 0)return process.env.CIRCLE_PR_NUMBER;if(process.env.CIRCLE_PULL_REQUEST!==void 0){let r=process.env.CIRCLE_PULL_REQUEST.split("/");return r[r.length-1]}else if(process.env.CIRCLE_BRANCH!==void 0)return process.env.CIRCLE_BRANCH}if(process.env.TRAVIS_PULL_REQUEST!==void 0)return process.env.TRAVIS_PULL_REQUEST;if(process.env.GITHUB_ACTIONS){if(process.env.GITHUB_REF){let r=process.env.GITHUB_REF.match(/refs\/pull\/(\d+)\/merge/);if(r)return r[1]}return process.env.GITHUB_HEAD_REF??""}return process.env.BITBUCKET_PR_ID!==void 0?process.env.BITBUCKET_PR_ID:process.env.VERCEL_GIT_COMMIT_REF!==void 0?process.env.VERCEL_GIT_COMMIT_REF:process.env.CI_MERGE_REQUEST_IID?process.env.CI_MERGE_REQUEST_IID:process.env.CI_COMMIT_BRANCH?process.env.CI_COMMIT_BRANCH:process.env.GIT_BRANCH?process.env.GIT_BRANCH:null}function Jr(){let r=require("os"),e=(0,uh.createHash)("md5");return e.update(Iv()),{machineId:e.digest("base64"),platform:r.platform(),version:r.version?r.version():"",cpuCores:r.cpus().length}}function Ji(){let r=(0,Xi.parse)(process.argv[1]).name,e=`${process.argv.slice(2).join(" ")}`;return`${r} ${e}`}function Eh(r,e){let t=["NX_VERBOSE_LOGGING","NX_CLOUD_DEBUG_URLS","NX_CLOUD_ACCESS_TOKEN"];r&&r.split(",").forEach(s=>{t.push(s.trim())});let n=Object.fromEntries(t.map(s=>[s,process.env[s]]).filter(([,s])=>s!==void 0));n.NX_VERBOSE_LOGGING=P,n.NX_CLOUD_ACCESS_TOKEN=Et??e;let i=Object.fromEntries(Object.entries(n).filter(([,s])=>s!==void 0));return P&&(ch.note({title:"Environment variables passed to cloud:",bodyLines:Object.entries(i).map(([s,o])=>`${s}: ${o}`)}),ch.addNewline()),i}var ma,uh,lh,Xi,Cv,Iv,ch,Nv,Yn,ya,Ea,Jn,fh,Zn,Wt,ga,hh,dh,Ki,ph,Et,xr,P,gt,re=q(()=>{"use strict";ma=require("child_process"),uh=require("crypto"),lh=require("fs"),Xi=require("path");th();Cv=sh(),{machineIdSync:Iv}=oh(),{output:ch,workspaceRoot:Nv}=Y(),Yn=9999999,ya=process.env.NX_CLOUD_AGENT_TIMEOUT_MS?Number(process.env.NX_CLOUD_AGENT_TIMEOUT_MS):36e5,Ea=process.env.NX_CLOUD_ORCHESTRATOR_TIMEOUT_MS?Number(process.env.NX_CLOUD_ORCHESTRATOR_TIMEOUT_MS):36e5,Jn=1e3*1e3*1e4,fh=process.env.NX_CLOUD_UNLIMITED_OUTPUT==="true",Zn=1e3*1e3*300,Wt=166,ga=process.env.NX_CLOUD_DISTRIBUTED_EXECUTION_AGENT_COUNT?Number(process.env.NX_CLOUD_DISTRIBUTED_EXECUTION_AGENT_COUNT):null,hh=process.env.NX_CLOUD_DISTRIBUTED_EXECUTION_STOP_AGENTS_ON_FAILURE!="false",dh=process.env.NX_CLOUD_FORCE_METRICS==="true",Ki=process.env.NX_CLOUD_NUMBER_OF_RETRIES?Number(process.env.NX_CLOUD_NUMBER_OF_RETRIES):eh()?10:1,ph=process.env.NX_NO_CLOUD==="true";Dv()});function Ge(r){return new Promise(e=>{setTimeout(()=>e(null),r)})}var Zr=q(()=>{"use strict"});var _a=E((VN,gh)=>{"use strict";gh.exports=function(e,t){return function(){for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];return e.apply(t,i)}}});var Fe=E((WN,vh)=>{"use strict";var kv=_a(),Or=Object.prototype.toString;function Sa(r){return Or.call(r)==="[object Array]"}function ba(r){return typeof r>"u"}function Lv(r){return r!==null&&!ba(r)&&r.constructor!==null&&!ba(r.constructor)&&typeof r.constructor.isBuffer=="function"&&r.constructor.isBuffer(r)}function Pv(r){return Or.call(r)==="[object ArrayBuffer]"}function Uv(r){return typeof FormData<"u"&&r instanceof FormData}function Fv(r){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(r):e=r&&r.buffer&&r.buffer instanceof ArrayBuffer,e}function Mv(r){return typeof r=="string"}function qv(r){return typeof r=="number"}function _h(r){return r!==null&&typeof r=="object"}function Zi(r){if(Or.call(r)!=="[object Object]")return!1;var e=Object.getPrototypeOf(r);return e===null||e===Object.prototype}function Bv(r){return Or.call(r)==="[object Date]"}function jv(r){return Or.call(r)==="[object File]"}function Gv(r){return Or.call(r)==="[object Blob]"}function bh(r){return Or.call(r)==="[object Function]"}function $v(r){return _h(r)&&bh(r.pipe)}function Hv(r){return typeof URLSearchParams<"u"&&r instanceof URLSearchParams}function zv(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function Vv(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function wa(r,e){if(!(r===null||typeof r>"u"))if(typeof r!="object"&&(r=[r]),Sa(r))for(var t=0,n=r.length;t<n;t++)e.call(null,r[t],t,r);else for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.call(null,r[i],i,r)}function va(){var r={};function e(i,s){Zi(r[s])&&Zi(i)?r[s]=va(r[s],i):Zi(i)?r[s]=va({},i):Sa(i)?r[s]=i.slice():r[s]=i}for(var t=0,n=arguments.length;t<n;t++)wa(arguments[t],e);return r}function Wv(r,e,t){return wa(e,function(i,s){t&&typeof i=="function"?r[s]=kv(i,t):r[s]=i}),r}function Xv(r){return r.charCodeAt(0)===65279&&(r=r.slice(1)),r}vh.exports={isArray:Sa,isArrayBuffer:Pv,isBuffer:Lv,isFormData:Uv,isArrayBufferView:Fv,isString:Mv,isNumber:qv,isObject:_h,isPlainObject:Zi,isUndefined:ba,isDate:Bv,isFile:jv,isBlob:Gv,isFunction:bh,isStream:$v,isURLSearchParams:Hv,isStandardBrowserEnv:Vv,forEach:wa,merge:va,extend:Wv,trim:zv,stripBOM:Xv}});var Qi=E((XN,wh)=>{"use strict";var Qr=Fe();function Sh(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}wh.exports=function(e,t,n){if(!t)return e;var i;if(n)i=n(t);else if(Qr.isURLSearchParams(t))i=t.toString();else{var s=[];Qr.forEach(t,function(c,l){c===null||typeof c>"u"||(Qr.isArray(c)?l=l+"[]":c=[c],Qr.forEach(c,function(f){Qr.isDate(f)?f=f.toISOString():Qr.isObject(f)&&(f=JSON.stringify(f)),s.push(Sh(l)+"="+Sh(f))}))}),i=s.join("&")}if(i){var o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}});var xh=E((KN,Rh)=>{"use strict";var Kv=Fe();function es(){this.handlers=[]}es.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};es.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};es.prototype.forEach=function(e){Kv.forEach(this.handlers,function(n){n!==null&&e(n)})};Rh.exports=es});var Th=E((YN,Oh)=>{"use strict";var Yv=Fe();Oh.exports=function(e,t){Yv.forEach(e,function(i,s){s!==t&&s.toUpperCase()===t.toUpperCase()&&(e[t]=i,delete e[s])})}});var ts=E((JN,Ch)=>{"use strict";Ch.exports=function(e,t,n,i,s){return e.config=t,n&&(e.code=n),e.request=i,e.response=s,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}});var rs=E((ZN,Ih)=>{"use strict";var Jv=ts();Ih.exports=function(e,t,n,i,s){var o=new Error(e);return Jv(o,t,n,i,s)}});var Ra=E((QN,Nh)=>{"use strict";var Zv=rs();Nh.exports=function(e,t,n){var i=n.config.validateStatus;!n.status||!i||i(n.status)?e(n):t(Zv("Request failed with status code "+n.status,n.config,null,n.request,n))}});var Dh=E((eA,Ah)=>{"use strict";var ns=Fe();Ah.exports=ns.isStandardBrowserEnv()?function(){return{write:function(t,n,i,s,o,a){var c=[];c.push(t+"="+encodeURIComponent(n)),ns.isNumber(i)&&c.push("expires="+new Date(i).toGMTString()),ns.isString(s)&&c.push("path="+s),ns.isString(o)&&c.push("domain="+o),a===!0&&c.push("secure"),document.cookie=c.join("; ")},read:function(t){var n=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()});var Lh=E((tA,kh)=>{"use strict";kh.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}});var Uh=E((rA,Ph)=>{"use strict";Ph.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}});var xa=E((nA,Fh)=>{"use strict";var Qv=Lh(),eS=Uh();Fh.exports=function(e,t){return e&&!Qv(t)?eS(e,t):t}});var qh=E((iA,Mh)=>{"use strict";var Oa=Fe(),tS=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];Mh.exports=function(e){var t={},n,i,s;return e&&Oa.forEach(e.split(`
`),function(a){if(s=a.indexOf(":"),n=Oa.trim(a.substr(0,s)).toLowerCase(),i=Oa.trim(a.substr(s+1)),n){if(t[n]&&tS.indexOf(n)>=0)return;n==="set-cookie"?t[n]=(t[n]?t[n]:[]).concat([i]):t[n]=t[n]?t[n]+", "+i:i}}),t}});var Gh=E((sA,jh)=>{"use strict";var Bh=Fe();jh.exports=Bh.isStandardBrowserEnv()?function(){var e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a"),n;function i(s){var o=s;return e&&(t.setAttribute("href",o),o=t.href),t.setAttribute("href",o),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return n=i(window.location.href),function(o){var a=Bh.isString(o)?i(o):o;return a.protocol===n.protocol&&a.host===n.host}}():function(){return function(){return!0}}()});var Hh=E((oA,$h)=>{"use strict";var is=Fe(),rS=Ra(),nS=Dh(),iS=Qi(),sS=xa(),oS=qh(),aS=Gh(),Ta=rs();$h.exports=function(e){return new Promise(function(n,i){var s=e.data,o=e.headers,a=e.responseType;is.isFormData(s)&&delete o["Content-Type"];var c=new XMLHttpRequest;if(e.auth){var l=e.auth.username||"",u=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";o.Authorization="Basic "+btoa(l+":"+u)}var f=sS(e.baseURL,e.url);c.open(e.method.toUpperCase(),iS(f,e.params,e.paramsSerializer),!0),c.timeout=e.timeout;function h(){if(c){var m="getAllResponseHeaders"in c?oS(c.getAllResponseHeaders()):null,b=!a||a==="text"||a==="json"?c.responseText:c.response,p={data:b,status:c.status,statusText:c.statusText,headers:m,config:e,request:c};rS(n,i,p),c=null}}if("onloadend"in c?c.onloadend=h:c.onreadystatechange=function(){!c||c.readyState!==4||c.status===0&&!(c.responseURL&&c.responseURL.indexOf("file:")===0)||setTimeout(h)},c.onabort=function(){c&&(i(Ta("Request aborted",e,"ECONNABORTED",c)),c=null)},c.onerror=function(){i(Ta("Network Error",e,null,c)),c=null},c.ontimeout=function(){var b="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(b=e.timeoutErrorMessage),i(Ta(b,e,e.transitional&&e.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",c)),c=null},is.isStandardBrowserEnv()){var d=(e.withCredentials||aS(f))&&e.xsrfCookieName?nS.read(e.xsrfCookieName):void 0;d&&(o[e.xsrfHeaderName]=d)}"setRequestHeader"in c&&is.forEach(o,function(b,p){typeof s>"u"&&p.toLowerCase()==="content-type"?delete o[p]:c.setRequestHeader(p,b)}),is.isUndefined(e.withCredentials)||(c.withCredentials=!!e.withCredentials),a&&a!=="json"&&(c.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&c.addEventListener("progress",e.onDownloadProgress),typeof e.onUploadProgress=="function"&&c.upload&&c.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(b){c&&(c.abort(),i(b),c=null)}),s||(s=null),c.send(s)})}});var Vh=E((aA,zh)=>{"use strict";var en=1e3,tn=en*60,rn=tn*60,Tr=rn*24,cS=Tr*7,uS=Tr*365.25;zh.exports=function(r,e){e=e||{};var t=typeof r;if(t==="string"&&r.length>0)return lS(r);if(t==="number"&&isFinite(r))return e.long?hS(r):fS(r);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))};function lS(r){if(r=String(r),!(r.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(r);if(e){var t=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*uS;case"weeks":case"week":case"w":return t*cS;case"days":case"day":case"d":return t*Tr;case"hours":case"hour":case"hrs":case"hr":case"h":return t*rn;case"minutes":case"minute":case"mins":case"min":case"m":return t*tn;case"seconds":case"second":case"secs":case"sec":case"s":return t*en;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function fS(r){var e=Math.abs(r);return e>=Tr?Math.round(r/Tr)+"d":e>=rn?Math.round(r/rn)+"h":e>=tn?Math.round(r/tn)+"m":e>=en?Math.round(r/en)+"s":r+"ms"}function hS(r){var e=Math.abs(r);return e>=Tr?ss(r,e,Tr,"day"):e>=rn?ss(r,e,rn,"hour"):e>=tn?ss(r,e,tn,"minute"):e>=en?ss(r,e,en,"second"):r+" ms"}function ss(r,e,t,n){var i=e>=t*1.5;return Math.round(r/t)+" "+n+(i?"s":"")}});var Ca=E((cA,Wh)=>{"use strict";function dS(r){t.debug=t,t.default=t,t.coerce=c,t.disable=s,t.enable=i,t.enabled=o,t.humanize=Vh(),t.destroy=l,Object.keys(r).forEach(u=>{t[u]=r[u]}),t.names=[],t.skips=[],t.formatters={};function e(u){let f=0;for(let h=0;h<u.length;h++)f=(f<<5)-f+u.charCodeAt(h),f|=0;return t.colors[Math.abs(f)%t.colors.length]}t.selectColor=e;function t(u){let f,h=null,d,m;function b(...p){if(!b.enabled)return;let w=b,k=Number(new Date),O=k-(f||k);w.diff=O,w.prev=f,w.curr=k,f=k,p[0]=t.coerce(p[0]),typeof p[0]!="string"&&p.unshift("%O");let C=0;p[0]=p[0].replace(/%([a-zA-Z%])/g,(T,z)=>{if(T==="%%")return"%";C++;let G=t.formatters[z];if(typeof G=="function"){let I=p[C];T=G.call(w,I),p.splice(C,1),C--}return T}),t.formatArgs.call(w,p),(w.log||t.log).apply(w,p)}return b.namespace=u,b.useColors=t.useColors(),b.color=t.selectColor(u),b.extend=n,b.destroy=t.destroy,Object.defineProperty(b,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(d!==t.namespaces&&(d=t.namespaces,m=t.enabled(u)),m),set:p=>{h=p}}),typeof t.init=="function"&&t.init(b),b}function n(u,f){let h=t(this.namespace+(typeof f>"u"?":":f)+u);return h.log=this.log,h}function i(u){t.save(u),t.namespaces=u,t.names=[],t.skips=[];let f,h=(typeof u=="string"?u:"").split(/[\s,]+/),d=h.length;for(f=0;f<d;f++)h[f]&&(u=h[f].replace(/\*/g,".*?"),u[0]==="-"?t.skips.push(new RegExp("^"+u.slice(1)+"$")):t.names.push(new RegExp("^"+u+"$")))}function s(){let u=[...t.names.map(a),...t.skips.map(a).map(f=>"-"+f)].join(",");return t.enable(""),u}function o(u){if(u[u.length-1]==="*")return!0;let f,h;for(f=0,h=t.skips.length;f<h;f++)if(t.skips[f].test(u))return!1;for(f=0,h=t.names.length;f<h;f++)if(t.names[f].test(u))return!0;return!1}function a(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}function c(u){return u instanceof Error?u.stack||u.message:u}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}Wh.exports=dS});var Xh=E((Ke,os)=>{"use strict";Ke.formatArgs=mS;Ke.save=yS;Ke.load=ES;Ke.useColors=pS;Ke.storage=gS();Ke.destroy=(()=>{let r=!1;return()=>{r||(r=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Ke.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function pS(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function mS(r){if(r[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+r[0]+(this.useColors?"%c ":" ")+"+"+os.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;r.splice(1,0,e,"color: inherit");let t=0,n=0;r[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(t++,i==="%c"&&(n=t))}),r.splice(n,0,e)}Ke.log=console.debug||console.log||(()=>{});function yS(r){try{r?Ke.storage.setItem("debug",r):Ke.storage.removeItem("debug")}catch{}}function ES(){let r;try{r=Ke.storage.getItem("debug")}catch{}return!r&&typeof process<"u"&&"env"in process&&(r=process.env.DEBUG),r}function gS(){try{return localStorage}catch{}}os.exports=Ca()(Ke);var{formatters:_S}=os.exports;_S.j=function(r){try{return JSON.stringify(r)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var Yh=E((uA,Kh)=>{"use strict";Kh.exports=(r,e=process.argv)=>{let t=r.startsWith("-")?"":r.length===1?"-":"--",n=e.indexOf(t+r),i=e.indexOf("--");return n!==-1&&(i===-1||n<i)}});var Qh=E((lA,Zh)=>{"use strict";var bS=require("os"),Jh=require("tty"),rt=Yh(),{env:ye}=process,Xt;rt("no-color")||rt("no-colors")||rt("color=false")||rt("color=never")?Xt=0:(rt("color")||rt("colors")||rt("color=true")||rt("color=always"))&&(Xt=1);"FORCE_COLOR"in ye&&(ye.FORCE_COLOR==="true"?Xt=1:ye.FORCE_COLOR==="false"?Xt=0:Xt=ye.FORCE_COLOR.length===0?1:Math.min(parseInt(ye.FORCE_COLOR,10),3));function Ia(r){return r===0?!1:{level:r,hasBasic:!0,has256:r>=2,has16m:r>=3}}function Na(r,e){if(Xt===0)return 0;if(rt("color=16m")||rt("color=full")||rt("color=truecolor"))return 3;if(rt("color=256"))return 2;if(r&&!e&&Xt===void 0)return 0;let t=Xt||0;if(ye.TERM==="dumb")return t;if(process.platform==="win32"){let n=bS.release().split(".");return Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in ye)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(n=>n in ye)||ye.CI_NAME==="codeship"?1:t;if("TEAMCITY_VERSION"in ye)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(ye.TEAMCITY_VERSION)?1:0;if(ye.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in ye){let n=parseInt((ye.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(ye.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(ye.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(ye.TERM)||"COLORTERM"in ye?1:t}function vS(r){let e=Na(r,r&&r.isTTY);return Ia(e)}Zh.exports={supportsColor:vS,stdout:Ia(Na(!0,Jh.isatty(1))),stderr:Ia(Na(!0,Jh.isatty(2)))}});var td=E((Se,cs)=>{"use strict";var SS=require("tty"),as=require("util");Se.init=IS;Se.log=OS;Se.formatArgs=RS;Se.save=TS;Se.load=CS;Se.useColors=wS;Se.destroy=as.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");Se.colors=[6,2,3,4,5,1];try{let r=Qh();r&&(r.stderr||r).level>=2&&(Se.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}Se.inspectOpts=Object.keys(process.env).filter(r=>/^debug_/i.test(r)).reduce((r,e)=>{let t=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,s)=>s.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),r[t]=n,r},{});function wS(){return"colors"in Se.inspectOpts?!!Se.inspectOpts.colors:SS.isatty(process.stderr.fd)}function RS(r){let{namespace:e,useColors:t}=this;if(t){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),s=`  ${i};1m${e} \x1B[0m`;r[0]=s+r[0].split(`
`).join(`
`+s),r.push(i+"m+"+cs.exports.humanize(this.diff)+"\x1B[0m")}else r[0]=xS()+e+" "+r[0]}function xS(){return Se.inspectOpts.hideDate?"":new Date().toISOString()+" "}function OS(...r){return process.stderr.write(as.format(...r)+`
`)}function TS(r){r?process.env.DEBUG=r:delete process.env.DEBUG}function CS(){return process.env.DEBUG}function IS(r){r.inspectOpts={};let e=Object.keys(Se.inspectOpts);for(let t=0;t<e.length;t++)r.inspectOpts[e[t]]=Se.inspectOpts[e[t]]}cs.exports=Ca()(Se);var{formatters:ed}=cs.exports;ed.o=function(r){return this.inspectOpts.colors=this.useColors,as.inspect(r,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};ed.O=function(r){return this.inspectOpts.colors=this.useColors,as.inspect(r,this.inspectOpts)}});var rd=E((fA,Aa)=>{"use strict";typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?Aa.exports=Xh():Aa.exports=td()});var id=E((hA,nd)=>{"use strict";var Qn;nd.exports=function(){if(!Qn){try{Qn=rd()("follow-redirects")}catch{}typeof Qn!="function"&&(Qn=function(){})}Qn.apply(null,arguments)}});var qa=E((dA,Ma)=>{"use strict";var Cr=require("url"),Da=Cr.URL,NS=require("http"),AS=require("https"),La=require("stream").Writable,ad=require("assert"),cd=id(),Pa=["abort","aborted","connect","error","socket","timeout"],Ua=Object.create(null);Pa.forEach(function(r){Ua[r]=function(e,t,n){this._redirectable.emit(r,e,t,n)}});var DS=ti("ERR_INVALID_URL","Invalid URL",TypeError),sd=ti("ERR_FR_REDIRECTION_FAILURE","Redirected request failed"),kS=ti("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded"),LS=ti("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),PS=ti("ERR_STREAM_WRITE_AFTER_END","write after end"),US=La.prototype.destroy||ld;function $e(r,e){La.call(this),this._sanitizeOptions(r),this._options=r,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],e&&this.on("response",e);var t=this;this._onNativeResponse=function(n){t._processResponse(n)},this._performRequest()}$e.prototype=Object.create(La.prototype);$e.prototype.abort=function(){Fa(this._currentRequest),this._currentRequest.abort(),this.emit("abort")};$e.prototype.destroy=function(r){return Fa(this._currentRequest,r),US.call(this,r),this};$e.prototype.write=function(r,e,t){if(this._ending)throw new PS;if(!Ir(r)&&!MS(r))throw new TypeError("data should be a string, Buffer or Uint8Array");if(ei(e)&&(t=e,e=null),r.length===0){t&&t();return}this._requestBodyLength+r.length<=this._options.maxBodyLength?(this._requestBodyLength+=r.length,this._requestBodyBuffers.push({data:r,encoding:e}),this._currentRequest.write(r,e,t)):(this.emit("error",new LS),this.abort())};$e.prototype.end=function(r,e,t){if(ei(r)?(t=r,r=e=null):ei(e)&&(t=e,e=null),!r)this._ended=this._ending=!0,this._currentRequest.end(null,null,t);else{var n=this,i=this._currentRequest;this.write(r,e,function(){n._ended=!0,i.end(null,null,t)}),this._ending=!0}};$e.prototype.setHeader=function(r,e){this._options.headers[r]=e,this._currentRequest.setHeader(r,e)};$e.prototype.removeHeader=function(r){delete this._options.headers[r],this._currentRequest.removeHeader(r)};$e.prototype.setTimeout=function(r,e){var t=this;function n(o){o.setTimeout(r),o.removeListener("timeout",o.destroy),o.addListener("timeout",o.destroy)}function i(o){t._timeout&&clearTimeout(t._timeout),t._timeout=setTimeout(function(){t.emit("timeout"),s()},r),n(o)}function s(){t._timeout&&(clearTimeout(t._timeout),t._timeout=null),t.removeListener("abort",s),t.removeListener("error",s),t.removeListener("response",s),t.removeListener("close",s),e&&t.removeListener("timeout",e),t.socket||t._currentRequest.removeListener("socket",i)}return e&&this.on("timeout",e),this.socket?i(this.socket):this._currentRequest.once("socket",i),this.on("socket",n),this.on("abort",s),this.on("error",s),this.on("response",s),this.on("close",s),this};["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach(function(r){$e.prototype[r]=function(e,t){return this._currentRequest[r](e,t)}});["aborted","connection","socket"].forEach(function(r){Object.defineProperty($e.prototype,r,{get:function(){return this._currentRequest[r]}})});$e.prototype._sanitizeOptions=function(r){if(r.headers||(r.headers={}),r.host&&(r.hostname||(r.hostname=r.host),delete r.host),!r.pathname&&r.path){var e=r.path.indexOf("?");e<0?r.pathname=r.path:(r.pathname=r.path.substring(0,e),r.search=r.path.substring(e))}};$e.prototype._performRequest=function(){var r=this._options.protocol,e=this._options.nativeProtocols[r];if(!e){this.emit("error",new TypeError("Unsupported protocol "+r));return}if(this._options.agents){var t=r.slice(0,-1);this._options.agent=this._options.agents[t]}var n=this._currentRequest=e.request(this._options,this._onNativeResponse);n._redirectable=this;for(var i of Pa)n.on(i,Ua[i]);if(this._currentUrl=/^\//.test(this._options.path)?Cr.format(this._options):this._options.path,this._isRedirect){var s=0,o=this,a=this._requestBodyBuffers;(function c(l){if(n===o._currentRequest)if(l)o.emit("error",l);else if(s<a.length){var u=a[s++];n.finished||n.write(u.data,u.encoding,c)}else o._ended&&n.end()})()}};$e.prototype._processResponse=function(r){var e=r.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:r.headers,statusCode:e});var t=r.headers.location;if(!t||this._options.followRedirects===!1||e<300||e>=400){r.responseUrl=this._currentUrl,r.redirects=this._redirects,this.emit("response",r),this._requestBodyBuffers=[];return}if(Fa(this._currentRequest),r.destroy(),++this._redirectCount>this._options.maxRedirects){this.emit("error",new kS);return}var n,i=this._options.beforeRedirect;i&&(n=Object.assign({Host:r.req.getHeader("host")},this._options.headers));var s=this._options.method;((e===301||e===302)&&this._options.method==="POST"||e===303&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],ka(/^content-/i,this._options.headers));var o=ka(/^host$/i,this._options.headers),a=Cr.parse(this._currentUrl),c=o||a.host,l=/^\w+:/.test(t)?this._currentUrl:Cr.format(Object.assign(a,{host:c})),u;try{u=Cr.resolve(l,t)}catch(m){this.emit("error",new sd({cause:m}));return}cd("redirecting to",u),this._isRedirect=!0;var f=Cr.parse(u);if(Object.assign(this._options,f),(f.protocol!==a.protocol&&f.protocol!=="https:"||f.host!==c&&!FS(f.host,c))&&ka(/^(?:authorization|cookie)$/i,this._options.headers),ei(i)){var h={headers:r.headers,statusCode:e},d={url:l,method:s,headers:n};try{i(this._options,h,d)}catch(m){this.emit("error",m);return}this._sanitizeOptions(this._options)}try{this._performRequest()}catch(m){this.emit("error",new sd({cause:m}))}};function ud(r){var e={maxRedirects:21,maxBodyLength:10485760},t={};return Object.keys(r).forEach(function(n){var i=n+":",s=t[i]=r[n],o=e[n]=Object.create(s);function a(l,u,f){if(Ir(l)){var h;try{h=od(new Da(l))}catch{h=Cr.parse(l)}if(!Ir(h.protocol))throw new DS({input:l});l=h}else Da&&l instanceof Da?l=od(l):(f=u,u=l,l={protocol:i});return ei(u)&&(f=u,u=null),u=Object.assign({maxRedirects:e.maxRedirects,maxBodyLength:e.maxBodyLength},l,u),u.nativeProtocols=t,!Ir(u.host)&&!Ir(u.hostname)&&(u.hostname="::1"),ad.equal(u.protocol,i,"protocol mismatch"),cd("options",u),new $e(u,f)}function c(l,u,f){var h=o.request(l,u,f);return h.end(),h}Object.defineProperties(o,{request:{value:a,configurable:!0,enumerable:!0,writable:!0},get:{value:c,configurable:!0,enumerable:!0,writable:!0}})}),e}function ld(){}function od(r){var e={protocol:r.protocol,hostname:r.hostname.startsWith("[")?r.hostname.slice(1,-1):r.hostname,hash:r.hash,search:r.search,pathname:r.pathname,path:r.pathname+r.search,href:r.href};return r.port!==""&&(e.port=Number(r.port)),e}function ka(r,e){var t;for(var n in e)r.test(n)&&(t=e[n],delete e[n]);return t===null||typeof t>"u"?void 0:String(t).trim()}function ti(r,e,t){function n(i){Error.captureStackTrace(this,this.constructor),Object.assign(this,i||{}),this.code=r,this.message=this.cause?e+": "+this.cause.message:e}return n.prototype=new(t||Error),n.prototype.constructor=n,n.prototype.name="Error ["+r+"]",n}function Fa(r,e){for(var t of Pa)r.removeListener(t,Ua[t]);r.on("error",ld),r.destroy(e)}function FS(r,e){ad(Ir(r)&&Ir(e));var t=r.length-e.length-1;return t>0&&r[t]==="."&&r.endsWith(e)}function Ir(r){return typeof r=="string"||r instanceof String}function ei(r){return typeof r=="function"}function MS(r){return typeof r=="object"&&"length"in r}Ma.exports=ud({http:NS,https:AS});Ma.exports.wrap=ud});var Ba=E((pA,qS)=>{qS.exports={name:"axios",version:"0.21.2",description:"Promise based HTTP client for the browser and node.js",main:"index.js",scripts:{test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},repository:{type:"git",url:"https://github.com/axios/axios.git"},keywords:["xhr","http","ajax","promise","node"],author:"Matt Zabriskie",license:"MIT",bugs:{url:"https://github.com/axios/axios/issues"},homepage:"https://axios-http.com",devDependencies:{coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},browser:{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},jsdelivr:"dist/axios.min.js",unpkg:"dist/axios.min.js",typings:"./index.d.ts",dependencies:{"follow-redirects":"^1.14.0"},bundlesize:[{path:"./dist/axios.min.js",threshold:"5kB"}]}});var yd=E((mA,md)=>{"use strict";var ri=Fe(),fd=Ra(),BS=xa(),jS=Qi(),GS=require("http"),$S=require("https"),HS=qa().http,zS=qa().https,hd=require("url"),VS=require("zlib"),WS=Ba(),us=rs(),ja=ts(),dd=/https:?/;function pd(r,e,t){if(r.hostname=e.host,r.host=e.host,r.port=e.port,r.path=t,e.auth){var n=Buffer.from(e.auth.username+":"+e.auth.password,"utf8").toString("base64");r.headers["Proxy-Authorization"]="Basic "+n}r.beforeRedirect=function(s){s.headers.host=s.host,pd(s,e,s.href)}}md.exports=function(e){return new Promise(function(n,i){var s=function(U){n(U)},o=function(U){i(U)},a=e.data,c=e.headers;if("User-Agent"in c||"user-agent"in c?!c["User-Agent"]&&!c["user-agent"]&&(delete c["User-Agent"],delete c["user-agent"]):c["User-Agent"]="axios/"+WS.version,a&&!ri.isStream(a)){if(!Buffer.isBuffer(a))if(ri.isArrayBuffer(a))a=Buffer.from(new Uint8Array(a));else if(ri.isString(a))a=Buffer.from(a,"utf-8");else return o(us("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",e));c["Content-Length"]=a.length}var l=void 0;if(e.auth){var u=e.auth.username||"",f=e.auth.password||"";l=u+":"+f}var h=BS(e.baseURL,e.url),d=hd.parse(h),m=d.protocol||"http:";if(!l&&d.auth){var b=d.auth.split(":"),p=b[0]||"",w=b[1]||"";l=p+":"+w}l&&delete c.Authorization;var k=dd.test(m),O=k?e.httpsAgent:e.httpAgent,C={path:jS(d.path,e.params,e.paramsSerializer).replace(/^\?/,""),method:e.method.toUpperCase(),headers:c,agent:O,agents:{http:e.httpAgent,https:e.httpsAgent},auth:l};e.socketPath?C.socketPath=e.socketPath:(C.hostname=d.hostname,C.port=d.port);var L=e.proxy;if(!L&&L!==!1){var T=m.slice(0,-1)+"_proxy",z=process.env[T]||process.env[T.toUpperCase()];if(z){var G=hd.parse(z),I=process.env.no_proxy||process.env.NO_PROXY,N=!0;if(I){var j=I.split(",").map(function(U){return U.trim()});N=!j.some(function(U){return U?U==="*"||U[0]==="."&&d.hostname.substr(d.hostname.length-U.length)===U?!0:d.hostname===U:!1})}if(N&&(L={host:G.hostname,port:G.port,protocol:G.protocol},G.auth)){var X=G.auth.split(":");L.auth={username:X[0],password:X[1]}}}}L&&(C.headers.host=d.hostname+(d.port?":"+d.port:""),pd(C,L,m+"//"+d.hostname+(d.port?":"+d.port:"")+C.path));var V,J=k&&(L?dd.test(L.protocol):!0);e.transport?V=e.transport:e.maxRedirects===0?V=J?$S:GS:(e.maxRedirects&&(C.maxRedirects=e.maxRedirects),V=J?zS:HS),e.maxBodyLength>-1&&(C.maxBodyLength=e.maxBodyLength);var B=V.request(C,function(U){if(!B.aborted){var H=U,le=U.req||B;if(U.statusCode!==204&&le.method!=="HEAD"&&e.decompress!==!1)switch(U.headers["content-encoding"]){case"gzip":case"compress":case"deflate":H=H.pipe(VS.createUnzip()),delete U.headers["content-encoding"];break}var Re={status:U.statusCode,statusText:U.statusMessage,headers:U.headers,config:e,request:le};if(e.responseType==="stream")Re.data=H,fd(s,o,Re);else{var R=[],A=0;H.on("data",function(W){R.push(W),A+=W.length,e.maxContentLength>-1&&A>e.maxContentLength&&(H.destroy(),o(us("maxContentLength size of "+e.maxContentLength+" exceeded",e,null,le)))}),H.on("error",function(W){B.aborted||o(ja(W,e,null,le))}),H.on("end",function(){var W=Buffer.concat(R);e.responseType!=="arraybuffer"&&(W=W.toString(e.responseEncoding),(!e.responseEncoding||e.responseEncoding==="utf8")&&(W=ri.stripBOM(W))),Re.data=W,fd(s,o,Re)})}}});if(B.on("error",function(U){B.aborted&&U.code!=="ERR_FR_TOO_MANY_REDIRECTS"||o(ja(U,e,null,B))}),e.timeout){var K=parseInt(e.timeout,10);if(isNaN(K)){o(us("error trying to parse `config.timeout` to int",e,"ERR_PARSE_TIMEOUT",B));return}B.setTimeout(K,function(){B.abort(),o(us("timeout of "+K+"ms exceeded",e,e.transitional&&e.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",B))})}e.cancelToken&&e.cancelToken.promise.then(function(U){B.aborted||(B.abort(),o(U))}),ri.isStream(a)?a.on("error",function(U){o(ja(U,e,null,B))}).pipe(B):B.end(a)})}});var fs=E((yA,_d)=>{"use strict";var Me=Fe(),Ed=Th(),XS=ts(),KS={"Content-Type":"application/x-www-form-urlencoded"};function gd(r,e){!Me.isUndefined(r)&&Me.isUndefined(r["Content-Type"])&&(r["Content-Type"]=e)}function YS(){var r;return typeof XMLHttpRequest<"u"?r=Hh():typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]"&&(r=yd()),r}var ls={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:YS(),transformRequest:[function(e,t){return Ed(t,"Accept"),Ed(t,"Content-Type"),Me.isFormData(e)||Me.isArrayBuffer(e)||Me.isBuffer(e)||Me.isStream(e)||Me.isFile(e)||Me.isBlob(e)?e:Me.isArrayBufferView(e)?e.buffer:Me.isURLSearchParams(e)?(gd(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):Me.isObject(e)||t&&t["Content-Type"]==="application/json"?(gd(t,"application/json"),JSON.stringify(e)):e}],transformResponse:[function(e){var t=this.transitional,n=t&&t.silentJSONParsing,i=t&&t.forcedJSONParsing,s=!n&&this.responseType==="json";if(s||i&&Me.isString(e)&&e.length)try{return JSON.parse(e)}catch(o){if(s)throw o.name==="SyntaxError"?XS(o,this,"E_JSON_PARSE"):o}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300}};ls.headers={common:{Accept:"application/json, text/plain, */*"}};Me.forEach(["delete","get","head"],function(e){ls.headers[e]={}});Me.forEach(["post","put","patch"],function(e){ls.headers[e]=Me.merge(KS)});_d.exports=ls});var vd=E((EA,bd)=>{"use strict";var JS=Fe(),ZS=fs();bd.exports=function(e,t,n){var i=this||ZS;return JS.forEach(n,function(o){e=o.call(i,e,t)}),e}});var Ga=E((gA,Sd)=>{"use strict";Sd.exports=function(e){return!!(e&&e.__CANCEL__)}});var xd=E((_A,Rd)=>{"use strict";var wd=Fe(),$a=vd(),QS=Ga(),ew=fs();function Ha(r){r.cancelToken&&r.cancelToken.throwIfRequested()}Rd.exports=function(e){Ha(e),e.headers=e.headers||{},e.data=$a.call(e,e.data,e.headers,e.transformRequest),e.headers=wd.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),wd.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var t=e.adapter||ew.adapter;return t(e).then(function(i){return Ha(e),i.data=$a.call(e,i.data,i.headers,e.transformResponse),i},function(i){return QS(i)||(Ha(e),i&&i.response&&(i.response.data=$a.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})}});var za=E((bA,Od)=>{"use strict";var Oe=Fe();Od.exports=function(e,t){t=t||{};var n={},i=["url","method","data"],s=["headers","auth","proxy","params"],o=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],a=["validateStatus"];function c(h,d){return Oe.isPlainObject(h)&&Oe.isPlainObject(d)?Oe.merge(h,d):Oe.isPlainObject(d)?Oe.merge({},d):Oe.isArray(d)?d.slice():d}function l(h){Oe.isUndefined(t[h])?Oe.isUndefined(e[h])||(n[h]=c(void 0,e[h])):n[h]=c(e[h],t[h])}Oe.forEach(i,function(d){Oe.isUndefined(t[d])||(n[d]=c(void 0,t[d]))}),Oe.forEach(s,l),Oe.forEach(o,function(d){Oe.isUndefined(t[d])?Oe.isUndefined(e[d])||(n[d]=c(void 0,e[d])):n[d]=c(void 0,t[d])}),Oe.forEach(a,function(d){d in t?n[d]=c(e[d],t[d]):d in e&&(n[d]=c(void 0,e[d]))});var u=i.concat(s).concat(o).concat(a),f=Object.keys(e).concat(Object.keys(t)).filter(function(d){return u.indexOf(d)===-1});return Oe.forEach(f,l),n}});var Ad=E((vA,Nd)=>{"use strict";var Cd=Ba(),Va={};["object","boolean","number","function","string","symbol"].forEach(function(r,e){Va[r]=function(n){return typeof n===r||"a"+(e<1?"n ":" ")+r}});var Td={},tw=Cd.version.split(".");function Id(r,e){for(var t=e?e.split("."):tw,n=r.split("."),i=0;i<3;i++){if(t[i]>n[i])return!0;if(t[i]<n[i])return!1}return!1}Va.transitional=function(e,t,n){var i=t&&Id(t);function s(o,a){return"[Axios v"+Cd.version+"] Transitional option '"+o+"'"+a+(n?". "+n:"")}return function(o,a,c){if(e===!1)throw new Error(s(a," has been removed in "+t));return i&&!Td[a]&&(Td[a]=!0,console.warn(s(a," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(o,a,c):!0}};function rw(r,e,t){if(typeof r!="object")throw new TypeError("options must be an object");for(var n=Object.keys(r),i=n.length;i-- >0;){var s=n[i],o=e[s];if(o){var a=r[s],c=a===void 0||o(a,s,r);if(c!==!0)throw new TypeError("option "+s+" must be "+c);continue}if(t!==!0)throw Error("Unknown option "+s)}}Nd.exports={isOlderVersion:Id,assertOptions:rw,validators:Va}});var Fd=E((SA,Ud)=>{"use strict";var Ld=Fe(),nw=Qi(),Dd=xh(),kd=xd(),hs=za(),Pd=Ad(),nn=Pd.validators;function ni(r){this.defaults=r,this.interceptors={request:new Dd,response:new Dd}}ni.prototype.request=function(e){typeof e=="string"?(e=arguments[1]||{},e.url=arguments[0]):e=e||{},e=hs(this.defaults,e),e.method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=e.transitional;t!==void 0&&Pd.assertOptions(t,{silentJSONParsing:nn.transitional(nn.boolean,"1.0.0"),forcedJSONParsing:nn.transitional(nn.boolean,"1.0.0"),clarifyTimeoutError:nn.transitional(nn.boolean,"1.0.0")},!1);var n=[],i=!0;this.interceptors.request.forEach(function(h){typeof h.runWhen=="function"&&h.runWhen(e)===!1||(i=i&&h.synchronous,n.unshift(h.fulfilled,h.rejected))});var s=[];this.interceptors.response.forEach(function(h){s.push(h.fulfilled,h.rejected)});var o;if(!i){var a=[kd,void 0];for(Array.prototype.unshift.apply(a,n),a.concat(s),o=Promise.resolve(e);a.length;)o=o.then(a.shift(),a.shift());return o}for(var c=e;n.length;){var l=n.shift(),u=n.shift();try{c=l(c)}catch(f){u(f);break}}try{o=kd(c)}catch(f){return Promise.reject(f)}for(;s.length;)o=o.then(s.shift(),s.shift());return o};ni.prototype.getUri=function(e){return e=hs(this.defaults,e),nw(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};Ld.forEach(["delete","get","head","options"],function(e){ni.prototype[e]=function(t,n){return this.request(hs(n||{},{method:e,url:t,data:(n||{}).data}))}});Ld.forEach(["post","put","patch"],function(e){ni.prototype[e]=function(t,n,i){return this.request(hs(i||{},{method:e,url:t,data:n}))}});Ud.exports=ni});var Xa=E((wA,Md)=>{"use strict";function Wa(r){this.message=r}Wa.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};Wa.prototype.__CANCEL__=!0;Md.exports=Wa});var Bd=E((RA,qd)=>{"use strict";var iw=Xa();function ds(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(i){e=i});var t=this;r(function(i){t.reason||(t.reason=new iw(i),e(t.reason))})}ds.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};ds.source=function(){var e,t=new ds(function(i){e=i});return{token:t,cancel:e}};qd.exports=ds});var Gd=E((xA,jd)=>{"use strict";jd.exports=function(e){return function(n){return e.apply(null,n)}}});var Hd=E((OA,$d)=>{"use strict";$d.exports=function(e){return typeof e=="object"&&e.isAxiosError===!0}});var Wd=E((TA,Ka)=>{"use strict";var zd=Fe(),sw=_a(),ps=Fd(),ow=za(),aw=fs();function Vd(r){var e=new ps(r),t=sw(ps.prototype.request,e);return zd.extend(t,ps.prototype,e),zd.extend(t,e),t}var lt=Vd(aw);lt.Axios=ps;lt.create=function(e){return Vd(ow(lt.defaults,e))};lt.Cancel=Xa();lt.CancelToken=Bd();lt.isCancel=Ga();lt.all=function(e){return Promise.all(e)};lt.spread=Gd();lt.isAxiosError=Hd();Ka.exports=lt;Ka.exports.default=lt});var Ya=E((CA,Xd)=>{"use strict";Xd.exports=Wd()});function Te(r,e=1e4){let t=s=>s,n=process.env.NX_CLOUD_API||r.url||"https://cloud.nx.app",i=Et?Et:r.accessToken;if(!i)throw new Error("Unable to authenticate. Either define accessToken in nx.json or set the NX_CLOUD_ACCESS_TOKEN env variable.");if(r.customProxyConfigPath){let{nxCloudProxyConfig:s}=require((0,Yd.join)(process.cwd(),r.customProxyConfigPath));t=s??t}return cw.create(t({baseURL:n,timeout:gt?Yn:e,headers:{authorization:i,"Nx-Cloud-Client-Version":r.clientVersion||"unknown"}}))}async function Za(r,e){let t=new Date,n=await e();return P&&console.log(`${r}: ${new Date().getTime()-t.getTime()}`),n}async function ce(r,e=Ki){try{return await r()}catch(t){let n=t.response&&t.response.status||t.code;(n===401||n===403)&&(e=0);let i=t.response?t.response.data.message?t.response.data.message:t.response.data:t.message;if(e===0)throw typeof i!="string"&&(i=t.message),new Ja("failure",`Error when connecting to Nx Cloud. Code: ${n}. Error: ${i}`,t);if(n==429){if(!ms){let s=1e4+(Ki+1-e)*6e4*Math.random();Kd.note({title:`Received Code ${n}. ${i} Retrying in ${s}ms.`}),ms=Ge(s)}await ms,ms=null}else{let s=1e3+(Ki+1-e)*4e3*Math.random();P&&Kd.note({title:`Received Code ${n}. Retrying in ${s}ms.`}),await Ge(s)}return ce(r,e-1)}}var Yd,Kd,cw,Ja,ms,_t=q(()=>{"use strict";Yd=require("path");re();Zr();({output:Kd}=Y()),cw=Ya(),Ja=class{constructor(e,t,n){this.type=e;this.message=t;this.axiosException=n}};ms=null});function Kt(r){uw()?(process.stdout.write(`   ${Qa(r)}`),bt.addNewline(),bt.addNewline()):lw()?(bt.addNewline(),process.stdout.write(`${Qa(r)}`),bt.addNewline(),bt.addNewline()):(process.stdout.write(`  ${Qa(r)}`),bt.addNewline(),bt.addNewline())}function uw(){try{return ie("nx/src/tasks-runner/life-cycles/dynamic-run-many-terminal-output-life-cycle"),!0}catch{try{return ie("@nrwl/workspace/src/tasks-runner/life-cycles/dynamic-run-many-terminal-output-life-cycle"),!0}catch{return!1}}}function Qa(r){let e;if(typeof bt.dim=="function")return bt.dim(r);try{return bt.colors.gray(r)}catch{return r}}function lw(){return process.argv.indexOf("run-many")===-1&&process.argv.indexOf("affected")===-1}var bt,ii=q(()=>{"use strict";wr();({output:bt}=Y())});var ec,Jd,Ce,ne,Ie,fw,hw,sn,kt=q(()=>{"use strict";ec=require("perf_hooks");_t();re();ii();Jd=[],Ce=r=>{let e=ec.performance.now();return{recordMetric:n=>{let i=ec.performance.now();n.durationMs=i-e,n.entryType=r,Jd.push(n)}}},ne=r=>{var e;return{success:((e=r==null?void 0:r.status)==null?void 0:e.toString().startsWith("2"))??!1,statusCode:(r==null?void 0:r.status)??-1}},Ie={success:!1,statusCode:-1},fw=.1,hw=.01,sn=r=>{let e;me()?e=fw:e=hw;try{return dh||Math.random()<e?(P&&Kt("Submitting runner metrics for this run."),Te(r).post("/nx-cloud/save-metrics",{entries:Jd}).catch(n=>{})):Promise.resolve()}catch{}}});function ys(r){return r[r.length-1]==="/"?r.substr(0,r.length-1):r}var tc=q(()=>{"use strict"});var dw,Yt,Es=q(()=>{"use strict";_t();({output:dw}=Y()),Yt=class{constructor(e){this.apiAxiosInstance=Te(e)}async reportError(e){try{await ce(()=>this.apiAxiosInstance.post("/nx-cloud/report-client-error",{message:e}))}catch(t){dw.warn({title:`Unable to record the following error: '${e}'`,bodyLines:[t.message]})}}}});var an,on,Jt,gs=q(()=>{"use strict";an=require("crypto"),on=require("fs"),Jt=class{constructor(e){e&&(this.encryptionKey=this.to32bytes(e))}to32bytes(e){let t=e;for(;t.length<32;)t+=e;return Buffer.from(t).slice(0,32)}hasEncryption(){return!!this.encryptionKey}encryptFile(e){let t=(0,an.randomBytes)(16),n=(0,an.createCipheriv)("aes-256-cbc",this.encryptionKey,t),i=(0,on.readFileSync)(e),s=n.update(i),o=Buffer.concat([t,s,n.final()]);(0,on.writeFileSync)(e,o)}decryptFile(e){let t=(0,on.readFileSync)(e);try{let n=(0,an.createDecipheriv)("aes-256-cbc",this.encryptionKey,t.slice(0,16)),i=t.slice(16),s=n.update(i),o=Buffer.concat([s,n.final()]);(0,on.writeFileSync)(e,o)}catch{throw new Error("Could not decrypt the artifact. Please check your encryption key.")}}}});var cn=E((GA,Qd)=>{"use strict";var Zd=new Map([["C","cwd"],["f","file"],["z","gzip"],["P","preservePaths"],["U","unlink"],["strip-components","strip"],["stripComponents","strip"],["keep-newer","newer"],["keepNewer","newer"],["keep-newer-files","newer"],["keepNewerFiles","newer"],["k","keep"],["keep-existing","keep"],["keepExisting","keep"],["m","noMtime"],["no-mtime","noMtime"],["p","preserveOwner"],["L","follow"],["h","follow"]]);Qd.exports=r=>r?Object.keys(r).map(e=>[Zd.has(e)?Zd.get(e):e,r[e]]).reduce((e,t)=>(e[t[0]]=t[1],e),Object.create(null)):{}});var ln=E(($A,cp)=>{"use strict";var ep=typeof process=="object"&&process?process:{stdout:null,stderr:null},pw=require("events"),tp=require("stream"),rp=require("string_decoder").StringDecoder,Lt=Symbol("EOF"),Pt=Symbol("maybeEmitEnd"),Zt=Symbol("emittedEnd"),_s=Symbol("emittingEnd"),si=Symbol("emittedError"),bs=Symbol("closed"),np=Symbol("read"),vs=Symbol("flush"),ip=Symbol("flushChunk"),He=Symbol("encoding"),Ut=Symbol("decoder"),Ss=Symbol("flowing"),oi=Symbol("paused"),un=Symbol("resume"),Ee=Symbol("bufferLength"),rc=Symbol("bufferPush"),nc=Symbol("bufferShift"),Ne=Symbol("objectMode"),Ae=Symbol("destroyed"),ic=Symbol("emitData"),sp=Symbol("emitEnd"),sc=Symbol("emitEnd2"),Ft=Symbol("async"),ai=r=>Promise.resolve().then(r),op=global._MP_NO_ITERATOR_SYMBOLS_!=="1",mw=op&&Symbol.asyncIterator||Symbol("asyncIterator not implemented"),yw=op&&Symbol.iterator||Symbol("iterator not implemented"),Ew=r=>r==="end"||r==="finish"||r==="prefinish",gw=r=>r instanceof ArrayBuffer||typeof r=="object"&&r.constructor&&r.constructor.name==="ArrayBuffer"&&r.byteLength>=0,_w=r=>!Buffer.isBuffer(r)&&ArrayBuffer.isView(r),ws=class{constructor(e,t,n){this.src=e,this.dest=t,this.opts=n,this.ondrain=()=>e[un](),t.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},oc=class extends ws{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,t,n){super(e,t,n),this.proxyErrors=i=>t.emit("error",i),e.on("error",this.proxyErrors)}};cp.exports=class ap extends tp{constructor(e){super(),this[Ss]=!1,this[oi]=!1,this.pipes=[],this.buffer=[],this[Ne]=e&&e.objectMode||!1,this[Ne]?this[He]=null:this[He]=e&&e.encoding||null,this[He]==="buffer"&&(this[He]=null),this[Ft]=e&&!!e.async||!1,this[Ut]=this[He]?new rp(this[He]):null,this[Lt]=!1,this[Zt]=!1,this[_s]=!1,this[bs]=!1,this[si]=null,this.writable=!0,this.readable=!0,this[Ee]=0,this[Ae]=!1}get bufferLength(){return this[Ee]}get encoding(){return this[He]}set encoding(e){if(this[Ne])throw new Error("cannot set encoding in objectMode");if(this[He]&&e!==this[He]&&(this[Ut]&&this[Ut].lastNeed||this[Ee]))throw new Error("cannot change encoding");this[He]!==e&&(this[Ut]=e?new rp(e):null,this.buffer.length&&(this.buffer=this.buffer.map(t=>this[Ut].write(t)))),this[He]=e}setEncoding(e){this.encoding=e}get objectMode(){return this[Ne]}set objectMode(e){this[Ne]=this[Ne]||!!e}get async(){return this[Ft]}set async(e){this[Ft]=this[Ft]||!!e}write(e,t,n){if(this[Lt])throw new Error("write after end");if(this[Ae])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof t=="function"&&(n=t,t="utf8"),t||(t="utf8");let i=this[Ft]?ai:s=>s();return!this[Ne]&&!Buffer.isBuffer(e)&&(_w(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):gw(e)?e=Buffer.from(e):typeof e!="string"&&(this.objectMode=!0)),this[Ne]?(this.flowing&&this[Ee]!==0&&this[vs](!0),this.flowing?this.emit("data",e):this[rc](e),this[Ee]!==0&&this.emit("readable"),n&&i(n),this.flowing):e.length?(typeof e=="string"&&!(t===this[He]&&!this[Ut].lastNeed)&&(e=Buffer.from(e,t)),Buffer.isBuffer(e)&&this[He]&&(e=this[Ut].write(e)),this.flowing&&this[Ee]!==0&&this[vs](!0),this.flowing?this.emit("data",e):this[rc](e),this[Ee]!==0&&this.emit("readable"),n&&i(n),this.flowing):(this[Ee]!==0&&this.emit("readable"),n&&i(n),this.flowing)}read(e){if(this[Ae])return null;if(this[Ee]===0||e===0||e>this[Ee])return this[Pt](),null;this[Ne]&&(e=null),this.buffer.length>1&&!this[Ne]&&(this.encoding?this.buffer=[this.buffer.join("")]:this.buffer=[Buffer.concat(this.buffer,this[Ee])]);let t=this[np](e||null,this.buffer[0]);return this[Pt](),t}[np](e,t){return e===t.length||e===null?this[nc]():(this.buffer[0]=t.slice(e),t=t.slice(0,e),this[Ee]-=e),this.emit("data",t),!this.buffer.length&&!this[Lt]&&this.emit("drain"),t}end(e,t,n){return typeof e=="function"&&(n=e,e=null),typeof t=="function"&&(n=t,t="utf8"),e&&this.write(e,t),n&&this.once("end",n),this[Lt]=!0,this.writable=!1,(this.flowing||!this[oi])&&this[Pt](),this}[un](){this[Ae]||(this[oi]=!1,this[Ss]=!0,this.emit("resume"),this.buffer.length?this[vs]():this[Lt]?this[Pt]():this.emit("drain"))}resume(){return this[un]()}pause(){this[Ss]=!1,this[oi]=!0}get destroyed(){return this[Ae]}get flowing(){return this[Ss]}get paused(){return this[oi]}[rc](e){this[Ne]?this[Ee]+=1:this[Ee]+=e.length,this.buffer.push(e)}[nc](){return this.buffer.length&&(this[Ne]?this[Ee]-=1:this[Ee]-=this.buffer[0].length),this.buffer.shift()}[vs](e){do;while(this[ip](this[nc]()));!e&&!this.buffer.length&&!this[Lt]&&this.emit("drain")}[ip](e){return e?(this.emit("data",e),this.flowing):!1}pipe(e,t){if(this[Ae])return;let n=this[Zt];return t=t||{},e===ep.stdout||e===ep.stderr?t.end=!1:t.end=t.end!==!1,t.proxyErrors=!!t.proxyErrors,n?t.end&&e.end():(this.pipes.push(t.proxyErrors?new oc(this,e,t):new ws(this,e,t)),this[Ft]?ai(()=>this[un]()):this[un]()),e}unpipe(e){let t=this.pipes.find(n=>n.dest===e);t&&(this.pipes.splice(this.pipes.indexOf(t),1),t.unpipe())}addListener(e,t){return this.on(e,t)}on(e,t){let n=super.on(e,t);return e==="data"&&!this.pipes.length&&!this.flowing?this[un]():e==="readable"&&this[Ee]!==0?super.emit("readable"):Ew(e)&&this[Zt]?(super.emit(e),this.removeAllListeners(e)):e==="error"&&this[si]&&(this[Ft]?ai(()=>t.call(this,this[si])):t.call(this,this[si])),n}get emittedEnd(){return this[Zt]}[Pt](){!this[_s]&&!this[Zt]&&!this[Ae]&&this.buffer.length===0&&this[Lt]&&(this[_s]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[bs]&&this.emit("close"),this[_s]=!1)}emit(e,t,...n){if(e!=="error"&&e!=="close"&&e!==Ae&&this[Ae])return;if(e==="data")return t?this[Ft]?ai(()=>this[ic](t)):this[ic](t):!1;if(e==="end")return this[sp]();if(e==="close"){if(this[bs]=!0,!this[Zt]&&!this[Ae])return;let s=super.emit("close");return this.removeAllListeners("close"),s}else if(e==="error"){this[si]=t;let s=super.emit("error",t);return this[Pt](),s}else if(e==="resume"){let s=super.emit("resume");return this[Pt](),s}else if(e==="finish"||e==="prefinish"){let s=super.emit(e);return this.removeAllListeners(e),s}let i=super.emit(e,t,...n);return this[Pt](),i}[ic](e){for(let n of this.pipes)n.dest.write(e)===!1&&this.pause();let t=super.emit("data",e);return this[Pt](),t}[sp](){this[Zt]||(this[Zt]=!0,this.readable=!1,this[Ft]?ai(()=>this[sc]()):this[sc]())}[sc](){if(this[Ut]){let t=this[Ut].end();if(t){for(let n of this.pipes)n.dest.write(t);super.emit("data",t)}}for(let t of this.pipes)t.end();let e=super.emit("end");return this.removeAllListeners("end"),e}collect(){let e=[];this[Ne]||(e.dataLength=0);let t=this.promise();return this.on("data",n=>{e.push(n),this[Ne]||(e.dataLength+=n.length)}),t.then(()=>e)}concat(){return this[Ne]?Promise.reject(new Error("cannot concat in objectMode")):this.collect().then(e=>this[Ne]?Promise.reject(new Error("cannot concat in objectMode")):this[He]?e.join(""):Buffer.concat(e,e.dataLength))}promise(){return new Promise((e,t)=>{this.on(Ae,()=>t(new Error("stream destroyed"))),this.on("error",n=>t(n)),this.on("end",()=>e())})}[mw](){return{next:()=>{let t=this.read();if(t!==null)return Promise.resolve({done:!1,value:t});if(this[Lt])return Promise.resolve({done:!0});let n=null,i=null,s=l=>{this.removeListener("data",o),this.removeListener("end",a),i(l)},o=l=>{this.removeListener("error",s),this.removeListener("end",a),this.pause(),n({value:l,done:!!this[Lt]})},a=()=>{this.removeListener("error",s),this.removeListener("data",o),n({done:!0})},c=()=>s(new Error("stream destroyed"));return new Promise((l,u)=>{i=u,n=l,this.once(Ae,c),this.once("error",s),this.once("end",a),this.once("data",o)})}}}[yw](){return{next:()=>{let t=this.read();return{value:t,done:t===null}}}}destroy(e){return this[Ae]?(e?this.emit("error",e):this.emit(Ae),this):(this[Ae]=!0,this.buffer.length=0,this[Ee]=0,typeof this.close=="function"&&!this[bs]&&this.close(),e?this.emit("error",e):this.emit(Ae),this)}static isStream(e){return!!e&&(e instanceof ap||e instanceof tp||e instanceof pw&&(typeof e.pipe=="function"||typeof e.write=="function"&&typeof e.end=="function"))}}});var lp=E((HA,up)=>{"use strict";var bw=require("zlib").constants||{ZLIB_VERNUM:4736};up.exports=Object.freeze(Object.assign(Object.create(null),{Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_VERSION_ERROR:-6,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,DEFLATE:1,INFLATE:2,GZIP:3,GUNZIP:4,DEFLATERAW:5,INFLATERAW:6,UNZIP:7,BROTLI_DECODE:8,BROTLI_ENCODE:9,Z_MIN_WINDOWBITS:8,Z_MAX_WINDOWBITS:15,Z_DEFAULT_WINDOWBITS:15,Z_MIN_CHUNK:64,Z_MAX_CHUNK:1/0,Z_DEFAULT_CHUNK:16384,Z_MIN_MEMLEVEL:1,Z_MAX_MEMLEVEL:9,Z_DEFAULT_MEMLEVEL:8,Z_MIN_LEVEL:-1,Z_MAX_LEVEL:9,Z_DEFAULT_LEVEL:-1,BROTLI_OPERATION_PROCESS:0,BROTLI_OPERATION_FLUSH:1,BROTLI_OPERATION_FINISH:2,BROTLI_OPERATION_EMIT_METADATA:3,BROTLI_MODE_GENERIC:0,BROTLI_MODE_TEXT:1,BROTLI_MODE_FONT:2,BROTLI_DEFAULT_MODE:0,BROTLI_MIN_QUALITY:0,BROTLI_MAX_QUALITY:11,BROTLI_DEFAULT_QUALITY:11,BROTLI_MIN_WINDOW_BITS:10,BROTLI_MAX_WINDOW_BITS:24,BROTLI_LARGE_MAX_WINDOW_BITS:30,BROTLI_DEFAULT_WINDOW:22,BROTLI_MIN_INPUT_BLOCK_BITS:16,BROTLI_MAX_INPUT_BLOCK_BITS:24,BROTLI_PARAM_MODE:0,BROTLI_PARAM_QUALITY:1,BROTLI_PARAM_LGWIN:2,BROTLI_PARAM_LGBLOCK:3,BROTLI_PARAM_DISABLE_LITERAL_CONTEXT_MODELING:4,BROTLI_PARAM_SIZE_HINT:5,BROTLI_PARAM_LARGE_WINDOW:6,BROTLI_PARAM_NPOSTFIX:7,BROTLI_PARAM_NDIRECT:8,BROTLI_DECODER_RESULT_ERROR:0,BROTLI_DECODER_RESULT_SUCCESS:1,BROTLI_DECODER_RESULT_NEEDS_MORE_INPUT:2,BROTLI_DECODER_RESULT_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_PARAM_DISABLE_RING_BUFFER_REALLOCATION:0,BROTLI_DECODER_PARAM_LARGE_WINDOW:1,BROTLI_DECODER_NO_ERROR:0,BROTLI_DECODER_SUCCESS:1,BROTLI_DECODER_NEEDS_MORE_INPUT:2,BROTLI_DECODER_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_NIBBLE:-1,BROTLI_DECODER_ERROR_FORMAT_RESERVED:-2,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_META_NIBBLE:-3,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_ALPHABET:-4,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_SAME:-5,BROTLI_DECODER_ERROR_FORMAT_CL_SPACE:-6,BROTLI_DECODER_ERROR_FORMAT_HUFFMAN_SPACE:-7,BROTLI_DECODER_ERROR_FORMAT_CONTEXT_MAP_REPEAT:-8,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_1:-9,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_2:-10,BROTLI_DECODER_ERROR_FORMAT_TRANSFORM:-11,BROTLI_DECODER_ERROR_FORMAT_DICTIONARY:-12,BROTLI_DECODER_ERROR_FORMAT_WINDOW_BITS:-13,BROTLI_DECODER_ERROR_FORMAT_PADDING_1:-14,BROTLI_DECODER_ERROR_FORMAT_PADDING_2:-15,BROTLI_DECODER_ERROR_FORMAT_DISTANCE:-16,BROTLI_DECODER_ERROR_DICTIONARY_NOT_SET:-19,BROTLI_DECODER_ERROR_INVALID_ARGUMENTS:-20,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MODES:-21,BROTLI_DECODER_ERROR_ALLOC_TREE_GROUPS:-22,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MAP:-25,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_1:-26,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_2:-27,BROTLI_DECODER_ERROR_ALLOC_BLOCK_TYPE_TREES:-30,BROTLI_DECODER_ERROR_UNREACHABLE:-31},bw))});var Sc=E(Ye=>{"use strict";var fc=require("assert"),Qt=require("buffer").Buffer,dp=require("zlib"),Nr=Ye.constants=lp(),vw=ln(),fp=Qt.concat,Ar=Symbol("_superWrite"),hn=class extends Error{constructor(e){super("zlib: "+e.message),this.code=e.code,this.errno=e.errno,this.code||(this.code="ZLIB_ERROR"),this.message="zlib: "+e.message,Error.captureStackTrace(this,this.constructor)}get name(){return"ZlibError"}},Sw=Symbol("opts"),ci=Symbol("flushFlag"),hp=Symbol("finishFlushFlag"),vc=Symbol("fullFlushFlag"),se=Symbol("handle"),Rs=Symbol("onError"),fn=Symbol("sawError"),ac=Symbol("level"),cc=Symbol("strategy"),uc=Symbol("ended"),zA=Symbol("_defaultFullFlush"),xs=class extends vw{constructor(e,t){if(!e||typeof e!="object")throw new TypeError("invalid options for ZlibBase constructor");super(e),this[fn]=!1,this[uc]=!1,this[Sw]=e,this[ci]=e.flush,this[hp]=e.finishFlush;try{this[se]=new dp[t](e)}catch(n){throw new hn(n)}this[Rs]=n=>{this[fn]||(this[fn]=!0,this.close(),this.emit("error",n))},this[se].on("error",n=>this[Rs](new hn(n))),this.once("end",()=>this.close)}close(){this[se]&&(this[se].close(),this[se]=null,this.emit("close"))}reset(){if(!this[fn])return fc(this[se],"zlib binding closed"),this[se].reset()}flush(e){this.ended||(typeof e!="number"&&(e=this[vc]),this.write(Object.assign(Qt.alloc(0),{[ci]:e})))}end(e,t,n){return e&&this.write(e,t),this.flush(this[hp]),this[uc]=!0,super.end(null,null,n)}get ended(){return this[uc]}write(e,t,n){if(typeof t=="function"&&(n=t,t="utf8"),typeof e=="string"&&(e=Qt.from(e,t)),this[fn])return;fc(this[se],"zlib binding closed");let i=this[se]._handle,s=i.close;i.close=()=>{};let o=this[se].close;this[se].close=()=>{},Qt.concat=l=>l;let a;try{let l=typeof e[ci]=="number"?e[ci]:this[ci];a=this[se]._processChunk(e,l),Qt.concat=fp}catch(l){Qt.concat=fp,this[Rs](new hn(l))}finally{this[se]&&(this[se]._handle=i,i.close=s,this[se].close=o,this[se].removeAllListeners("error"))}this[se]&&this[se].on("error",l=>this[Rs](new hn(l)));let c;if(a)if(Array.isArray(a)&&a.length>0){c=this[Ar](Qt.from(a[0]));for(let l=1;l<a.length;l++)c=this[Ar](a[l])}else c=this[Ar](Qt.from(a));return n&&n(),c}[Ar](e){return super.write(e)}},Mt=class extends xs{constructor(e,t){e=e||{},e.flush=e.flush||Nr.Z_NO_FLUSH,e.finishFlush=e.finishFlush||Nr.Z_FINISH,super(e,t),this[vc]=Nr.Z_FULL_FLUSH,this[ac]=e.level,this[cc]=e.strategy}params(e,t){if(!this[fn]){if(!this[se])throw new Error("cannot switch params when binding is closed");if(!this[se].params)throw new Error("not supported in this implementation");if(this[ac]!==e||this[cc]!==t){this.flush(Nr.Z_SYNC_FLUSH),fc(this[se],"zlib binding closed");let n=this[se].flush;this[se].flush=(i,s)=>{this.flush(i),s()};try{this[se].params(e,t)}finally{this[se].flush=n}this[se]&&(this[ac]=e,this[cc]=t)}}}},hc=class extends Mt{constructor(e){super(e,"Deflate")}},dc=class extends Mt{constructor(e){super(e,"Inflate")}},lc=Symbol("_portable"),pc=class extends Mt{constructor(e){super(e,"Gzip"),this[lc]=e&&!!e.portable}[Ar](e){return this[lc]?(this[lc]=!1,e[9]=255,super[Ar](e)):super[Ar](e)}},mc=class extends Mt{constructor(e){super(e,"Gunzip")}},yc=class extends Mt{constructor(e){super(e,"DeflateRaw")}},Ec=class extends Mt{constructor(e){super(e,"InflateRaw")}},gc=class extends Mt{constructor(e){super(e,"Unzip")}},Os=class extends xs{constructor(e,t){e=e||{},e.flush=e.flush||Nr.BROTLI_OPERATION_PROCESS,e.finishFlush=e.finishFlush||Nr.BROTLI_OPERATION_FINISH,super(e,t),this[vc]=Nr.BROTLI_OPERATION_FLUSH}},_c=class extends Os{constructor(e){super(e,"BrotliCompress")}},bc=class extends Os{constructor(e){super(e,"BrotliDecompress")}};Ye.Deflate=hc;Ye.Inflate=dc;Ye.Gzip=pc;Ye.Gunzip=mc;Ye.DeflateRaw=yc;Ye.InflateRaw=Ec;Ye.Unzip=gc;typeof dp.BrotliCompress=="function"?(Ye.BrotliCompress=_c,Ye.BrotliDecompress=bc):Ye.BrotliCompress=Ye.BrotliDecompress=class{constructor(){throw new Error("Brotli is not supported in this version of Node.js")}}});var dn=E((XA,pp)=>{"use strict";var ww=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform;pp.exports=ww!=="win32"?r=>r:r=>r&&r.replace(/\\/g,"/")});var Ts=E((YA,mp)=>{"use strict";var Rw=ln(),wc=dn(),Rc=Symbol("slurp");mp.exports=class extends Rw{constructor(e,t,n){switch(super(),this.pause(),this.extended=t,this.globalExtended=n,this.header=e,this.startBlockSize=512*Math.ceil(e.size/512),this.blockRemain=this.startBlockSize,this.remain=e.size,this.type=e.type,this.meta=!1,this.ignore=!1,this.type){case"File":case"OldFile":case"Link":case"SymbolicLink":case"CharacterDevice":case"BlockDevice":case"Directory":case"FIFO":case"ContiguousFile":case"GNUDumpDir":break;case"NextFileHasLongLinkpath":case"NextFileHasLongPath":case"OldGnuLongPath":case"GlobalExtendedHeader":case"ExtendedHeader":case"OldExtendedHeader":this.meta=!0;break;default:this.ignore=!0}this.path=wc(e.path),this.mode=e.mode,this.mode&&(this.mode=this.mode&4095),this.uid=e.uid,this.gid=e.gid,this.uname=e.uname,this.gname=e.gname,this.size=e.size,this.mtime=e.mtime,this.atime=e.atime,this.ctime=e.ctime,this.linkpath=wc(e.linkpath),this.uname=e.uname,this.gname=e.gname,t&&this[Rc](t),n&&this[Rc](n,!0)}write(e){let t=e.length;if(t>this.blockRemain)throw new Error("writing more to entry than is appropriate");let n=this.remain,i=this.blockRemain;return this.remain=Math.max(0,n-t),this.blockRemain=Math.max(0,i-t),this.ignore?!0:n>=t?super.write(e):super.write(e.slice(0,n))}[Rc](e,t){for(let n in e)e[n]!==null&&e[n]!==void 0&&!(t&&n==="path")&&(this[n]=n==="path"||n==="linkpath"?wc(e[n]):e[n])}}});var xc=E(Cs=>{"use strict";Cs.name=new Map([["0","File"],["","OldFile"],["1","Link"],["2","SymbolicLink"],["3","CharacterDevice"],["4","BlockDevice"],["5","Directory"],["6","FIFO"],["7","ContiguousFile"],["g","GlobalExtendedHeader"],["x","ExtendedHeader"],["A","SolarisACL"],["D","GNUDumpDir"],["I","Inode"],["K","NextFileHasLongLinkpath"],["L","NextFileHasLongPath"],["M","ContinuationFile"],["N","OldGnuLongPath"],["S","SparseFile"],["V","TapeVolumeHeader"],["X","OldExtendedHeader"]]);Cs.code=new Map(Array.from(Cs.name).map(r=>[r[1],r[0]]))});var _p=E((ZA,gp)=>{"use strict";var xw=(r,e)=>{if(Number.isSafeInteger(r))r<0?Tw(r,e):Ow(r,e);else throw Error("cannot encode number outside of javascript safe integer range");return e},Ow=(r,e)=>{e[0]=128;for(var t=e.length;t>1;t--)e[t-1]=r&255,r=Math.floor(r/256)},Tw=(r,e)=>{e[0]=255;var t=!1;r=r*-1;for(var n=e.length;n>1;n--){var i=r&255;r=Math.floor(r/256),t?e[n-1]=yp(i):i===0?e[n-1]=0:(t=!0,e[n-1]=Ep(i))}},Cw=r=>{let e=r[0],t=e===128?Nw(r.slice(1,r.length)):e===255?Iw(r):null;if(t===null)throw Error("invalid base256 encoding");if(!Number.isSafeInteger(t))throw Error("parsed number outside of javascript safe integer range");return t},Iw=r=>{for(var e=r.length,t=0,n=!1,i=e-1;i>-1;i--){var s=r[i],o;n?o=yp(s):s===0?o=s:(n=!0,o=Ep(s)),o!==0&&(t-=o*Math.pow(256,e-i-1))}return t},Nw=r=>{for(var e=r.length,t=0,n=e-1;n>-1;n--){var i=r[n];i!==0&&(t+=i*Math.pow(256,e-n-1))}return t},yp=r=>(255^r)&255,Ep=r=>(255^r)+1&255;gp.exports={encode:xw,parse:Cw}});var mn=E((QA,vp)=>{"use strict";var Oc=xc(),pn=require("path").posix,bp=_p(),Tc=Symbol("slurp"),Je=Symbol("type"),Nc=class{constructor(e,t,n,i){this.cksumValid=!1,this.needPax=!1,this.nullBlock=!1,this.block=null,this.path=null,this.mode=null,this.uid=null,this.gid=null,this.size=null,this.mtime=null,this.cksum=null,this[Je]="0",this.linkpath=null,this.uname=null,this.gname=null,this.devmaj=0,this.devmin=0,this.atime=null,this.ctime=null,Buffer.isBuffer(e)?this.decode(e,t||0,n,i):e&&this.set(e)}decode(e,t,n,i){if(t||(t=0),!e||!(e.length>=t+512))throw new Error("need 512 bytes for header");if(this.path=Dr(e,t,100),this.mode=er(e,t+100,8),this.uid=er(e,t+108,8),this.gid=er(e,t+116,8),this.size=er(e,t+124,12),this.mtime=Cc(e,t+136,12),this.cksum=er(e,t+148,12),this[Tc](n),this[Tc](i,!0),this[Je]=Dr(e,t+156,1),this[Je]===""&&(this[Je]="0"),this[Je]==="0"&&this.path.substr(-1)==="/"&&(this[Je]="5"),this[Je]==="5"&&(this.size=0),this.linkpath=Dr(e,t+157,100),e.slice(t+257,t+265).toString()==="ustar\x0000")if(this.uname=Dr(e,t+265,32),this.gname=Dr(e,t+297,32),this.devmaj=er(e,t+329,8),this.devmin=er(e,t+337,8),e[t+475]!==0){let o=Dr(e,t+345,155);this.path=o+"/"+this.path}else{let o=Dr(e,t+345,130);o&&(this.path=o+"/"+this.path),this.atime=Cc(e,t+476,12),this.ctime=Cc(e,t+488,12)}let s=8*32;for(let o=t;o<t+148;o++)s+=e[o];for(let o=t+156;o<t+512;o++)s+=e[o];this.cksumValid=s===this.cksum,this.cksum===null&&s===8*32&&(this.nullBlock=!0)}[Tc](e,t){for(let n in e)e[n]!==null&&e[n]!==void 0&&!(t&&n==="path")&&(this[n]=e[n])}encode(e,t){if(e||(e=this.block=Buffer.alloc(512),t=0),t||(t=0),!(e.length>=t+512))throw new Error("need 512 bytes for header");let n=this.ctime||this.atime?130:155,i=Aw(this.path||"",n),s=i[0],o=i[1];this.needPax=i[2],this.needPax=kr(e,t,100,s)||this.needPax,this.needPax=tr(e,t+100,8,this.mode)||this.needPax,this.needPax=tr(e,t+108,8,this.uid)||this.needPax,this.needPax=tr(e,t+116,8,this.gid)||this.needPax,this.needPax=tr(e,t+124,12,this.size)||this.needPax,this.needPax=Ic(e,t+136,12,this.mtime)||this.needPax,e[t+156]=this[Je].charCodeAt(0),this.needPax=kr(e,t+157,100,this.linkpath)||this.needPax,e.write("ustar\x0000",t+257,8),this.needPax=kr(e,t+265,32,this.uname)||this.needPax,this.needPax=kr(e,t+297,32,this.gname)||this.needPax,this.needPax=tr(e,t+329,8,this.devmaj)||this.needPax,this.needPax=tr(e,t+337,8,this.devmin)||this.needPax,this.needPax=kr(e,t+345,n,o)||this.needPax,e[t+475]!==0?this.needPax=kr(e,t+345,155,o)||this.needPax:(this.needPax=kr(e,t+345,130,o)||this.needPax,this.needPax=Ic(e,t+476,12,this.atime)||this.needPax,this.needPax=Ic(e,t+488,12,this.ctime)||this.needPax);let a=8*32;for(let c=t;c<t+148;c++)a+=e[c];for(let c=t+156;c<t+512;c++)a+=e[c];return this.cksum=a,tr(e,t+148,8,this.cksum),this.cksumValid=!0,this.needPax}set(e){for(let t in e)e[t]!==null&&e[t]!==void 0&&(this[t]=e[t])}get type(){return Oc.name.get(this[Je])||this[Je]}get typeKey(){return this[Je]}set type(e){Oc.code.has(e)?this[Je]=Oc.code.get(e):this[Je]=e}},Aw=(r,e)=>{let n=r,i="",s,o=pn.parse(r).root||".";if(Buffer.byteLength(n)<100)s=[n,i,!1];else{i=pn.dirname(n),n=pn.basename(n);do Buffer.byteLength(n)<=100&&Buffer.byteLength(i)<=e?s=[n,i,!1]:Buffer.byteLength(n)>100&&Buffer.byteLength(i)<=e?s=[n.substr(0,99),i,!0]:(n=pn.join(pn.basename(i),n),i=pn.dirname(i));while(i!==o&&!s);s||(s=[r.substr(0,99),"",!0])}return s},Dr=(r,e,t)=>r.slice(e,e+t).toString("utf8").replace(/\0.*/,""),Cc=(r,e,t)=>Dw(er(r,e,t)),Dw=r=>r===null?null:new Date(r*1e3),er=(r,e,t)=>r[e]&128?bp.parse(r.slice(e,e+t)):Lw(r,e,t),kw=r=>isNaN(r)?null:r,Lw=(r,e,t)=>kw(parseInt(r.slice(e,e+t).toString("utf8").replace(/\0.*$/,"").trim(),8)),Pw={12:8589934591,8:2097151},tr=(r,e,t,n)=>n===null?!1:n>Pw[t]||n<0?(bp.encode(n,r.slice(e,e+t)),!0):(Uw(r,e,t,n),!1),Uw=(r,e,t,n)=>r.write(Fw(n,t),e,t,"ascii"),Fw=(r,e)=>Mw(Math.floor(r).toString(8),e),Mw=(r,e)=>(r.length===e-1?r:new Array(e-r.length-1).join("0")+r+" ")+"\0",Ic=(r,e,t,n)=>n===null?!1:tr(r,e,t,n.getTime()/1e3),qw=new Array(156).join("\0"),kr=(r,e,t,n)=>n===null?!1:(r.write(n+qw,e,t,"utf8"),n.length!==Buffer.byteLength(n)||n.length>t);vp.exports=Nc});var Is=E((eD,Sp)=>{"use strict";var Bw=mn(),jw=require("path"),ui=class{constructor(e,t){this.atime=e.atime||null,this.charset=e.charset||null,this.comment=e.comment||null,this.ctime=e.ctime||null,this.gid=e.gid||null,this.gname=e.gname||null,this.linkpath=e.linkpath||null,this.mtime=e.mtime||null,this.path=e.path||null,this.size=e.size||null,this.uid=e.uid||null,this.uname=e.uname||null,this.dev=e.dev||null,this.ino=e.ino||null,this.nlink=e.nlink||null,this.global=t||!1}encode(){let e=this.encodeBody();if(e==="")return null;let t=Buffer.byteLength(e),n=512*Math.ceil(1+t/512),i=Buffer.allocUnsafe(n);for(let s=0;s<512;s++)i[s]=0;new Bw({path:("PaxHeader/"+jw.basename(this.path)).slice(0,99),mode:this.mode||420,uid:this.uid||null,gid:this.gid||null,size:t,mtime:this.mtime||null,type:this.global?"GlobalExtendedHeader":"ExtendedHeader",linkpath:"",uname:this.uname||"",gname:this.gname||"",devmaj:0,devmin:0,atime:this.atime||null,ctime:this.ctime||null}).encode(i),i.write(e,512,t,"utf8");for(let s=t+512;s<i.length;s++)i[s]=0;return i}encodeBody(){return this.encodeField("path")+this.encodeField("ctime")+this.encodeField("atime")+this.encodeField("dev")+this.encodeField("ino")+this.encodeField("nlink")+this.encodeField("charset")+this.encodeField("comment")+this.encodeField("gid")+this.encodeField("gname")+this.encodeField("linkpath")+this.encodeField("mtime")+this.encodeField("size")+this.encodeField("uid")+this.encodeField("uname")}encodeField(e){if(this[e]===null||this[e]===void 0)return"";let t=this[e]instanceof Date?this[e].getTime()/1e3:this[e],n=" "+(e==="dev"||e==="ino"||e==="nlink"?"SCHILY.":"")+e+"="+t+`
`,i=Buffer.byteLength(n),s=Math.floor(Math.log(i)/Math.log(10))+1;return i+s>=Math.pow(10,s)&&(s+=1),s+i+n}};ui.parse=(r,e,t)=>new ui(Gw($w(r),e),t);var Gw=(r,e)=>e?Object.keys(r).reduce((t,n)=>(t[n]=r[n],t),e):r,$w=r=>r.replace(/\n$/,"").split(`
`).reduce(Hw,Object.create(null)),Hw=(r,e)=>{let t=parseInt(e,10);if(t!==Buffer.byteLength(e)+1)return r;e=e.substr((t+" ").length);let n=e.split("="),i=n.shift().replace(/^SCHILY\.(dev|ino|nlink)/,"$1");if(!i)return r;let s=n.join("=");return r[i]=/^([A-Z]+\.)?([mac]|birth|creation)time$/.test(i)?new Date(s*1e3):/^[0-9]+$/.test(s)?+s:s,r};Sp.exports=ui});var yn=E((tD,wp)=>{"use strict";wp.exports=r=>{let e=r.length-1,t=-1;for(;e>-1&&r.charAt(e)==="/";)t=e,e--;return t===-1?r:r.slice(0,t)}});var Ns=E((rD,Rp)=>{"use strict";Rp.exports=r=>class extends r{warn(e,t,n={}){this.file&&(n.file=this.file),this.cwd&&(n.cwd=this.cwd),n.code=t instanceof Error&&t.code||e,n.tarCode=e,!this.strict&&n.recoverable!==!1?(t instanceof Error&&(n=Object.assign(t,n),t=t.message),this.emit("warn",n.tarCode,t,n)):t instanceof Error?this.emit("error",Object.assign(t,n)):this.emit("error",Object.assign(new Error(`${e}: ${t}`),n))}}});var Dc=E((iD,xp)=>{"use strict";var As=["|","<",">","?",":"],Ac=As.map(r=>String.fromCharCode(61440+r.charCodeAt(0))),zw=new Map(As.map((r,e)=>[r,Ac[e]])),Vw=new Map(Ac.map((r,e)=>[r,As[e]]));xp.exports={encode:r=>As.reduce((e,t)=>e.split(t).join(zw.get(t)),r),decode:r=>Ac.reduce((e,t)=>e.split(t).join(Vw.get(t)),r)}});var kc=E((sD,Tp)=>{"use strict";var{isAbsolute:Ww,parse:Op}=require("path").win32;Tp.exports=r=>{let e="",t=Op(r);for(;Ww(r)||t.root;){let n=r.charAt(0)==="/"&&r.slice(0,4)!=="//?/"?"/":t.root;r=r.substr(n.length),e+=n,t=Op(r)}return[e,r]}});var Ip=E((oD,Cp)=>{"use strict";Cp.exports=(r,e,t)=>(r&=4095,t&&(r=(r|384)&-19),e&&(r&256&&(r|=64),r&32&&(r|=8),r&4&&(r|=1)),r)});var $c=E((uD,$p)=>{"use strict";var Up=ln(),Fp=Is(),Mp=mn(),St=require("fs"),Np=require("path"),vt=dn(),Xw=yn(),qp=(r,e)=>e?(r=vt(r).replace(/^\.(\/|$)/,""),Xw(e)+"/"+r):vt(r),Kw=16*1024*1024,Ap=Symbol("process"),Dp=Symbol("file"),kp=Symbol("directory"),Pc=Symbol("symlink"),Lp=Symbol("hardlink"),li=Symbol("header"),Ds=Symbol("read"),Uc=Symbol("lstat"),ks=Symbol("onlstat"),Fc=Symbol("onread"),Mc=Symbol("onreadlink"),qc=Symbol("openfile"),Bc=Symbol("onopenfile"),rr=Symbol("close"),Ls=Symbol("mode"),jc=Symbol("awaitDrain"),Lc=Symbol("ondrain"),wt=Symbol("prefix"),Pp=Symbol("hadError"),Bp=Ns(),Yw=Dc(),jp=kc(),Gp=Ip(),Ps=Bp(class extends Up{constructor(e,t){if(t=t||{},super(t),typeof e!="string")throw new TypeError("path is required");this.path=vt(e),this.portable=!!t.portable,this.myuid=process.getuid&&process.getuid()||0,this.myuser=process.env.USER||"",this.maxReadSize=t.maxReadSize||Kw,this.linkCache=t.linkCache||new Map,this.statCache=t.statCache||new Map,this.preservePaths=!!t.preservePaths,this.cwd=vt(t.cwd||process.cwd()),this.strict=!!t.strict,this.noPax=!!t.noPax,this.noMtime=!!t.noMtime,this.mtime=t.mtime||null,this.prefix=t.prefix?vt(t.prefix):null,this.fd=null,this.blockLen=null,this.blockRemain=null,this.buf=null,this.offset=null,this.length=null,this.pos=null,this.remain=null,typeof t.onwarn=="function"&&this.on("warn",t.onwarn);let n=!1;if(!this.preservePaths){let[i,s]=jp(this.path);i&&(this.path=s,n=i)}this.win32=!!t.win32||process.platform==="win32",this.win32&&(this.path=Yw.decode(this.path.replace(/\\/g,"/")),e=e.replace(/\\/g,"/")),this.absolute=vt(t.absolute||Np.resolve(this.cwd,e)),this.path===""&&(this.path="./"),n&&this.warn("TAR_ENTRY_INFO",`stripping ${n} from absolute path`,{entry:this,path:n+this.path}),this.statCache.has(this.absolute)?this[ks](this.statCache.get(this.absolute)):this[Uc]()}emit(e,...t){return e==="error"&&(this[Pp]=!0),super.emit(e,...t)}[Uc](){St.lstat(this.absolute,(e,t)=>{if(e)return this.emit("error",e);this[ks](t)})}[ks](e){this.statCache.set(this.absolute,e),this.stat=e,e.isFile()||(e.size=0),this.type=Zw(e),this.emit("stat",e),this[Ap]()}[Ap](){switch(this.type){case"File":return this[Dp]();case"Directory":return this[kp]();case"SymbolicLink":return this[Pc]();default:return this.end()}}[Ls](e){return Gp(e,this.type==="Directory",this.portable)}[wt](e){return qp(e,this.prefix)}[li](){this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.header=new Mp({path:this[wt](this.path),linkpath:this.type==="Link"?this[wt](this.linkpath):this.linkpath,mode:this[Ls](this.stat.mode),uid:this.portable?null:this.stat.uid,gid:this.portable?null:this.stat.gid,size:this.stat.size,mtime:this.noMtime?null:this.mtime||this.stat.mtime,type:this.type,uname:this.portable?null:this.stat.uid===this.myuid?this.myuser:"",atime:this.portable?null:this.stat.atime,ctime:this.portable?null:this.stat.ctime}),this.header.encode()&&!this.noPax&&super.write(new Fp({atime:this.portable?null:this.header.atime,ctime:this.portable?null:this.header.ctime,gid:this.portable?null:this.header.gid,mtime:this.noMtime?null:this.mtime||this.header.mtime,path:this[wt](this.path),linkpath:this.type==="Link"?this[wt](this.linkpath):this.linkpath,size:this.header.size,uid:this.portable?null:this.header.uid,uname:this.portable?null:this.header.uname,dev:this.portable?null:this.stat.dev,ino:this.portable?null:this.stat.ino,nlink:this.portable?null:this.stat.nlink}).encode()),super.write(this.header.block)}[kp](){this.path.substr(-1)!=="/"&&(this.path+="/"),this.stat.size=0,this[li](),this.end()}[Pc](){St.readlink(this.absolute,(e,t)=>{if(e)return this.emit("error",e);this[Mc](t)})}[Mc](e){this.linkpath=vt(e),this[li](),this.end()}[Lp](e){this.type="Link",this.linkpath=vt(Np.relative(this.cwd,e)),this.stat.size=0,this[li](),this.end()}[Dp](){if(this.stat.nlink>1){let e=this.stat.dev+":"+this.stat.ino;if(this.linkCache.has(e)){let t=this.linkCache.get(e);if(t.indexOf(this.cwd)===0)return this[Lp](t)}this.linkCache.set(e,this.absolute)}if(this[li](),this.stat.size===0)return this.end();this[qc]()}[qc](){St.open(this.absolute,"r",(e,t)=>{if(e)return this.emit("error",e);this[Bc](t)})}[Bc](e){if(this.fd=e,this[Pp])return this[rr]();this.blockLen=512*Math.ceil(this.stat.size/512),this.blockRemain=this.blockLen;let t=Math.min(this.blockLen,this.maxReadSize);this.buf=Buffer.allocUnsafe(t),this.offset=0,this.pos=0,this.remain=this.stat.size,this.length=this.buf.length,this[Ds]()}[Ds](){let{fd:e,buf:t,offset:n,length:i,pos:s}=this;St.read(e,t,n,i,s,(o,a)=>{if(o)return this[rr](()=>this.emit("error",o));this[Fc](a)})}[rr](e){St.close(this.fd,e)}[Fc](e){if(e<=0&&this.remain>0){let i=new Error("encountered unexpected EOF");return i.path=this.absolute,i.syscall="read",i.code="EOF",this[rr](()=>this.emit("error",i))}if(e>this.remain){let i=new Error("did not encounter expected EOF");return i.path=this.absolute,i.syscall="read",i.code="EOF",this[rr](()=>this.emit("error",i))}if(e===this.remain)for(let i=e;i<this.length&&e<this.blockRemain;i++)this.buf[i+this.offset]=0,e++,this.remain++;let t=this.offset===0&&e===this.buf.length?this.buf:this.buf.slice(this.offset,this.offset+e);this.write(t)?this[Lc]():this[jc](()=>this[Lc]())}[jc](e){this.once("drain",e)}write(e){if(this.blockRemain<e.length){let t=new Error("writing more data than expected");return t.path=this.absolute,this.emit("error",t)}return this.remain-=e.length,this.blockRemain-=e.length,this.pos+=e.length,this.offset+=e.length,super.write(e)}[Lc](){if(!this.remain)return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),this[rr](e=>e?this.emit("error",e):this.end());this.offset>=this.length&&(this.buf=Buffer.allocUnsafe(Math.min(this.blockRemain,this.buf.length)),this.offset=0),this.length=this.buf.length-this.offset,this[Ds]()}}),Gc=class extends Ps{[Uc](){this[ks](St.lstatSync(this.absolute))}[Pc](){this[Mc](St.readlinkSync(this.absolute))}[qc](){this[Bc](St.openSync(this.absolute,"r"))}[Ds](){let e=!0;try{let{fd:t,buf:n,offset:i,length:s,pos:o}=this,a=St.readSync(t,n,i,s,o);this[Fc](a),e=!1}finally{if(e)try{this[rr](()=>{})}catch{}}}[jc](e){e()}[rr](e){St.closeSync(this.fd),e()}},Jw=Bp(class extends Up{constructor(e,t){t=t||{},super(t),this.preservePaths=!!t.preservePaths,this.portable=!!t.portable,this.strict=!!t.strict,this.noPax=!!t.noPax,this.noMtime=!!t.noMtime,this.readEntry=e,this.type=e.type,this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.prefix=t.prefix||null,this.path=vt(e.path),this.mode=this[Ls](e.mode),this.uid=this.portable?null:e.uid,this.gid=this.portable?null:e.gid,this.uname=this.portable?null:e.uname,this.gname=this.portable?null:e.gname,this.size=e.size,this.mtime=this.noMtime?null:t.mtime||e.mtime,this.atime=this.portable?null:e.atime,this.ctime=this.portable?null:e.ctime,this.linkpath=vt(e.linkpath),typeof t.onwarn=="function"&&this.on("warn",t.onwarn);let n=!1;if(!this.preservePaths){let[i,s]=jp(this.path);i&&(this.path=s,n=i)}this.remain=e.size,this.blockRemain=e.startBlockSize,this.header=new Mp({path:this[wt](this.path),linkpath:this.type==="Link"?this[wt](this.linkpath):this.linkpath,mode:this.mode,uid:this.portable?null:this.uid,gid:this.portable?null:this.gid,size:this.size,mtime:this.noMtime?null:this.mtime,type:this.type,uname:this.portable?null:this.uname,atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime}),n&&this.warn("TAR_ENTRY_INFO",`stripping ${n} from absolute path`,{entry:this,path:n+this.path}),this.header.encode()&&!this.noPax&&super.write(new Fp({atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime,gid:this.portable?null:this.gid,mtime:this.noMtime?null:this.mtime,path:this[wt](this.path),linkpath:this.type==="Link"?this[wt](this.linkpath):this.linkpath,size:this.size,uid:this.portable?null:this.uid,uname:this.portable?null:this.uname,dev:this.portable?null:this.readEntry.dev,ino:this.portable?null:this.readEntry.ino,nlink:this.portable?null:this.readEntry.nlink}).encode()),super.write(this.header.block),e.pipe(this)}[wt](e){return qp(e,this.prefix)}[Ls](e){return Gp(e,this.type==="Directory",this.portable)}write(e){let t=e.length;if(t>this.blockRemain)throw new Error("writing more to entry than is appropriate");return this.blockRemain-=t,super.write(e)}end(){return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),super.end()}});Ps.Sync=Gc;Ps.Tar=Jw;var Zw=r=>r.isFile()?"File":r.isDirectory()?"Directory":r.isSymbolicLink()?"SymbolicLink":"Unsupported";$p.exports=Ps});var zp=E((lD,Hp)=>{"use strict";Hp.exports=function(r){r.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}});var Hc=E((fD,Vp)=>{"use strict";Vp.exports=Z;Z.Node=Lr;Z.create=Z;function Z(r){var e=this;if(e instanceof Z||(e=new Z),e.tail=null,e.head=null,e.length=0,r&&typeof r.forEach=="function")r.forEach(function(i){e.push(i)});else if(arguments.length>0)for(var t=0,n=arguments.length;t<n;t++)e.push(arguments[t]);return e}Z.prototype.removeNode=function(r){if(r.list!==this)throw new Error("removing node which does not belong to this list");var e=r.next,t=r.prev;return e&&(e.prev=t),t&&(t.next=e),r===this.head&&(this.head=e),r===this.tail&&(this.tail=t),r.list.length--,r.next=null,r.prev=null,r.list=null,e};Z.prototype.unshiftNode=function(r){if(r!==this.head){r.list&&r.list.removeNode(r);var e=this.head;r.list=this,r.next=e,e&&(e.prev=r),this.head=r,this.tail||(this.tail=r),this.length++}};Z.prototype.pushNode=function(r){if(r!==this.tail){r.list&&r.list.removeNode(r);var e=this.tail;r.list=this,r.prev=e,e&&(e.next=r),this.tail=r,this.head||(this.head=r),this.length++}};Z.prototype.push=function(){for(var r=0,e=arguments.length;r<e;r++)eR(this,arguments[r]);return this.length};Z.prototype.unshift=function(){for(var r=0,e=arguments.length;r<e;r++)tR(this,arguments[r]);return this.length};Z.prototype.pop=function(){if(this.tail){var r=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,r}};Z.prototype.shift=function(){if(this.head){var r=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,r}};Z.prototype.forEach=function(r,e){e=e||this;for(var t=this.head,n=0;t!==null;n++)r.call(e,t.value,n,this),t=t.next};Z.prototype.forEachReverse=function(r,e){e=e||this;for(var t=this.tail,n=this.length-1;t!==null;n--)r.call(e,t.value,n,this),t=t.prev};Z.prototype.get=function(r){for(var e=0,t=this.head;t!==null&&e<r;e++)t=t.next;if(e===r&&t!==null)return t.value};Z.prototype.getReverse=function(r){for(var e=0,t=this.tail;t!==null&&e<r;e++)t=t.prev;if(e===r&&t!==null)return t.value};Z.prototype.map=function(r,e){e=e||this;for(var t=new Z,n=this.head;n!==null;)t.push(r.call(e,n.value,this)),n=n.next;return t};Z.prototype.mapReverse=function(r,e){e=e||this;for(var t=new Z,n=this.tail;n!==null;)t.push(r.call(e,n.value,this)),n=n.prev;return t};Z.prototype.reduce=function(r,e){var t,n=this.head;if(arguments.length>1)t=e;else if(this.head)n=this.head.next,t=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;n!==null;i++)t=r(t,n.value,i),n=n.next;return t};Z.prototype.reduceReverse=function(r,e){var t,n=this.tail;if(arguments.length>1)t=e;else if(this.tail)n=this.tail.prev,t=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;n!==null;i--)t=r(t,n.value,i),n=n.prev;return t};Z.prototype.toArray=function(){for(var r=new Array(this.length),e=0,t=this.head;t!==null;e++)r[e]=t.value,t=t.next;return r};Z.prototype.toArrayReverse=function(){for(var r=new Array(this.length),e=0,t=this.tail;t!==null;e++)r[e]=t.value,t=t.prev;return r};Z.prototype.slice=function(r,e){e=e||this.length,e<0&&(e+=this.length),r=r||0,r<0&&(r+=this.length);var t=new Z;if(e<r||e<0)return t;r<0&&(r=0),e>this.length&&(e=this.length);for(var n=0,i=this.head;i!==null&&n<r;n++)i=i.next;for(;i!==null&&n<e;n++,i=i.next)t.push(i.value);return t};Z.prototype.sliceReverse=function(r,e){e=e||this.length,e<0&&(e+=this.length),r=r||0,r<0&&(r+=this.length);var t=new Z;if(e<r||e<0)return t;r<0&&(r=0),e>this.length&&(e=this.length);for(var n=this.length,i=this.tail;i!==null&&n>e;n--)i=i.prev;for(;i!==null&&n>r;n--,i=i.prev)t.push(i.value);return t};Z.prototype.splice=function(r,e,...t){r>this.length&&(r=this.length-1),r<0&&(r=this.length+r);for(var n=0,i=this.head;i!==null&&n<r;n++)i=i.next;for(var s=[],n=0;i&&n<e;n++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var n=0;n<t.length;n++)i=Qw(this,i,t[n]);return s};Z.prototype.reverse=function(){for(var r=this.head,e=this.tail,t=r;t!==null;t=t.prev){var n=t.prev;t.prev=t.next,t.next=n}return this.head=e,this.tail=r,this};function Qw(r,e,t){var n=e===r.head?new Lr(t,null,e,r):new Lr(t,e,e.next,r);return n.next===null&&(r.tail=n),n.prev===null&&(r.head=n),r.length++,n}function eR(r,e){r.tail=new Lr(e,r.tail,null,r),r.head||(r.head=r.tail),r.length++}function tR(r,e){r.head=new Lr(e,null,r.head,r),r.tail||(r.tail=r.head),r.length++}function Lr(r,e,t,n){if(!(this instanceof Lr))return new Lr(r,e,t,n);this.list=n,this.value=r,e?(e.next=this,this.prev=e):this.prev=null,t?(t.prev=this,this.next=t):this.next=null}try{zp()(Z)}catch{}});var Hs=E((dD,Qp)=>{"use strict";var Gs=class{constructor(e,t){this.path=e||"./",this.absolute=t,this.entry=null,this.stat=null,this.readdir=null,this.pending=!1,this.ignore=!1,this.piped=!1}},rR=ln(),nR=Sc(),iR=Ts(),Qc=$c(),sR=Qc.Sync,oR=Qc.Tar,aR=Hc(),Wp=Buffer.alloc(1024),Ms=Symbol("onStat"),Us=Symbol("ended"),Rt=Symbol("queue"),En=Symbol("current"),Pr=Symbol("process"),Fs=Symbol("processing"),Xp=Symbol("processJob"),xt=Symbol("jobs"),zc=Symbol("jobDone"),qs=Symbol("addFSEntry"),Kp=Symbol("addTarEntry"),Kc=Symbol("stat"),Yc=Symbol("readdir"),Bs=Symbol("onreaddir"),js=Symbol("pipe"),Yp=Symbol("entry"),Vc=Symbol("entryOpt"),Jc=Symbol("writeEntryClass"),Zp=Symbol("write"),Wc=Symbol("ondrain"),$s=require("fs"),Jp=require("path"),cR=Ns(),Xc=dn(),eu=cR(class extends rR{constructor(e){super(e),e=e||Object.create(null),this.opt=e,this.file=e.file||"",this.cwd=e.cwd||process.cwd(),this.maxReadSize=e.maxReadSize,this.preservePaths=!!e.preservePaths,this.strict=!!e.strict,this.noPax=!!e.noPax,this.prefix=Xc(e.prefix||""),this.linkCache=e.linkCache||new Map,this.statCache=e.statCache||new Map,this.readdirCache=e.readdirCache||new Map,this[Jc]=Qc,typeof e.onwarn=="function"&&this.on("warn",e.onwarn),this.portable=!!e.portable,this.zip=null,e.gzip?(typeof e.gzip!="object"&&(e.gzip={}),this.portable&&(e.gzip.portable=!0),this.zip=new nR.Gzip(e.gzip),this.zip.on("data",t=>super.write(t)),this.zip.on("end",t=>super.end()),this.zip.on("drain",t=>this[Wc]()),this.on("resume",t=>this.zip.resume())):this.on("drain",this[Wc]),this.noDirRecurse=!!e.noDirRecurse,this.follow=!!e.follow,this.noMtime=!!e.noMtime,this.mtime=e.mtime||null,this.filter=typeof e.filter=="function"?e.filter:t=>!0,this[Rt]=new aR,this[xt]=0,this.jobs=+e.jobs||4,this[Fs]=!1,this[Us]=!1}[Zp](e){return super.write(e)}add(e){return this.write(e),this}end(e){return e&&this.write(e),this[Us]=!0,this[Pr](),this}write(e){if(this[Us])throw new Error("write after end");return e instanceof iR?this[Kp](e):this[qs](e),this.flowing}[Kp](e){let t=Xc(Jp.resolve(this.cwd,e.path));if(!this.filter(e.path,e))e.resume();else{let n=new Gs(e.path,t,!1);n.entry=new oR(e,this[Vc](n)),n.entry.on("end",i=>this[zc](n)),this[xt]+=1,this[Rt].push(n)}this[Pr]()}[qs](e){let t=Xc(Jp.resolve(this.cwd,e));this[Rt].push(new Gs(e,t)),this[Pr]()}[Kc](e){e.pending=!0,this[xt]+=1;let t=this.follow?"stat":"lstat";$s[t](e.absolute,(n,i)=>{e.pending=!1,this[xt]-=1,n?this.emit("error",n):this[Ms](e,i)})}[Ms](e,t){this.statCache.set(e.absolute,t),e.stat=t,this.filter(e.path,t)||(e.ignore=!0),this[Pr]()}[Yc](e){e.pending=!0,this[xt]+=1,$s.readdir(e.absolute,(t,n)=>{if(e.pending=!1,this[xt]-=1,t)return this.emit("error",t);this[Bs](e,n)})}[Bs](e,t){this.readdirCache.set(e.absolute,t),e.readdir=t,this[Pr]()}[Pr](){if(!this[Fs]){this[Fs]=!0;for(let e=this[Rt].head;e!==null&&this[xt]<this.jobs;e=e.next)if(this[Xp](e.value),e.value.ignore){let t=e.next;this[Rt].removeNode(e),e.next=t}this[Fs]=!1,this[Us]&&!this[Rt].length&&this[xt]===0&&(this.zip?this.zip.end(Wp):(super.write(Wp),super.end()))}}get[En](){return this[Rt]&&this[Rt].head&&this[Rt].head.value}[zc](e){this[Rt].shift(),this[xt]-=1,this[Pr]()}[Xp](e){if(!e.pending){if(e.entry){e===this[En]&&!e.piped&&this[js](e);return}if(e.stat||(this.statCache.has(e.absolute)?this[Ms](e,this.statCache.get(e.absolute)):this[Kc](e)),!!e.stat&&!e.ignore&&!(!this.noDirRecurse&&e.stat.isDirectory()&&!e.readdir&&(this.readdirCache.has(e.absolute)?this[Bs](e,this.readdirCache.get(e.absolute)):this[Yc](e),!e.readdir))){if(e.entry=this[Yp](e),!e.entry){e.ignore=!0;return}e===this[En]&&!e.piped&&this[js](e)}}}[Vc](e){return{onwarn:(t,n,i)=>this.warn(t,n,i),noPax:this.noPax,cwd:this.cwd,absolute:e.absolute,preservePaths:this.preservePaths,maxReadSize:this.maxReadSize,strict:this.strict,portable:this.portable,linkCache:this.linkCache,statCache:this.statCache,noMtime:this.noMtime,mtime:this.mtime,prefix:this.prefix}}[Yp](e){this[xt]+=1;try{return new this[Jc](e.path,this[Vc](e)).on("end",()=>this[zc](e)).on("error",t=>this.emit("error",t))}catch(t){this.emit("error",t)}}[Wc](){this[En]&&this[En].entry&&this[En].entry.resume()}[js](e){e.piped=!0,e.readdir&&e.readdir.forEach(i=>{let s=e.path,o=s==="./"?"":s.replace(/\/*$/,"/");this[qs](o+i)});let t=e.entry,n=this.zip;n?t.on("data",i=>{n.write(i)||t.pause()}):t.on("data",i=>{super.write(i)||t.pause()})}pause(){return this.zip&&this.zip.pause(),super.pause()}}),Zc=class extends eu{constructor(e){super(e),this[Jc]=sR}pause(){}resume(){}[Kc](e){let t=this.follow?"statSync":"lstatSync";this[Ms](e,$s[t](e.absolute))}[Yc](e,t){this[Bs](e,$s.readdirSync(e.absolute))}[js](e){let t=e.entry,n=this.zip;e.readdir&&e.readdir.forEach(i=>{let s=e.path,o=s==="./"?"":s.replace(/\/*$/,"/");this[qs](o+i)}),n?t.on("data",i=>{n.write(i)}):t.on("data",i=>{super[Zp](i)})}};eu.Sync=Zc;Qp.exports=eu});var xn=E(hi=>{"use strict";var uR=ln(),lR=require("events").EventEmitter,ze=require("fs"),nu=ze.writev;if(!nu){let r=process.binding("fs"),e=r.FSReqWrap||r.FSReqCallback;nu=(t,n,i,s)=>{let o=(c,l)=>s(c,l,n),a=new e;a.oncomplete=o,r.writeBuffers(t,n,i,a)}}var wn=Symbol("_autoClose"),ft=Symbol("_close"),fi=Symbol("_ended"),te=Symbol("_fd"),em=Symbol("_finished"),ir=Symbol("_flags"),tu=Symbol("_flush"),iu=Symbol("_handleChunk"),su=Symbol("_makeBuf"),Ks=Symbol("_mode"),zs=Symbol("_needDrain"),vn=Symbol("_onerror"),Rn=Symbol("_onopen"),ru=Symbol("_onread"),_n=Symbol("_onwrite"),sr=Symbol("_open"),qt=Symbol("_path"),Ur=Symbol("_pos"),Ot=Symbol("_queue"),bn=Symbol("_read"),tm=Symbol("_readSize"),nr=Symbol("_reading"),Vs=Symbol("_remain"),rm=Symbol("_size"),Ws=Symbol("_write"),gn=Symbol("_writing"),Xs=Symbol("_defaultFlag"),Sn=Symbol("_errored"),Ys=class extends uR{constructor(e,t){if(t=t||{},super(t),this.readable=!0,this.writable=!1,typeof e!="string")throw new TypeError("path must be a string");this[Sn]=!1,this[te]=typeof t.fd=="number"?t.fd:null,this[qt]=e,this[tm]=t.readSize||16*1024*1024,this[nr]=!1,this[rm]=typeof t.size=="number"?t.size:1/0,this[Vs]=this[rm],this[wn]=typeof t.autoClose=="boolean"?t.autoClose:!0,typeof this[te]=="number"?this[bn]():this[sr]()}get fd(){return this[te]}get path(){return this[qt]}write(){throw new TypeError("this is a readable stream")}end(){throw new TypeError("this is a readable stream")}[sr](){ze.open(this[qt],"r",(e,t)=>this[Rn](e,t))}[Rn](e,t){e?this[vn](e):(this[te]=t,this.emit("open",t),this[bn]())}[su](){return Buffer.allocUnsafe(Math.min(this[tm],this[Vs]))}[bn](){if(!this[nr]){this[nr]=!0;let e=this[su]();if(e.length===0)return process.nextTick(()=>this[ru](null,0,e));ze.read(this[te],e,0,e.length,null,(t,n,i)=>this[ru](t,n,i))}}[ru](e,t,n){this[nr]=!1,e?this[vn](e):this[iu](t,n)&&this[bn]()}[ft](){if(this[wn]&&typeof this[te]=="number"){let e=this[te];this[te]=null,ze.close(e,t=>t?this.emit("error",t):this.emit("close"))}}[vn](e){this[nr]=!0,this[ft](),this.emit("error",e)}[iu](e,t){let n=!1;return this[Vs]-=e,e>0&&(n=super.write(e<t.length?t.slice(0,e):t)),(e===0||this[Vs]<=0)&&(n=!1,this[ft](),super.end()),n}emit(e,t){switch(e){case"prefinish":case"finish":break;case"drain":typeof this[te]=="number"&&this[bn]();break;case"error":return this[Sn]?void 0:(this[Sn]=!0,super.emit(e,t));default:return super.emit(e,t)}}},ou=class extends Ys{[sr](){let e=!0;try{this[Rn](null,ze.openSync(this[qt],"r")),e=!1}finally{e&&this[ft]()}}[bn](){let e=!0;try{if(!this[nr]){this[nr]=!0;do{let t=this[su](),n=t.length===0?0:ze.readSync(this[te],t,0,t.length,null);if(!this[iu](n,t))break}while(!0);this[nr]=!1}e=!1}finally{e&&this[ft]()}}[ft](){if(this[wn]&&typeof this[te]=="number"){let e=this[te];this[te]=null,ze.closeSync(e),this.emit("close")}}},Js=class extends lR{constructor(e,t){t=t||{},super(t),this.readable=!1,this.writable=!0,this[Sn]=!1,this[gn]=!1,this[fi]=!1,this[zs]=!1,this[Ot]=[],this[qt]=e,this[te]=typeof t.fd=="number"?t.fd:null,this[Ks]=t.mode===void 0?438:t.mode,this[Ur]=typeof t.start=="number"?t.start:null,this[wn]=typeof t.autoClose=="boolean"?t.autoClose:!0;let n=this[Ur]!==null?"r+":"w";this[Xs]=t.flags===void 0,this[ir]=this[Xs]?n:t.flags,this[te]===null&&this[sr]()}emit(e,t){if(e==="error"){if(this[Sn])return;this[Sn]=!0}return super.emit(e,t)}get fd(){return this[te]}get path(){return this[qt]}[vn](e){this[ft](),this[gn]=!0,this.emit("error",e)}[sr](){ze.open(this[qt],this[ir],this[Ks],(e,t)=>this[Rn](e,t))}[Rn](e,t){this[Xs]&&this[ir]==="r+"&&e&&e.code==="ENOENT"?(this[ir]="w",this[sr]()):e?this[vn](e):(this[te]=t,this.emit("open",t),this[tu]())}end(e,t){return e&&this.write(e,t),this[fi]=!0,!this[gn]&&!this[Ot].length&&typeof this[te]=="number"&&this[_n](null,0),this}write(e,t){return typeof e=="string"&&(e=Buffer.from(e,t)),this[fi]?(this.emit("error",new Error("write() after end()")),!1):this[te]===null||this[gn]||this[Ot].length?(this[Ot].push(e),this[zs]=!0,!1):(this[gn]=!0,this[Ws](e),!0)}[Ws](e){ze.write(this[te],e,0,e.length,this[Ur],(t,n)=>this[_n](t,n))}[_n](e,t){e?this[vn](e):(this[Ur]!==null&&(this[Ur]+=t),this[Ot].length?this[tu]():(this[gn]=!1,this[fi]&&!this[em]?(this[em]=!0,this[ft](),this.emit("finish")):this[zs]&&(this[zs]=!1,this.emit("drain"))))}[tu](){if(this[Ot].length===0)this[fi]&&this[_n](null,0);else if(this[Ot].length===1)this[Ws](this[Ot].pop());else{let e=this[Ot];this[Ot]=[],nu(this[te],e,this[Ur],(t,n)=>this[_n](t,n))}}[ft](){if(this[wn]&&typeof this[te]=="number"){let e=this[te];this[te]=null,ze.close(e,t=>t?this.emit("error",t):this.emit("close"))}}},au=class extends Js{[sr](){let e;if(this[Xs]&&this[ir]==="r+")try{e=ze.openSync(this[qt],this[ir],this[Ks])}catch(t){if(t.code==="ENOENT")return this[ir]="w",this[sr]();throw t}else e=ze.openSync(this[qt],this[ir],this[Ks]);this[Rn](null,e)}[ft](){if(this[wn]&&typeof this[te]=="number"){let e=this[te];this[te]=null,ze.closeSync(e),this.emit("close")}}[Ws](e){let t=!0;try{this[_n](null,ze.writeSync(this[te],e,0,e.length,this[Ur])),t=!1}finally{if(t)try{this[ft]()}catch{}}}};hi.ReadStream=Ys;hi.ReadStreamSync=ou;hi.WriteStream=Js;hi.WriteStreamSync=au});var io=E((yD,um)=>{"use strict";var fR=Ns(),hR=mn(),dR=require("events"),pR=Hc(),mR=1024*1024,yR=Ts(),nm=Is(),ER=Sc(),cu=Buffer.from([31,139]),nt=Symbol("state"),Fr=Symbol("writeEntry"),Bt=Symbol("readEntry"),uu=Symbol("nextEntry"),im=Symbol("processEntry"),it=Symbol("extendedHeader"),di=Symbol("globalExtendedHeader"),or=Symbol("meta"),sm=Symbol("emitMeta"),ae=Symbol("buffer"),jt=Symbol("queue"),Mr=Symbol("ended"),om=Symbol("emittedEnd"),qr=Symbol("emit"),Ve=Symbol("unzip"),Zs=Symbol("consumeChunk"),Qs=Symbol("consumeChunkSub"),lu=Symbol("consumeBody"),am=Symbol("consumeMeta"),cm=Symbol("consumeHeader"),eo=Symbol("consuming"),fu=Symbol("bufferConcat"),hu=Symbol("maybeEnd"),pi=Symbol("writing"),ar=Symbol("aborted"),to=Symbol("onDone"),Br=Symbol("sawValidEntry"),ro=Symbol("sawNullBlock"),no=Symbol("sawEOF"),gR=r=>!0;um.exports=fR(class extends dR{constructor(e){e=e||{},super(e),this.file=e.file||"",this[Br]=null,this.on(to,t=>{(this[nt]==="begin"||this[Br]===!1)&&this.warn("TAR_BAD_ARCHIVE","Unrecognized archive format")}),e.ondone?this.on(to,e.ondone):this.on(to,t=>{this.emit("prefinish"),this.emit("finish"),this.emit("end"),this.emit("close")}),this.strict=!!e.strict,this.maxMetaEntrySize=e.maxMetaEntrySize||mR,this.filter=typeof e.filter=="function"?e.filter:gR,this.writable=!0,this.readable=!1,this[jt]=new pR,this[ae]=null,this[Bt]=null,this[Fr]=null,this[nt]="begin",this[or]="",this[it]=null,this[di]=null,this[Mr]=!1,this[Ve]=null,this[ar]=!1,this[ro]=!1,this[no]=!1,typeof e.onwarn=="function"&&this.on("warn",e.onwarn),typeof e.onentry=="function"&&this.on("entry",e.onentry)}[cm](e,t){this[Br]===null&&(this[Br]=!1);let n;try{n=new hR(e,t,this[it],this[di])}catch(i){return this.warn("TAR_ENTRY_INVALID",i)}if(n.nullBlock)this[ro]?(this[no]=!0,this[nt]==="begin"&&(this[nt]="header"),this[qr]("eof")):(this[ro]=!0,this[qr]("nullBlock"));else if(this[ro]=!1,!n.cksumValid)this.warn("TAR_ENTRY_INVALID","checksum failure",{header:n});else if(!n.path)this.warn("TAR_ENTRY_INVALID","path is required",{header:n});else{let i=n.type;if(/^(Symbolic)?Link$/.test(i)&&!n.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath required",{header:n});else if(!/^(Symbolic)?Link$/.test(i)&&n.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath forbidden",{header:n});else{let s=this[Fr]=new yR(n,this[it],this[di]);if(!this[Br])if(s.remain){let o=()=>{s.invalid||(this[Br]=!0)};s.on("end",o)}else this[Br]=!0;s.meta?s.size>this.maxMetaEntrySize?(s.ignore=!0,this[qr]("ignoredEntry",s),this[nt]="ignore",s.resume()):s.size>0&&(this[or]="",s.on("data",o=>this[or]+=o),this[nt]="meta"):(this[it]=null,s.ignore=s.ignore||!this.filter(s.path,s),s.ignore?(this[qr]("ignoredEntry",s),this[nt]=s.remain?"ignore":"header",s.resume()):(s.remain?this[nt]="body":(this[nt]="header",s.end()),this[Bt]?this[jt].push(s):(this[jt].push(s),this[uu]())))}}}[im](e){let t=!0;return e?Array.isArray(e)?this.emit.apply(this,e):(this[Bt]=e,this.emit("entry",e),e.emittedEnd||(e.on("end",n=>this[uu]()),t=!1)):(this[Bt]=null,t=!1),t}[uu](){do;while(this[im](this[jt].shift()));if(!this[jt].length){let e=this[Bt];!e||e.flowing||e.size===e.remain?this[pi]||this.emit("drain"):e.once("drain",n=>this.emit("drain"))}}[lu](e,t){let n=this[Fr],i=n.blockRemain,s=i>=e.length&&t===0?e:e.slice(t,t+i);return n.write(s),n.blockRemain||(this[nt]="header",this[Fr]=null,n.end()),s.length}[am](e,t){let n=this[Fr],i=this[lu](e,t);return this[Fr]||this[sm](n),i}[qr](e,t,n){!this[jt].length&&!this[Bt]?this.emit(e,t,n):this[jt].push([e,t,n])}[sm](e){switch(this[qr]("meta",this[or]),e.type){case"ExtendedHeader":case"OldExtendedHeader":this[it]=nm.parse(this[or],this[it],!1);break;case"GlobalExtendedHeader":this[di]=nm.parse(this[or],this[di],!0);break;case"NextFileHasLongPath":case"OldGnuLongPath":this[it]=this[it]||Object.create(null),this[it].path=this[or].replace(/\0.*/,"");break;case"NextFileHasLongLinkpath":this[it]=this[it]||Object.create(null),this[it].linkpath=this[or].replace(/\0.*/,"");break;default:throw new Error("unknown meta: "+e.type)}}abort(e){this[ar]=!0,this.emit("abort",e),this.warn("TAR_ABORT",e,{recoverable:!1})}write(e){if(this[ar])return;if(this[Ve]===null&&e){if(this[ae]&&(e=Buffer.concat([this[ae],e]),this[ae]=null),e.length<cu.length)return this[ae]=e,!0;for(let n=0;this[Ve]===null&&n<cu.length;n++)e[n]!==cu[n]&&(this[Ve]=!1);if(this[Ve]===null){let n=this[Mr];this[Mr]=!1,this[Ve]=new ER.Unzip,this[Ve].on("data",s=>this[Zs](s)),this[Ve].on("error",s=>this.abort(s)),this[Ve].on("end",s=>{this[Mr]=!0,this[Zs]()}),this[pi]=!0;let i=this[Ve][n?"end":"write"](e);return this[pi]=!1,i}}this[pi]=!0,this[Ve]?this[Ve].write(e):this[Zs](e),this[pi]=!1;let t=this[jt].length?!1:this[Bt]?this[Bt].flowing:!0;return!t&&!this[jt].length&&this[Bt].once("drain",n=>this.emit("drain")),t}[fu](e){e&&!this[ar]&&(this[ae]=this[ae]?Buffer.concat([this[ae],e]):e)}[hu](){if(this[Mr]&&!this[om]&&!this[ar]&&!this[eo]){this[om]=!0;let e=this[Fr];if(e&&e.blockRemain){let t=this[ae]?this[ae].length:0;this.warn("TAR_BAD_ARCHIVE",`Truncated input (needed ${e.blockRemain} more bytes, only ${t} available)`,{entry:e}),this[ae]&&e.write(this[ae]),e.end()}this[qr](to)}}[Zs](e){if(this[eo])this[fu](e);else if(!e&&!this[ae])this[hu]();else{if(this[eo]=!0,this[ae]){this[fu](e);let t=this[ae];this[ae]=null,this[Qs](t)}else this[Qs](e);for(;this[ae]&&this[ae].length>=512&&!this[ar]&&!this[no];){let t=this[ae];this[ae]=null,this[Qs](t)}this[eo]=!1}(!this[ae]||this[Mr])&&this[hu]()}[Qs](e){let t=0,n=e.length;for(;t+512<=n&&!this[ar]&&!this[no];)switch(this[nt]){case"begin":case"header":this[cm](e,t),t+=512;break;case"ignore":case"body":t+=this[lu](e,t);break;case"meta":t+=this[am](e,t);break;default:throw new Error("invalid state: "+this[nt])}t<n&&(this[ae]?this[ae]=Buffer.concat([e.slice(t),this[ae]]):this[ae]=e.slice(t))}end(e){this[ar]||(this[Ve]?this[Ve].end(e):(this[Mr]=!0,this.write(e)))}})});var so=E((ED,dm)=>{"use strict";var _R=cn(),fm=io(),On=require("fs"),bR=xn(),lm=require("path"),du=yn();dm.exports=(r,e,t)=>{typeof r=="function"?(t=r,e=null,r={}):Array.isArray(r)&&(e=r,r={}),typeof e=="function"&&(t=e,e=null),e?e=Array.from(e):e=[];let n=_R(r);if(n.sync&&typeof t=="function")throw new TypeError("callback not supported for sync tar functions");if(!n.file&&typeof t=="function")throw new TypeError("callback only supported with file option");return e.length&&SR(n,e),n.noResume||vR(n),n.file&&n.sync?wR(n):n.file?RR(n,t):hm(n)};var vR=r=>{let e=r.onentry;r.onentry=e?t=>{e(t),t.resume()}:t=>t.resume()},SR=(r,e)=>{let t=new Map(e.map(s=>[du(s),!0])),n=r.filter,i=(s,o)=>{let a=o||lm.parse(s).root||".",c=s===a?!1:t.has(s)?t.get(s):i(lm.dirname(s),a);return t.set(s,c),c};r.filter=n?(s,o)=>n(s,o)&&i(du(s)):s=>i(du(s))},wR=r=>{let e=hm(r),t=r.file,n=!0,i;try{let s=On.statSync(t),o=r.maxReadSize||16*1024*1024;if(s.size<o)e.end(On.readFileSync(t));else{let a=0,c=Buffer.allocUnsafe(o);for(i=On.openSync(t,"r");a<s.size;){let l=On.readSync(i,c,0,o,a);a+=l,e.write(c.slice(0,l))}e.end()}n=!1}finally{if(n&&i)try{On.closeSync(i)}catch{}}},RR=(r,e)=>{let t=new fm(r),n=r.maxReadSize||16*1024*1024,i=r.file,s=new Promise((o,a)=>{t.on("error",a),t.on("end",o),On.stat(i,(c,l)=>{if(c)a(c);else{let u=new bR.ReadStream(i,{readSize:n,size:l.size});u.on("error",a),u.pipe(t)}})});return e?s.then(e,e):s},hm=r=>new fm(r)});var _m=E((gD,gm)=>{"use strict";var xR=cn(),oo=Hs(),pm=xn(),mm=so(),ym=require("path");gm.exports=(r,e,t)=>{if(typeof e=="function"&&(t=e),Array.isArray(r)&&(e=r,r={}),!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");e=Array.from(e);let n=xR(r);if(n.sync&&typeof t=="function")throw new TypeError("callback not supported for sync tar functions");if(!n.file&&typeof t=="function")throw new TypeError("callback only supported with file option");return n.file&&n.sync?OR(n,e):n.file?TR(n,e,t):n.sync?CR(n,e):IR(n,e)};var OR=(r,e)=>{let t=new oo.Sync(r),n=new pm.WriteStreamSync(r.file,{mode:r.mode||438});t.pipe(n),Em(t,e)},TR=(r,e,t)=>{let n=new oo(r),i=new pm.WriteStream(r.file,{mode:r.mode||438});n.pipe(i);let s=new Promise((o,a)=>{i.on("error",a),i.on("close",o),n.on("error",a)});return pu(n,e),t?s.then(t,t):s},Em=(r,e)=>{e.forEach(t=>{t.charAt(0)==="@"?mm({file:ym.resolve(r.cwd,t.substr(1)),sync:!0,noResume:!0,onentry:n=>r.add(n)}):r.add(t)}),r.end()},pu=(r,e)=>{for(;e.length;){let t=e.shift();if(t.charAt(0)==="@")return mm({file:ym.resolve(r.cwd,t.substr(1)),noResume:!0,onentry:n=>r.add(n)}).then(n=>pu(r,e));r.add(t)}r.end()},CR=(r,e)=>{let t=new oo.Sync(r);return Em(t,e),t},IR=(r,e)=>{let t=new oo(r);return pu(t,e),t}});var mu=E((_D,Om)=>{"use strict";var NR=cn(),bm=Hs(),Ze=require("fs"),vm=xn(),Sm=so(),wm=require("path"),Rm=mn();Om.exports=(r,e,t)=>{let n=NR(r);if(!n.file)throw new TypeError("file is required");if(n.gzip)throw new TypeError("cannot append to compressed archives");if(!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");return e=Array.from(e),n.sync?AR(n,e):kR(n,e,t)};var AR=(r,e)=>{let t=new bm.Sync(r),n=!0,i,s;try{try{i=Ze.openSync(r.file,"r+")}catch(c){if(c.code==="ENOENT")i=Ze.openSync(r.file,"w+");else throw c}let o=Ze.fstatSync(i),a=Buffer.alloc(512);e:for(s=0;s<o.size;s+=512){for(let u=0,f=0;u<512;u+=f){if(f=Ze.readSync(i,a,u,a.length-u,s+u),s===0&&a[0]===31&&a[1]===139)throw new Error("cannot append to compressed archives");if(!f)break e}let c=new Rm(a);if(!c.cksumValid)break;let l=512*Math.ceil(c.size/512);if(s+l+512>o.size)break;s+=l,r.mtimeCache&&r.mtimeCache.set(c.path,c.mtime)}n=!1,DR(r,t,s,i,e)}finally{if(n)try{Ze.closeSync(i)}catch{}}},DR=(r,e,t,n,i)=>{let s=new vm.WriteStreamSync(r.file,{fd:n,start:t});e.pipe(s),LR(e,i)},kR=(r,e,t)=>{e=Array.from(e);let n=new bm(r),i=(o,a,c)=>{let l=(m,b)=>{m?Ze.close(o,p=>c(m)):c(null,b)},u=0;if(a===0)return l(null,0);let f=0,h=Buffer.alloc(512),d=(m,b)=>{if(m)return l(m);if(f+=b,f<512&&b)return Ze.read(o,h,f,h.length-f,u+f,d);if(u===0&&h[0]===31&&h[1]===139)return l(new Error("cannot append to compressed archives"));if(f<512)return l(null,u);let p=new Rm(h);if(!p.cksumValid)return l(null,u);let w=512*Math.ceil(p.size/512);if(u+w+512>a||(u+=w+512,u>=a))return l(null,u);r.mtimeCache&&r.mtimeCache.set(p.path,p.mtime),f=0,Ze.read(o,h,0,512,u,d)};Ze.read(o,h,0,512,u,d)},s=new Promise((o,a)=>{n.on("error",a);let c="r+",l=(u,f)=>{if(u&&u.code==="ENOENT"&&c==="r+")return c="w+",Ze.open(r.file,c,l);if(u)return a(u);Ze.fstat(f,(h,d)=>{if(h)return Ze.close(f,()=>a(h));i(f,d.size,(m,b)=>{if(m)return a(m);let p=new vm.WriteStream(r.file,{fd:f,start:b});n.pipe(p),p.on("error",a),p.on("close",o),xm(n,e)})})};Ze.open(r.file,c,l)});return t?s.then(t,t):s},LR=(r,e)=>{e.forEach(t=>{t.charAt(0)==="@"?Sm({file:wm.resolve(r.cwd,t.substr(1)),sync:!0,noResume:!0,onentry:n=>r.add(n)}):r.add(t)}),r.end()},xm=(r,e)=>{for(;e.length;){let t=e.shift();if(t.charAt(0)==="@")return Sm({file:wm.resolve(r.cwd,t.substr(1)),noResume:!0,onentry:n=>r.add(n)}).then(n=>xm(r,e));r.add(t)}r.end()}});var Cm=E((bD,Tm)=>{"use strict";var PR=cn(),UR=mu();Tm.exports=(r,e,t)=>{let n=PR(r);if(!n.file)throw new TypeError("file is required");if(n.gzip)throw new TypeError("cannot append to compressed archives");if(!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");return e=Array.from(e),FR(n),UR(n,e,t)};var FR=r=>{let e=r.filter;r.mtimeCache||(r.mtimeCache=new Map),r.filter=e?(t,n)=>e(t,n)&&!(r.mtimeCache.get(t)>n.mtime):(t,n)=>!(r.mtimeCache.get(t)>n.mtime)}});var Am=E((vD,Nm)=>{"use strict";var{promisify:Im}=require("util"),cr=require("fs"),MR=r=>{if(!r)r={mode:511,fs:cr};else if(typeof r=="object")r={mode:511,fs:cr,...r};else if(typeof r=="number")r={mode:r,fs:cr};else if(typeof r=="string")r={mode:parseInt(r,8),fs:cr};else throw new TypeError("invalid options argument");return r.mkdir=r.mkdir||r.fs.mkdir||cr.mkdir,r.mkdirAsync=Im(r.mkdir),r.stat=r.stat||r.fs.stat||cr.stat,r.statAsync=Im(r.stat),r.statSync=r.statSync||r.fs.statSync||cr.statSync,r.mkdirSync=r.mkdirSync||r.fs.mkdirSync||cr.mkdirSync,r};Nm.exports=MR});var km=E((SD,Dm)=>{"use strict";var qR=process.env.__TESTING_MKDIRP_PLATFORM__||process.platform,{resolve:BR,parse:jR}=require("path"),GR=r=>{if(/\0/.test(r))throw Object.assign(new TypeError("path must be a string without null bytes"),{path:r,code:"ERR_INVALID_ARG_VALUE"});if(r=BR(r),qR==="win32"){let e=/[*|"<>?:]/,{root:t}=jR(r);if(e.test(r.substr(t.length)))throw Object.assign(new Error("Illegal characters in path."),{path:r,code:"EINVAL"})}return r};Dm.exports=GR});var Mm=E((wD,Fm)=>{"use strict";var{dirname:Lm}=require("path"),Pm=(r,e,t=void 0)=>t===e?Promise.resolve():r.statAsync(e).then(n=>n.isDirectory()?t:void 0,n=>n.code==="ENOENT"?Pm(r,Lm(e),e):void 0),Um=(r,e,t=void 0)=>{if(t!==e)try{return r.statSync(e).isDirectory()?t:void 0}catch(n){return n.code==="ENOENT"?Um(r,Lm(e),e):void 0}};Fm.exports={findMade:Pm,findMadeSync:Um}});var gu=E((RD,Bm)=>{"use strict";var{dirname:qm}=require("path"),yu=(r,e,t)=>{e.recursive=!1;let n=qm(r);return n===r?e.mkdirAsync(r,e).catch(i=>{if(i.code!=="EISDIR")throw i}):e.mkdirAsync(r,e).then(()=>t||r,i=>{if(i.code==="ENOENT")return yu(n,e).then(s=>yu(r,e,s));if(i.code!=="EEXIST"&&i.code!=="EROFS")throw i;return e.statAsync(r).then(s=>{if(s.isDirectory())return t;throw i},()=>{throw i})})},Eu=(r,e,t)=>{let n=qm(r);if(e.recursive=!1,n===r)try{return e.mkdirSync(r,e)}catch(i){if(i.code!=="EISDIR")throw i;return}try{return e.mkdirSync(r,e),t||r}catch(i){if(i.code==="ENOENT")return Eu(r,e,Eu(n,e,t));if(i.code!=="EEXIST"&&i.code!=="EROFS")throw i;try{if(!e.statSync(r).isDirectory())throw i}catch{throw i}}};Bm.exports={mkdirpManual:yu,mkdirpManualSync:Eu}});var $m=E((xD,Gm)=>{"use strict";var{dirname:jm}=require("path"),{findMade:$R,findMadeSync:HR}=Mm(),{mkdirpManual:zR,mkdirpManualSync:VR}=gu(),WR=(r,e)=>(e.recursive=!0,jm(r)===r?e.mkdirAsync(r,e):$R(e,r).then(n=>e.mkdirAsync(r,e).then(()=>n).catch(i=>{if(i.code==="ENOENT")return zR(r,e);throw i}))),XR=(r,e)=>{if(e.recursive=!0,jm(r)===r)return e.mkdirSync(r,e);let n=HR(e,r);try{return e.mkdirSync(r,e),n}catch(i){if(i.code==="ENOENT")return VR(r,e);throw i}};Gm.exports={mkdirpNative:WR,mkdirpNativeSync:XR}});var Wm=E((OD,Vm)=>{"use strict";var Hm=require("fs"),KR=process.env.__TESTING_MKDIRP_NODE_VERSION__||process.version,_u=KR.replace(/^v/,"").split("."),zm=+_u[0]>10||+_u[0]==10&&+_u[1]>=12,YR=zm?r=>r.mkdir===Hm.mkdir:()=>!1,JR=zm?r=>r.mkdirSync===Hm.mkdirSync:()=>!1;Vm.exports={useNative:YR,useNativeSync:JR}});var Qm=E((TD,Zm)=>{"use strict";var Tn=Am(),Cn=km(),{mkdirpNative:Xm,mkdirpNativeSync:Km}=$m(),{mkdirpManual:Ym,mkdirpManualSync:Jm}=gu(),{useNative:ZR,useNativeSync:QR}=Wm(),In=(r,e)=>(r=Cn(r),e=Tn(e),ZR(e)?Xm(r,e):Ym(r,e)),ex=(r,e)=>(r=Cn(r),e=Tn(e),QR(e)?Km(r,e):Jm(r,e));In.sync=ex;In.native=(r,e)=>Xm(Cn(r),Tn(e));In.manual=(r,e)=>Ym(Cn(r),Tn(e));In.nativeSync=(r,e)=>Km(Cn(r),Tn(e));In.manualSync=(r,e)=>Jm(Cn(r),Tn(e));Zm.exports=In});var oy=E((CD,sy)=>{"use strict";var st=require("fs"),jr=require("path"),tx=st.lchown?"lchown":"chown",rx=st.lchownSync?"lchownSync":"chownSync",ty=st.lchown&&!process.version.match(/v1[1-9]+\./)&&!process.version.match(/v10\.[6-9]/),ey=(r,e,t)=>{try{return st[rx](r,e,t)}catch(n){if(n.code!=="ENOENT")throw n}},nx=(r,e,t)=>{try{return st.chownSync(r,e,t)}catch(n){if(n.code!=="ENOENT")throw n}},ix=ty?(r,e,t,n)=>i=>{!i||i.code!=="EISDIR"?n(i):st.chown(r,e,t,n)}:(r,e,t,n)=>n,bu=ty?(r,e,t)=>{try{return ey(r,e,t)}catch(n){if(n.code!=="EISDIR")throw n;nx(r,e,t)}}:(r,e,t)=>ey(r,e,t),sx=process.version,ry=(r,e,t)=>st.readdir(r,e,t),ox=(r,e)=>st.readdirSync(r,e);/^v4\./.test(sx)&&(ry=(r,e,t)=>st.readdir(r,t));var ao=(r,e,t,n)=>{st[tx](r,e,t,ix(r,e,t,i=>{n(i&&i.code!=="ENOENT"?i:null)}))},ny=(r,e,t,n,i)=>{if(typeof e=="string")return st.lstat(jr.resolve(r,e),(s,o)=>{if(s)return i(s.code!=="ENOENT"?s:null);o.name=e,ny(r,o,t,n,i)});if(e.isDirectory())vu(jr.resolve(r,e.name),t,n,s=>{if(s)return i(s);let o=jr.resolve(r,e.name);ao(o,t,n,i)});else{let s=jr.resolve(r,e.name);ao(s,t,n,i)}},vu=(r,e,t,n)=>{ry(r,{withFileTypes:!0},(i,s)=>{if(i){if(i.code==="ENOENT")return n();if(i.code!=="ENOTDIR"&&i.code!=="ENOTSUP")return n(i)}if(i||!s.length)return ao(r,e,t,n);let o=s.length,a=null,c=l=>{if(!a){if(l)return n(a=l);if(--o===0)return ao(r,e,t,n)}};s.forEach(l=>ny(r,l,e,t,c))})},ax=(r,e,t,n)=>{if(typeof e=="string")try{let i=st.lstatSync(jr.resolve(r,e));i.name=e,e=i}catch(i){if(i.code==="ENOENT")return;throw i}e.isDirectory()&&iy(jr.resolve(r,e.name),t,n),bu(jr.resolve(r,e.name),t,n)},iy=(r,e,t)=>{let n;try{n=ox(r,{withFileTypes:!0})}catch(i){if(i.code==="ENOENT")return;if(i.code==="ENOTDIR"||i.code==="ENOTSUP")return bu(r,e,t);throw i}return n&&n.length&&n.forEach(i=>ax(r,i,e,t)),bu(r,e,t)};sy.exports=vu;vu.sync=iy});var ly=E((ID,Su)=>{"use strict";var ay=Qm(),ot=require("fs"),co=require("path"),cy=oy(),ht=dn(),uo=class extends Error{constructor(e,t){super("Cannot extract through symbolic link"),this.path=t,this.symlink=e}get name(){return"SylinkError"}},lo=class extends Error{constructor(e,t){super(t+": Cannot cd into '"+e+"'"),this.path=e,this.code=t}get name(){return"CwdError"}},fo=(r,e)=>r.get(ht(e)),mi=(r,e,t)=>r.set(ht(e),t),cx=(r,e)=>{ot.stat(r,(t,n)=>{(t||!n.isDirectory())&&(t=new lo(r,t&&t.code||"ENOTDIR")),e(t)})};Su.exports=(r,e,t)=>{r=ht(r);let n=e.umask,i=e.mode|448,s=(i&n)!==0,o=e.uid,a=e.gid,c=typeof o=="number"&&typeof a=="number"&&(o!==e.processUid||a!==e.processGid),l=e.preserve,u=e.unlink,f=e.cache,h=ht(e.cwd),d=(p,w)=>{p?t(p):(mi(f,r,!0),w&&c?cy(w,o,a,k=>d(k)):s?ot.chmod(r,i,t):t())};if(f&&fo(f,r)===!0)return d();if(r===h)return cx(r,d);if(l)return ay(r,{mode:i}).then(p=>d(null,p),d);let b=ht(co.relative(h,r)).split("/");ho(h,b,i,f,u,h,null,d)};var ho=(r,e,t,n,i,s,o,a)=>{if(!e.length)return a(null,o);let c=e.shift(),l=ht(co.resolve(r+"/"+c));if(fo(n,l))return ho(l,e,t,n,i,s,o,a);ot.mkdir(l,t,uy(l,e,t,n,i,s,o,a))},uy=(r,e,t,n,i,s,o,a)=>c=>{c?ot.lstat(r,(l,u)=>{if(l)l.path=l.path&&ht(l.path),a(l);else if(u.isDirectory())ho(r,e,t,n,i,s,o,a);else if(i)ot.unlink(r,f=>{if(f)return a(f);ot.mkdir(r,t,uy(r,e,t,n,i,s,o,a))});else{if(u.isSymbolicLink())return a(new uo(r,r+"/"+e.join("/")));a(c)}}):(o=o||r,ho(r,e,t,n,i,s,o,a))},ux=r=>{let e=!1,t="ENOTDIR";try{e=ot.statSync(r).isDirectory()}catch(n){t=n.code}finally{if(!e)throw new lo(r,t)}};Su.exports.sync=(r,e)=>{r=ht(r);let t=e.umask,n=e.mode|448,i=(n&t)!==0,s=e.uid,o=e.gid,a=typeof s=="number"&&typeof o=="number"&&(s!==e.processUid||o!==e.processGid),c=e.preserve,l=e.unlink,u=e.cache,f=ht(e.cwd),h=p=>{mi(u,r,!0),p&&a&&cy.sync(p,s,o),i&&ot.chmodSync(r,n)};if(u&&fo(u,r)===!0)return h();if(r===f)return ux(f),h();if(c)return h(ay.sync(r,n));let m=ht(co.relative(f,r)).split("/"),b=null;for(let p=m.shift(),w=f;p&&(w+="/"+p);p=m.shift())if(w=ht(co.resolve(w)),!fo(u,w))try{ot.mkdirSync(w,n),b=b||w,mi(u,w,!0)}catch{let O=ot.lstatSync(w);if(O.isDirectory()){mi(u,w,!0);continue}else if(l){ot.unlinkSync(w),ot.mkdirSync(w,n),b=b||w,mi(u,w,!0);continue}else if(O.isSymbolicLink())return new uo(w,w+"/"+m.join("/"))}return h(b)}});var Ru=E((ND,fy)=>{"use strict";var wu=Object.create(null),{hasOwnProperty:lx}=Object.prototype;fy.exports=r=>(lx.call(wu,r)||(wu[r]=r.normalize("NFKD")),wu[r])});var my=E((AD,py)=>{"use strict";var hy=require("assert"),fx=Ru(),hx=yn(),{join:dy}=require("path"),dx=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,px=dx==="win32";py.exports=()=>{let r=new Map,e=new Map,t=l=>l.split("/").slice(0,-1).reduce((f,h)=>(f.length&&(h=dy(f[f.length-1],h)),f.push(h||"/"),f),[]),n=new Set,i=l=>{let u=e.get(l);if(!u)throw new Error("function does not have any path reservations");return{paths:u.paths.map(f=>r.get(f)),dirs:[...u.dirs].map(f=>r.get(f))}},s=l=>{let{paths:u,dirs:f}=i(l);return u.every(h=>h[0]===l)&&f.every(h=>h[0]instanceof Set&&h[0].has(l))},o=l=>n.has(l)||!s(l)?!1:(n.add(l),l(()=>a(l)),!0),a=l=>{if(!n.has(l))return!1;let{paths:u,dirs:f}=e.get(l),h=new Set;return u.forEach(d=>{let m=r.get(d);hy.equal(m[0],l),m.length===1?r.delete(d):(m.shift(),typeof m[0]=="function"?h.add(m[0]):m[0].forEach(b=>h.add(b)))}),f.forEach(d=>{let m=r.get(d);hy(m[0]instanceof Set),m[0].size===1&&m.length===1?r.delete(d):m[0].size===1?(m.shift(),h.add(m[0])):m[0].delete(l)}),n.delete(l),h.forEach(d=>o(d)),!0};return{check:s,reserve:(l,u)=>{l=px?["win32 parallelization disabled"]:l.map(h=>fx(hx(dy(h))).toLowerCase());let f=new Set(l.map(h=>t(h)).reduce((h,d)=>h.concat(d)));return e.set(u,{dirs:f,paths:l}),l.forEach(h=>{let d=r.get(h);d?d.push(u):r.set(h,[u])}),f.forEach(h=>{let d=r.get(h);d?d[d.length-1]instanceof Set?d[d.length-1].add(u):d.push(new Set([u])):r.set(h,[new Set([u])])}),o(u)}}}});var gy=E((DD,Ey)=>{"use strict";var mx=process.env.__FAKE_PLATFORM__||process.platform,yx=mx==="win32",Ex=global.__FAKE_TESTING_FS__||require("fs"),{O_CREAT:gx,O_TRUNC:_x,O_WRONLY:bx,UV_FS_O_FILEMAP:yy=0}=Ex.constants,vx=yx&&!!yy,Sx=512*1024,wx=yy|_x|gx|bx;Ey.exports=vx?r=>r<Sx?wx:"w":()=>"w"});var ku=E((kD,Dy)=>{"use strict";var Rx=require("assert"),xx=io(),Q=require("fs"),Ox=xn(),Gt=require("path"),Iy=ly(),_y=Dc(),Tx=my(),Cx=kc(),Qe=dn(),Ix=yn(),Nx=Ru(),by=Symbol("onEntry"),Tu=Symbol("checkFs"),vy=Symbol("checkFs2"),yo=Symbol("pruneCache"),Cu=Symbol("isReusable"),at=Symbol("makeFs"),Iu=Symbol("file"),Nu=Symbol("directory"),Eo=Symbol("link"),Sy=Symbol("symlink"),wy=Symbol("hardlink"),Ry=Symbol("unsupported"),xy=Symbol("checkPath"),ur=Symbol("mkdir"),De=Symbol("onError"),po=Symbol("pending"),Oy=Symbol("pend"),Nn=Symbol("unpend"),xu=Symbol("ended"),Ou=Symbol("maybeClose"),Au=Symbol("skip"),yi=Symbol("doChown"),Ei=Symbol("uid"),gi=Symbol("gid"),_i=Symbol("checkedCwd"),Ny=require("crypto"),Ay=gy(),Ax=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,bi=Ax==="win32",Dx=(r,e)=>{if(!bi)return Q.unlink(r,e);let t=r+".DELETE."+Ny.randomBytes(16).toString("hex");Q.rename(r,t,n=>{if(n)return e(n);Q.unlink(t,e)})},kx=r=>{if(!bi)return Q.unlinkSync(r);let e=r+".DELETE."+Ny.randomBytes(16).toString("hex");Q.renameSync(r,e),Q.unlinkSync(e)},Ty=(r,e,t)=>r===r>>>0?r:e===e>>>0?e:t,Cy=r=>Nx(Ix(Qe(r))).toLowerCase(),Lx=(r,e)=>{e=Cy(e);for(let t of r.keys()){let n=Cy(t);(n===e||n.indexOf(e+"/")===0)&&r.delete(t)}},Px=r=>{for(let e of r.keys())r.delete(e)},vi=class extends xx{constructor(e){if(e||(e={}),e.ondone=t=>{this[xu]=!0,this[Ou]()},super(e),this[_i]=!1,this.reservations=Tx(),this.transform=typeof e.transform=="function"?e.transform:null,this.writable=!0,this.readable=!1,this[po]=0,this[xu]=!1,this.dirCache=e.dirCache||new Map,typeof e.uid=="number"||typeof e.gid=="number"){if(typeof e.uid!="number"||typeof e.gid!="number")throw new TypeError("cannot set owner without number uid and gid");if(e.preserveOwner)throw new TypeError("cannot preserve owner in archive and also set owner explicitly");this.uid=e.uid,this.gid=e.gid,this.setOwner=!0}else this.uid=null,this.gid=null,this.setOwner=!1;e.preserveOwner===void 0&&typeof e.uid!="number"?this.preserveOwner=process.getuid&&process.getuid()===0:this.preserveOwner=!!e.preserveOwner,this.processUid=(this.preserveOwner||this.setOwner)&&process.getuid?process.getuid():null,this.processGid=(this.preserveOwner||this.setOwner)&&process.getgid?process.getgid():null,this.forceChown=e.forceChown===!0,this.win32=!!e.win32||bi,this.newer=!!e.newer,this.keep=!!e.keep,this.noMtime=!!e.noMtime,this.preservePaths=!!e.preservePaths,this.unlink=!!e.unlink,this.cwd=Qe(Gt.resolve(e.cwd||process.cwd())),this.strip=+e.strip||0,this.processUmask=e.noChmod?0:process.umask(),this.umask=typeof e.umask=="number"?e.umask:this.processUmask,this.dmode=e.dmode||511&~this.umask,this.fmode=e.fmode||438&~this.umask,this.on("entry",t=>this[by](t))}warn(e,t,n={}){return(e==="TAR_BAD_ARCHIVE"||e==="TAR_ABORT")&&(n.recoverable=!1),super.warn(e,t,n)}[Ou](){this[xu]&&this[po]===0&&(this.emit("prefinish"),this.emit("finish"),this.emit("end"),this.emit("close"))}[xy](e){if(this.strip){let t=Qe(e.path).split("/");if(t.length<this.strip)return!1;if(e.path=t.slice(this.strip).join("/"),e.type==="Link"){let n=Qe(e.linkpath).split("/");if(n.length>=this.strip)e.linkpath=n.slice(this.strip).join("/");else return!1}}if(!this.preservePaths){let t=Qe(e.path),n=t.split("/");if(n.includes("..")||bi&&/^[a-z]:\.\.$/i.test(n[0]))return this.warn("TAR_ENTRY_ERROR","path contains '..'",{entry:e,path:t}),!1;let[i,s]=Cx(t);i&&(e.path=s,this.warn("TAR_ENTRY_INFO",`stripping ${i} from absolute path`,{entry:e,path:t}))}if(Gt.isAbsolute(e.path)?e.absolute=Qe(Gt.resolve(e.path)):e.absolute=Qe(Gt.resolve(this.cwd,e.path)),!this.preservePaths&&e.absolute.indexOf(this.cwd+"/")!==0&&e.absolute!==this.cwd)return this.warn("TAR_ENTRY_ERROR","path escaped extraction target",{entry:e,path:Qe(e.path),resolvedPath:e.absolute,cwd:this.cwd}),!1;if(e.absolute===this.cwd&&e.type!=="Directory"&&e.type!=="GNUDumpDir")return!1;if(this.win32){let{root:t}=Gt.win32.parse(e.absolute);e.absolute=t+_y.encode(e.absolute.substr(t.length));let{root:n}=Gt.win32.parse(e.path);e.path=n+_y.encode(e.path.substr(n.length))}return!0}[by](e){if(!this[xy](e))return e.resume();switch(Rx.equal(typeof e.absolute,"string"),e.type){case"Directory":case"GNUDumpDir":e.mode&&(e.mode=e.mode|448);case"File":case"OldFile":case"ContiguousFile":case"Link":case"SymbolicLink":return this[Tu](e);case"CharacterDevice":case"BlockDevice":case"FIFO":default:return this[Ry](e)}}[De](e,t){e.name==="CwdError"?this.emit("error",e):(this.warn("TAR_ENTRY_ERROR",e,{entry:t}),this[Nn](),t.resume())}[ur](e,t,n){Iy(Qe(e),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:t,noChmod:this.noChmod},n)}[yi](e){return this.forceChown||this.preserveOwner&&(typeof e.uid=="number"&&e.uid!==this.processUid||typeof e.gid=="number"&&e.gid!==this.processGid)||typeof this.uid=="number"&&this.uid!==this.processUid||typeof this.gid=="number"&&this.gid!==this.processGid}[Ei](e){return Ty(this.uid,e.uid,this.processUid)}[gi](e){return Ty(this.gid,e.gid,this.processGid)}[Iu](e,t){let n=e.mode&4095||this.fmode,i=new Ox.WriteStream(e.absolute,{flags:Ay(e.size),mode:n,autoClose:!1});i.on("error",c=>{i.fd&&Q.close(i.fd,()=>{}),i.write=()=>!0,this[De](c,e),t()});let s=1,o=c=>{if(c){i.fd&&Q.close(i.fd,()=>{}),this[De](c,e),t();return}--s===0&&Q.close(i.fd,l=>{l?this[De](l,e):this[Nn](),t()})};i.on("finish",c=>{let l=e.absolute,u=i.fd;if(e.mtime&&!this.noMtime){s++;let f=e.atime||new Date,h=e.mtime;Q.futimes(u,f,h,d=>d?Q.utimes(l,f,h,m=>o(m&&d)):o())}if(this[yi](e)){s++;let f=this[Ei](e),h=this[gi](e);Q.fchown(u,f,h,d=>d?Q.chown(l,f,h,m=>o(m&&d)):o())}o()});let a=this.transform&&this.transform(e)||e;a!==e&&(a.on("error",c=>{this[De](c,e),t()}),e.pipe(a)),a.pipe(i)}[Nu](e,t){let n=e.mode&4095||this.dmode;this[ur](e.absolute,n,i=>{if(i){this[De](i,e),t();return}let s=1,o=a=>{--s===0&&(t(),this[Nn](),e.resume())};e.mtime&&!this.noMtime&&(s++,Q.utimes(e.absolute,e.atime||new Date,e.mtime,o)),this[yi](e)&&(s++,Q.chown(e.absolute,this[Ei](e),this[gi](e),o)),o()})}[Ry](e){e.unsupported=!0,this.warn("TAR_ENTRY_UNSUPPORTED",`unsupported entry type: ${e.type}`,{entry:e}),e.resume()}[Sy](e,t){this[Eo](e,e.linkpath,"symlink",t)}[wy](e,t){let n=Qe(Gt.resolve(this.cwd,e.linkpath));this[Eo](e,n,"link",t)}[Oy](){this[po]++}[Nn](){this[po]--,this[Ou]()}[Au](e){this[Nn](),e.resume()}[Cu](e,t){return e.type==="File"&&!this.unlink&&t.isFile()&&t.nlink<=1&&!bi}[Tu](e){this[Oy]();let t=[e.path];e.linkpath&&t.push(e.linkpath),this.reservations.reserve(t,n=>this[vy](e,n))}[yo](e){e.type==="SymbolicLink"?Px(this.dirCache):e.type!=="Directory"&&Lx(this.dirCache,e.absolute)}[vy](e,t){this[yo](e);let n=a=>{this[yo](e),t(a)},i=()=>{this[ur](this.cwd,this.dmode,a=>{if(a){this[De](a,e),n();return}this[_i]=!0,s()})},s=()=>{if(e.absolute!==this.cwd){let a=Qe(Gt.dirname(e.absolute));if(a!==this.cwd)return this[ur](a,this.dmode,c=>{if(c){this[De](c,e),n();return}o()})}o()},o=()=>{Q.lstat(e.absolute,(a,c)=>{if(c&&(this.keep||this.newer&&c.mtime>e.mtime)){this[Au](e),n();return}if(a||this[Cu](e,c))return this[at](null,e,n);if(c.isDirectory()){if(e.type==="Directory"){let l=!this.noChmod&&e.mode&&(c.mode&4095)!==e.mode,u=f=>this[at](f,e,n);return l?Q.chmod(e.absolute,e.mode,u):u()}if(e.absolute!==this.cwd)return Q.rmdir(e.absolute,l=>this[at](l,e,n))}if(e.absolute===this.cwd)return this[at](null,e,n);Dx(e.absolute,l=>this[at](l,e,n))})};this[_i]?s():i()}[at](e,t,n){if(e){this[De](e,t),n();return}switch(t.type){case"File":case"OldFile":case"ContiguousFile":return this[Iu](t,n);case"Link":return this[wy](t,n);case"SymbolicLink":return this[Sy](t,n);case"Directory":case"GNUDumpDir":return this[Nu](t,n)}}[Eo](e,t,n,i){Q[n](t,e.absolute,s=>{s?this[De](s,e):(this[Nn](),e.resume()),i()})}},mo=r=>{try{return[null,r()]}catch(e){return[e,null]}},Du=class extends vi{[at](e,t){return super[at](e,t,()=>{})}[Tu](e){if(this[yo](e),!this[_i]){let s=this[ur](this.cwd,this.dmode);if(s)return this[De](s,e);this[_i]=!0}if(e.absolute!==this.cwd){let s=Qe(Gt.dirname(e.absolute));if(s!==this.cwd){let o=this[ur](s,this.dmode);if(o)return this[De](o,e)}}let[t,n]=mo(()=>Q.lstatSync(e.absolute));if(n&&(this.keep||this.newer&&n.mtime>e.mtime))return this[Au](e);if(t||this[Cu](e,n))return this[at](null,e);if(n.isDirectory()){if(e.type==="Directory"){let o=!this.noChmod&&e.mode&&(n.mode&4095)!==e.mode,[a]=o?mo(()=>{Q.chmodSync(e.absolute,e.mode)}):[];return this[at](a,e)}let[s]=mo(()=>Q.rmdirSync(e.absolute));this[at](s,e)}let[i]=e.absolute===this.cwd?[]:mo(()=>kx(e.absolute));this[at](i,e)}[Iu](e,t){let n=e.mode&4095||this.fmode,i=a=>{let c;try{Q.closeSync(s)}catch(l){c=l}(a||c)&&this[De](a||c,e),t()},s;try{s=Q.openSync(e.absolute,Ay(e.size),n)}catch(a){return i(a)}let o=this.transform&&this.transform(e)||e;o!==e&&(o.on("error",a=>this[De](a,e)),e.pipe(o)),o.on("data",a=>{try{Q.writeSync(s,a,0,a.length)}catch(c){i(c)}}),o.on("end",a=>{let c=null;if(e.mtime&&!this.noMtime){let l=e.atime||new Date,u=e.mtime;try{Q.futimesSync(s,l,u)}catch(f){try{Q.utimesSync(e.absolute,l,u)}catch{c=f}}}if(this[yi](e)){let l=this[Ei](e),u=this[gi](e);try{Q.fchownSync(s,l,u)}catch(f){try{Q.chownSync(e.absolute,l,u)}catch{c=c||f}}}i(c)})}[Nu](e,t){let n=e.mode&4095||this.dmode,i=this[ur](e.absolute,n);if(i){this[De](i,e),t();return}if(e.mtime&&!this.noMtime)try{Q.utimesSync(e.absolute,e.atime||new Date,e.mtime)}catch{}if(this[yi](e))try{Q.chownSync(e.absolute,this[Ei](e),this[gi](e))}catch{}t(),e.resume()}[ur](e,t){try{return Iy.sync(Qe(e),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:t})}catch(n){return n}}[Eo](e,t,n,i){try{Q[n+"Sync"](t,e.absolute),i(),e.resume()}catch(s){return this[De](s,e)}}};vi.Sync=Du;Dy.exports=vi});var Fy=E((LD,Uy)=>{"use strict";var Ux=cn(),go=ku(),Ly=require("fs"),Py=xn(),ky=require("path"),Lu=yn();Uy.exports=(r,e,t)=>{typeof r=="function"?(t=r,e=null,r={}):Array.isArray(r)&&(e=r,r={}),typeof e=="function"&&(t=e,e=null),e?e=Array.from(e):e=[];let n=Ux(r);if(n.sync&&typeof t=="function")throw new TypeError("callback not supported for sync tar functions");if(!n.file&&typeof t=="function")throw new TypeError("callback only supported with file option");return e.length&&Fx(n,e),n.file&&n.sync?Mx(n):n.file?qx(n,t):n.sync?Bx(n):jx(n)};var Fx=(r,e)=>{let t=new Map(e.map(s=>[Lu(s),!0])),n=r.filter,i=(s,o)=>{let a=o||ky.parse(s).root||".",c=s===a?!1:t.has(s)?t.get(s):i(ky.dirname(s),a);return t.set(s,c),c};r.filter=n?(s,o)=>n(s,o)&&i(Lu(s)):s=>i(Lu(s))},Mx=r=>{let e=new go.Sync(r),t=r.file,n=Ly.statSync(t),i=r.maxReadSize||16*1024*1024;new Py.ReadStreamSync(t,{readSize:i,size:n.size}).pipe(e)},qx=(r,e)=>{let t=new go(r),n=r.maxReadSize||16*1024*1024,i=r.file,s=new Promise((o,a)=>{t.on("error",a),t.on("close",o),Ly.stat(i,(c,l)=>{if(c)a(c);else{let u=new Py.ReadStream(i,{readSize:n,size:l.size});u.on("error",a),u.pipe(t)}})});return e?s.then(e,e):s},Bx=r=>new go.Sync(r),jx=r=>new go(r)});var My=E(fe=>{"use strict";fe.c=fe.create=_m();fe.r=fe.replace=mu();fe.t=fe.list=so();fe.u=fe.update=Cm();fe.x=fe.extract=Fy();fe.Pack=Hs();fe.Unpack=ku();fe.Parse=io();fe.ReadEntry=Ts();fe.WriteEntry=$c();fe.Header=mn();fe.Pax=Is();fe.types=xc()});var By,ke,$r,jy,qy,_o,Gr,lr,bo=q(()=>{"use strict";By=require("crypto"),ke=require("fs"),$r=vr(require("path")),jy=require("path");_t();re();kt();Zr();qy=Ya(),_o=My(),{output:Gr}=Y(),lr=class{constructor(e,t,n,i){this.encryption=e;this.errorReporter=t;this.context=i;this.storedHashes=[];this.axiosConfigBuilder=e=>e;if(n.customProxyConfigPath){let{fileServerProxyConfig:s}=require((0,jy.join)(process.cwd(),n.customProxyConfigPath));this.axiosConfigBuilder=s??this.axiosConfigBuilder}}async retrieve(e,t,n){process.env.NX_CLOUD_DEBUG_URLS=="true"&&Gr.note({title:`Nx Cloud: Downloading ${e}`,bodyLines:[`RETRIEVAL URL: ${t}`]});let i=this.createFileName(e,n),s=this.createCommitFilePath(e,n);try{await this.downloadFile(t,i,s),this.createCommitFile(s),P&&Gr.note({title:`Nx Cloud: Downloaded ${e}`})}catch(o){let a=o.message||o.toString(),c=`Failed to download or untar the cached artifacts for ${e}. Context: ${this.context}. Error: ${a}.`;throw(this.context==="dte-agent"||this.context==="dte-main")&&(Gr.note({title:`An error occurred while trying to download artifacts in the DTE context. Hash: ${e}.`,bodyLines:["- Please update the nx-cloud package to the latest version.","- Please update the nx package to 15.8.9 or higher. You can do it without updating the plugins.","- If you are not able to update the nx package, and you are passing --configuration to a run-many or an affected command, define that configuration for all the projects."]}),process.env.NX_CLOUD_DEBUG_URLS=="true"&&Gr.note({title:`URL: ${e}`})),await this.errorReporter.reportError(c),new Error(c)}}async store(e,t,n){process.env.NX_CLOUD_DEBUG_URLS=="true"&&Gr.note({title:`Nx Cloud: Storing ${e}`,bodyLines:[`STORAGE URL: ${t}`]});let i;if(process.env.NRWL_INTERNAL_TAR_DEBUG){let o=1,a=!1,c=[];for(;o<=3&&!a;){i=await this.createFile(e,n);let l=`/tmp/${e}/attempt${o}`;(0,ke.mkdirSync)(l,{recursive:!0});try{let u=(0,ke.createReadStream)(i).pipe(_o.x({cwd:l}));await this.convertStreamIntoPromise(u),a=!0}catch(u){console.error(u),await Ge(5e3)}c.push({attempt:o,success:a}),o++}if(c.some(l=>!l.success)){console.error(JSON.stringify(c,null,2));let l=c.filter(u=>!u.success).map(u=>u.attempt).join(", ");throw new Error(`Untar failed for hash ${e} in attempts ${l} out of ${c.length}`)}}else i=await this.createFile(e,n);await this.uploadFile(t,i),this.storedHashes.push(e),P&&Gr.note({title:`Nx Cloud: Stored ${e}`})}createFileName(e,t){return $r.join(t,`${e}.tar.gz`)}async downloadFile(e,t,n){var o;let i=Ce("retrieveFile"),s;try{let a=new URL(e),c=a.origin+a.pathname,l={};for(let[u,f]of a.searchParams.entries())l[u]=f;s=await ce(()=>qy(c,this.axiosConfigBuilder({method:"GET",responseType:"stream",maxContentLength:gt?Jn:Zn,maxBodyLength:gt?Jn:Zn,timeout:gt?Yn:6e4,params:l}))),i.recordMetric({...ne(s),payloadSize:s.data.headers["content-length"]})}catch(a){throw i.recordMetric((o=a==null?void 0:a.axiosException)!=null&&o.response?ne(a.axiosException.response):Ie),a}if((0,ke.existsSync)(t)){let a=0;for(;a++<50;){if((0,ke.existsSync)(n))return;await Ge(500)}}if(this.encryption.hasEncryption()){await new Promise(c=>{s.data.pipe((0,ke.createWriteStream)(t)).on("close",()=>c(null))}),this.encryption.decryptFile(t);let a=(0,ke.createReadStream)(t).pipe(_o.x({cwd:$r.dirname(t)}));return this.convertStreamIntoPromise(a)}else{let a=s.data.pipe(_o.x({cwd:$r.dirname(t)}));return this.convertStreamIntoPromise(a)}}convertStreamIntoPromise(e){return new Promise((t,n)=>{e.on("error",i=>{i.tarCode==="TAR_ABORT"&&i.message.indexOf("incorrect header check")>-1?(console.warn("FileStorage: Decompression OK, Trailing garbage ignored."),t(null)):n(i)}),e.on("close",()=>t(null))})}createCommitFile(e){(0,ke.writeFileSync)(e,"true")}createCommitFilePath(e,t){return $r.join(t,`${e}.commit`)}async createFile(e,t){let n=this.createFileName(e,t);try{(0,ke.unlinkSync)($r.join(t,e,"source"))}catch{}return await _o.c({gzip:!0,file:n,cwd:t},[e]),this.encryption.hasEncryption()&&this.encryption.encryptFile(n),n}async uploadFile(e,t){var a;process.env.NX_CLOUD_ECONNABORTED_LOGGING=="true"&&Gr.note({title:`Attempting to upload file with path: ${t}`});let n=Ce("storeFile"),i=(0,ke.readFileSync)(t),s=this.generateMD5(i),o=this.getFileUploadHeaders(e,s);try{let c=await ce(()=>qy(e,this.axiosConfigBuilder({method:"PUT",data:i,headers:o,maxContentLength:gt?Jn:Zn,maxBodyLength:gt?Jn:Zn,timeout:gt?Yn:12e4})));n.recordMetric({...ne(c),payloadSize:c.config.headers["Content-Length"]})}catch(c){if(c.message&&c.message.includes("RetentionPolicyNotMet"))return;throw n.recordMetric((a=c==null?void 0:c.axiosException)!=null&&a.response?ne(c.axiosException.response):Ie),c}}generateMD5(e){let t=(0,By.createHash)("md5");return t.update(e),t.digest("base64")}getFileUploadHeaders(e,t){let n=e.includes("/file/"),i={"Content-Type":"application/octet-stream","x-ms-blob-type":"BlockBlob"};return n&&(i["Content-MD5"]=t),i}}});var vo,Gy=q(()=>{"use strict";re();ii();vo=class{constructor(e,t,n){this.runContext=e;this.taskExecutions=t;this.distributedExecutionId=n}printCacheHitsMessage(){if(ut(this.distributedExecutionId)||!this.runContext.runUrl)return;let e=!!this.taskExecutions.find(s=>s.status!==0),t=!!this.taskExecutions.find(s=>s.cacheStatus==="cache-miss"),n=this.taskExecutions.filter(s=>this.runContext.statuses[s.hash]==="remote-cache-hit").map(s=>s.projectName),i=[];if(e)i.push(`View structured, searchable error logs at ${this.runContext.runUrl}`);else if(t)i.push(`View logs and investigate cache misses at ${this.runContext.runUrl}`);else if(n.length>0){let s=n.length===1?n[0]:`${n.length} tasks`;i.push(`Nx Cloud made it possible to reuse ${s}: ${this.runContext.runUrl}`)}else this.runContext.runUrl&&i.push(`View logs and run details at ${this.runContext.runUrl}`);i.length>0&&Kt(i.join(" "))}}});var Gx,An,Pu=q(()=>{"use strict";ii();({output:Gx}=Y()),An=class{constructor(e){this.options=e;this.cacheError=null;this.apiError=null;this.message=null}get anyErrors(){return this.cacheError||this.apiError}printMessages(){if(this.anyErrors){let e=[];this.cacheError&&e.push(`- ${this.cacheError}`),this.apiError&&this.apiError!==this.cacheError&&e.push(`- ${this.apiError}`),Gx.warn({title:"Nx Cloud Problems",bodyLines:e})}this.message&&Kt(this.message)}extractErrorMessage(e,t){if(e.code==="ECONNABORTED")return process.env.NX_CLOUD_ECONNABORTED_LOGGING=="true"&&(console.log("[NX CLOUD DEBUG] Request config without `data`"),delete e.config.data,console.log(JSON.stringify(e.config,null,2))),`Cannot connect to Nx Cloud (scope: ${t}, code: ${e.code}). Try invoking the command with the NX_CLOUD_NO_TIMEOUTS env variable set to 'true'.`;if(e.code==="ECONNREFUSED"||e.code==="EAI_AGAIN"||e.code==="ENOTFOUND"||e.code==="EPROTO")return`Cannot connect to Nx Cloud (scope: ${t}, code: ${e.code}).`;if(e.response&&e.response.status===401)return e.response.data.message?e.response.data.message:e.response.data;if(e.response&&e.response.status===402)return this.options.showUsageWarnings===!1||this.options.showUsageWarnings===void 0?null:e.response.data.message?e.response.data.message:e.response.data;{let n="";e.response&&e.response.data&&e.response.data.message?n=`. ${e.response.data.message}`:e.response&&e.response.data&&(n=`. ${e.response.data}`);let i=e.code?` (code: ${e.code})`:"";return`${e.message}${n}${i}`}}}});var fr,So=q(()=>{"use strict";fr=class{constructor(e=[]){this.normalizedMaskedProperties=[];this.normalizedMaskedProperties=Array.from(new Set(e)).map(this.toCamelCase)}obfuscate(e){return this.normalizedMaskedProperties.length&&(this.normalizedMaskedProperties.forEach(n=>{let i=new RegExp(`(--${n}=)[\\S]*`);e=e.replace(i,"$1********")}),this.normalizedMaskedProperties.filter(n=>n in process.env).map(n=>process.env[n]).forEach(n=>{e=e.replace(n,"********")})),e}toCamelCase(e){return e.indexOf("-")>1?e.toLowerCase().replace(/-(.)/g,(t,n)=>n.toUpperCase()):e}}});function Dn(r){return r.overrides.__overrides_unparsed__?r.overrides.__overrides_unparsed__.join(" "):Uu(r.overrides).join(" ")}function Uu(r){let e=[];for(let t of Object.keys(r)){let n=r[t];$y(t,n,e)}return e}function $y(r,e,t){if(r==="_")t.push(...e);else if(e===!0)t.push(`--${r}`);else if(e===!1)t.push(`--no-${r}`);else if(Array.isArray(e))e.forEach(n=>$y(r,n,t));else if(typeof e=="string"&&$x(e)){let n=e.replace(/"/g,String.raw`\"`);t.push(`--${r}="${n}"`)}else e!=null&&t.push(`--${r}=${e}`)}function $x(r){return r.includes(" ")||r.includes("{")||r.includes('"')}var Si=q(()=>{"use strict"});function wo(r,e,t,n,i){let s;r?r.startsWith("./")?s=(0,qu.join)(Hy,r):s=r:s=(0,qu.join)(Hy,"node_modules",".cache","nx");try{let o=Wx(s,t),a=e.obfuscate(o);if(fh)return a;let c=n==="cache-miss"?i===0?zx:Hx:Vx;return a.length>c?`TRUNCATED

${a.slice(a.length-c)}`:a}catch(o){return process.env.NX_VERBOSE_LOGGING==="true"&&console.error(o),""}}function Wx(r,e){try{return(0,Fu.readFileSync)(Mu.join(r,"terminalOutputs",e)).toString()}catch{try{return(0,Fu.readFileSync)(Mu.join(r,e,"terminalOutput")).toString()}catch{return""}}}var Fu,Mu,qu,Hy,Hx,zx,Vx,Bu=q(()=>{"use strict";Fu=require("fs"),Mu=vr(require("path")),qu=require("path");re();({workspaceRoot:Hy}=Y()),Hx=2e5,zx=2e4,Vx=2e4});var zy,Ro,Vy=q(()=>{"use strict";zy=require("crypto");Si();Bu();Ro=class{constructor(e,t,n,i,s,o){this.runContext=e;this.cacheDirectory=t;this.collectTerminalOutput=n;this.cacheableOperations=i;this.outputObfuscator=s;this.tasks=o}scheduleTask(e){this.runContext.scheduledTasks.push(e)}startTask(e){this.tasks.push({taskId:e.id,startTime:new Date().toISOString(),target:e.target.target,projectName:e.target.project,hash:e.hash,hashDetails:this.cleanUpHashDetails(e.hashDetails),params:Dn(e),uploadedToStorage:!1})}endTasks(e){for(let t of e){let n,i=t.status==="remote-cache",s=t.status==="cache",o=t.status==="local-cache"||t.status==="local-cache-kept-existing"||s;this.runContext.statuses[t.task.hash]?n=this.runContext.statuses[t.task.hash]:i?n="remote-cache-hit":o?n="local-cache-hit":n="cache-miss",this.updateStartedTask(t,n)}}endCommand(){}updateStartedTask(e,t){let n=this.tasks.find(i=>i.taskId===e.task.id);if(!n)throw new Error(`Cannot find task ${e.task.id}`);e!=null&&e.startTime&&(e!=null&&e.endTime)?(n.startTime=new Date(e.startTime).toISOString(),n.endTime=new Date(e.endTime).toISOString()):n.endTime=new Date().toISOString(),n.status=e.code,n.params=this.outputObfuscator.obfuscate(n.params),n.cacheStatus=t,this.collectTerminalOutput&&(n.terminalOutput=this.getTerminalOutput(e.task.hash,n.cacheStatus,e.code))}getTerminalOutput(e,t,n){return wo(this.cacheDirectory,this.outputObfuscator,e,t,n)}cleanUpHashDetails(e){let t={},n=[];for(let i of Object.keys(e.nodes))i.startsWith("npm:")?n.push(e.nodes[i]):t[i]=e.nodes[i];if(n.sort(),n.length>0){let i=(0,zy.createHash)("md5");i.update(n.join("|")),t.npmDependencies=i.digest("base64")}return{nodes:t,runtime:e.runtime,implicitDeps:e.implicitDeps}}}});var ju,xo,Wy=q(()=>{"use strict";re();({output:ju}=Y()),xo=class{constructor(e,t,n,i,s,o){this.messages=e;this.api=t;this.runContext=n;this.fileStorage=i;this.distributedExecutionId=s;this.storeInCurrentProcess=o;this.storeRequests=[];this.delayedStoreRequests=[]}async retrieve(e,t){if(this.messages.cacheError)return!1;let n=await this.hashUrls(e);if(!n||!n.get)return P&&ju.note({title:`Nx Cloud: Cache miss ${e}.`}),this.runContext.statuses[e]="cache-miss",!1;try{return await this.fileStorage.retrieve(e,n.get,t),this.runContext.statuses[e]="remote-cache-hit",!0}catch(i){let s=i.axiosException??i;return s.response&&s.response.status===404?P&&ju.note({title:`Nx Cloud: Cache miss ${e}. Status 404.`}):this.messages.cacheError=this.messages.extractErrorMessage(s,"storage"),this.runContext.statuses[e]="cache-miss",!1}}async store(e,t){if(this.messages.cacheError)return!1;let n=Promise.resolve().then(async()=>{let i=await this.hashUrls(e);if(!i)return!1;if(!i.put)return P&&ju.note({title:`Nx Cloud: Skipping storing ${e}.`,bodyLines:["There are several reasons why this can happen.","Maybe you are using a read-only token or the artifact has already being uploaded."]}),!0;if(!this.storeInCurrentProcess)return this.delayedStoreRequests.push({hash:e,url:i.put}),!0;try{return await this.fileStorage.store(e,i.put,t),!0}catch(s){let o=s.axiosException??s;return this.messages.cacheError=this.messages.extractErrorMessage(o,"storage"),!1}});return this.storeRequests.push(n),n}async hashUrls(e){if(e in this.runContext.requests){let t=(await this.runContext.requests[e])[e];return this.setTaskArtifactIdOnRunContext(e,t==null?void 0:t.artifactId),t==null?void 0:t.artifactUrls}else{let t=this.runContext.scheduledTasks.filter(s=>!this.runContext.requests[s.hash]).map(s=>s.hash);t.indexOf(e)===-1&&t.push(e);let n=this.api.startRun(this.distributedExecutionId,t);t.forEach(s=>{this.runContext.requests[s]=n});let i=(await n)[e];return this.setTaskArtifactIdOnRunContext(e,i==null?void 0:i.artifactId),i==null?void 0:i.artifactUrls}}async waitForStoreRequestsToComplete(){if(!await Promise.all(this.storeRequests).then(t=>t.reduce((n,i)=>n&&i,!0)))throw new Error("Error when storing artifacts")}setTaskArtifactIdOnRunContext(e,t){let n=this.runContext.allTasks.find(i=>i.hash===e);if(n===void 0)throw Error("Could not find task with hash $hash");n.artifactId=t}}});function hr(){for(let r of Object.values(Xx))if(r.detectorFn(process.env)){let e=r.contextRetrieverFn(process.env);return P&&console.log(JSON.stringify(e,null,2)),{...e,inferredFromTaskRunner:!0}}return P&&console.log("[Nx Cloud] Did not identify a VCS platform."),null}function Kx(r){return r.CIRCLECI==="true"}function Yx(r){P&&console.log("[Nx Cloud] Detected Env: CircleCI");let e=n=>{if(n.CIRCLE_PR_NUMBER!==void 0)return n.CIRCLE_PR_NUMBER;if(n.CIRCLE_PULL_REQUEST!==void 0){let i=n.CIRCLE_PULL_REQUEST.split("/");return i[i.length-1]}return n.CIRCLE_BRANCH!==void 0?n.CIRCLE_BRANCH:"unknown"},t=n=>n.CIRCLE_USERNAME!==void 0?n.CIRCLE_USERNAME:n.CIRCLE_PR_USERNAME?n.CIRCLE_PR_USERNAME:null;return{branch:e(r),ref:r.CIRCLE_BRANCH??null,title:$u(),headSha:r.CIRCLE_SHA1??"unknown",baseSha:null,commitLink:r.CIRCLE_PULL_REQUEST??null,author:t(r),authorUrl:null,authorAvatarUrl:null,repositoryUrl:r.CIRCLE_REPOSITORY_URL??null}}function Jx(r){return r.TRAVIS==="true"}function Zx(r){return P&&console.log("[Nx Cloud] Detected Env: TravisCI"),{branch:(t=>t.TRAVIS_EVENT_TYPE==="pull_request"?t.TRAVIS_PULL_REQUEST:t.TRAVIS_BRANCH)(r),ref:null,title:r.TRAVIS_COMMIT_MESSAGE,headSha:r.TRAVIS_COMMIT??"unknown",baseSha:null,commitLink:null,author:Xy(),authorUrl:null,authorAvatarUrl:null,repositoryUrl:null}}function Qx(r){return r.GITHUB_ACTIONS==="true"}function eO(r){P&&console.log("[Nx Cloud] Detected Env: GitHub Actions");let e=i=>{if(i.GITHUB_REF){let s=i.GITHUB_REF.match(/refs\/pull\/(\d+)\/merge/);if(s)return s[1]}return i.GITHUB_HEAD_REF?i.GITHUB_HEAD_REF:i.GITHUB_REF_NAME?i.GITHUB_REF_NAME:"unknown"},t=i=>{let s=`${i.GITHUB_SERVER_URL}/${i.GITHUB_REPOSITORY}`;return i.GITHUB_EVENT_NAME==="pull_request"?`${s}/pull/${e(i)}`:`${s}/commit/${i.GITHUB_SHA}`},n=i=>i.GITHUB_HEAD_REF?i.GITHUB_HEAD_REF:i.GITHUB_REF?i.GITHUB_REF:null;return{branch:e(r),ref:n(r),title:$u(),headSha:r.GITHUB_SHA??"unknown",baseSha:null,commitLink:t(r),author:r.GITHUB_ACTOR??null,authorUrl:`https://github.com/${r.GITHUB_ACTOR}`,authorAvatarUrl:`https://avatars.githubusercontent.com/u/${r.GITHUB_ACTOR_ID}`,repositoryUrl:`${r.GITHUB_SERVER_URL}/${r.GITHUB_REPOSITORY}`}}function tO(r){return r.BITBUCKET_BUILD_NUMBER!=null}function rO(r){return P&&console.log("[Nx Cloud] Detected Env: BitBucket Pipelines"),{branch:r.BITBUCKET_PR_ID??r.BITBUCKET_BRANCH??"unknown",ref:null,title:$u(),headSha:r.BITBUCKET_COMMIT??"unknown",baseSha:null,commitLink:null,author:Xy(),authorUrl:null,authorAvatarUrl:null,repositoryUrl:r.BITBUCKET_GIT_HTTP_ORIGIN??null}}function nO(r){return r.BUILD_BUILDID!==void 0&&r.AGENT_NAME!==void 0}function iO(r){return P&&console.log("[Nx Cloud] Detected Env: Azure DevOps"),{branch:r.SYSTEM_PULLREQUEST_PULLREQUESTNUMBER??r.BUILD_SOURCEBRANCHNAME??"unknown",ref:null,title:r.BUILD_SOURCEVERSIONMESSAGE??null,headSha:tt()??"unknown",baseSha:null,commitLink:null,author:r.BUILD_REQUESTEDFOR??null,authorUrl:null,authorAvatarUrl:null,repositoryUrl:r.SYSTEM_PULLREQUEST_SOURCEREPOSITORYURI??r.BUILD_REPOSITORY_URI??null}}function sO(r){return r.GITLAB_CI==="true"}function oO(r){return P&&console.log("[Nx Cloud] Detected Env: GitLab Pipelines"),{branch:(t=>t.CI_MERGE_REQUEST_IID?t.CI_MERGE_REQUEST_IID:t.CI_COMMIT_BRANCH?t.CI_COMMIT_BRANCH:"unknown")(r),ref:r.CI_COMMIT_REF_NAME??null,title:r.CI_COMMIT_MESSAGE??null,headSha:tt()??"unknown",baseSha:null,commitLink:null,author:r.GITLAB_USER_NAME??null,authorUrl:null,authorAvatarUrl:null,repositoryUrl:r.CI_REPOSITORY_URL??null}}function $u(){try{return(0,Gu.execSync)("git log -1 --pretty=%B",{encoding:"utf-8"}).trim()}catch{return null}}function Xy(){try{return(0,Gu.execSync)("git log -1 --pretty=%aN",{encoding:"utf-8"}).trim()}catch{return null}}var Gu,Xx,Oo=q(()=>{"use strict";Gu=require("child_process");re();Xx={CIRCLE_CI:{detectorFn:Kx,contextRetrieverFn:Yx},TRAVIS_CI:{detectorFn:Jx,contextRetrieverFn:Zx},GITHUB_ACTIONS:{detectorFn:Qx,contextRetrieverFn:eO},BITBUCKET_PIPELINES:{detectorFn:tO,contextRetrieverFn:rO},AZURE_DEVOPS:{detectorFn:nO,contextRetrieverFn:iO},GITLAB_PIPELINES:{detectorFn:sO,contextRetrieverFn:oO}}});var Ky,Yy,Jy,To,kn,Hu=q(()=>{"use strict";Ky=require("fs"),Yy=require("util"),Jy=require("zlib");_t();re();Oo();kt();({output:To}=Y()),kn=class{constructor(e,t,n,i){this.messages=e;this.runContext=t;this.machineInfo=i;this.apiAxiosInstance=Te(n)}async startRun(e,t){var i;if(this.messages.apiError)return{};let n=Ce("startRun");try{let s={meta:{nxCloudVersion:this.nxCloudVersion()},branch:me(),runGroup:ve(),ciExecutionId:je(),ciExecutionEnv:xe(),distributedExecutionId:e,hashes:t,machineInfo:this.machineInfo,vcsContext:hr()};P&&To.note({title:"RunStart",bodyLines:[`
`+JSON.stringify(s,null,2)]});let o=await Za("RunStart duration",()=>ce(()=>this.apiAxiosInstance.post("/nx-cloud/v2/runs/start",s)));return n.recordMetric(ne(o)),o.data&&o.data.message&&(this.messages.message=o.data.message),!o.data||!o.data.artifacts?(this.messages.apiError=`Invalid Nx Cloud response: ${JSON.stringify(o.data)}`,{}):o.data.artifacts}catch(s){return n.recordMetric((i=s==null?void 0:s.axiosException)!=null&&i.response?ne(s.axiosException.response):Ie),this.messages.apiError=this.messages.extractErrorMessage(s,"api"),{}}}createReqBody(e,t,n,i){let s={meta:{nxCloudVersion:this.nxCloudVersion()},tasks:t,run:e,linkId:i,...n,machineInfo:this.machineInfo,vcsContext:hr()};return JSON.stringify(s)}async endRun(e,t,n,i){var l;if(this.messages.apiError)return!1;e.runGroup=null,e.branch=null;let s=this.createReqBody(e,t,n,i);s.length>20*1e3*1e3&&(s=this.createReqBody(e,t.map(u=>({...u,hashDetails:void 0})),n,i));let o=Buffer.from(s),a=await(0,Yy.promisify)(Jy.gzip)(o),c=Ce("endRun");try{if(P){let f=t.map(h=>({...h,terminalOutput:h.terminalOutput?`${h.terminalOutput.slice(0,20)}...`:void 0}));To.note({title:"RunEnd. Completed tasks",bodyLines:[`
`+JSON.stringify(f,null,2)]})}let u=await Za("RunEnd duration",()=>ce(()=>this.apiAxiosInstance.post("/nx-cloud/runs/end",a,{headers:{...this.apiAxiosInstance.defaults.headers,"Content-Encoding":"gzip","Content-Type":"application/octet-stream"}})));if(u){if(c.recordMetric(ne(u)),u.data&&u.data.runUrl&&u.data.status==="success")return this.runContext.runUrl=u.data.runUrl,!0;u.data&&u.data.status?this.messages.apiError=`Invalid end run response: ${JSON.stringify(u.data.message)}`:u.data&&typeof u.data=="string"?u.data!=="success"&&(this.messages.apiError=`Invalid end run response: ${JSON.stringify(u.data)}`):this.messages.apiError=`Invalid end run response: ${JSON.stringify(u.data)}`,P&&To.note({title:"Invalid end run response",bodyLines:[JSON.stringify(u.data,null,2)]})}else To.error({title:"Nx Cloud: Unknown Error Occurred",bodyLines:["Run completion responded with `undefined`.","Run Details:",JSON.stringify(e,null,2),"Stack Trace:",JSON.stringify(new Error().stack,null,2)]});return!1}catch(u){c.recordMetric((l=u==null?void 0:u.axiosException)!=null&&l.response?ne(u.axiosException.response):Ie);let f=u.axiosException??u;return this.messages.apiError=this.messages.extractErrorMessage(f,"api"),!1}}nxCloudVersion(){try{let e=JSON.parse((0,Ky.readFileSync)("package.json").toString());return e.devDependencies["nx-cloud"]||e.devDependencies["@nrwl/nx-cloud"]}catch{return"unknown"}}}});function Co(){let r="";for(let e=0;e<10;++e)r+=Zy[Math.floor(Math.random()*Zy.length)];return r}var Qy,aO,cO,Zy,zu=q(()=>{"use strict";Qy="ABCDEFGHIJKLMNOPQRSTUVWXYZ",aO="0123456789",cO=Qy.toLowerCase(),Zy=Qy+cO+aO});var dt=E(qe=>{"use strict";var Vu=require("path");wr();try{try{let r;try{r=ie("nx/src/utils/app-root").workspaceRoot}catch{r=ie("nx/src/utils/workspace-root").workspaceRoot}let{getDependencyConfigs:e}=ie("nx/src/tasks-runner/utils"),t=ie("nx/tasks-runners/default").default,{CompositeLifeCycle:n}=ie("nx/src/tasks-runner/life-cycle"),i=null;try{i=ie("nx/src/index").initTasksRunner}catch{}let s;try{s=ie("nx/src/devkit-exports").cacheDir}catch{try{s=ie("nx/src/utils/cache-directory").cacheDir}catch{s=(0,Vu.join)(r,"./node_modules/.cache/nx")}}let o=ie("nx/src/tasks-runner/utils").isCacheableTask;qe.cacheDirectory=s,qe.runnerReturnsPromise=!0,qe.tasksRunner=t,qe.CompositeLifeCycle=n,qe.getDependencyConfigs=e,qe.initTasksRunner=i,qe.isCacheableTask=o}catch{let{appRootPath:e}=ie("@nrwl/tao/src/utils/app-root"),{getDependencyConfigs:t}=ie("@nrwl/workspace/src/tasks-runner/utils"),{tasksRunnerV2:n}=ie("@nrwl/workspace/src/tasks-runner/tasks-runner-v2"),i;try{i=ie("@nrwl/workspace/src/tasks-runner/life-cycle").CompositeLifeCycle}catch{}let s=ie("@nrwl/workspace/src/tasks-runner/utils").isCacheableTask;qe.cacheDirectory=(0,Vu.join)(e,"./node_modules/.cache/nx"),qe.runnerReturnsPromise=!1,qe.tasksRunner=n,qe.CompositeLifeCycle=i,qe.getDependencyConfigs=t,qe.initTasksRunner=null,qe.isCacheableTask=s}}catch(r){process.env.NX_VERBOSE_LOGGING==="true"&&console.log(r),console.error("NX CLOUD ERROR"),console.error("---------------------------------------"),console.error("This version of Nx Cloud is incompatible with the @nrwl/* and @nx/* packages in your workspace, or Nx was not installed properly."),console.error(""),console.error("Verify your install step was successful, and if it was,"),console.error("match your @nrwl/nx-cloud version to the same major version of your @nx/* and @nrwl/* packages and try again."),console.error("---------------------------------------"),process.exit(1)}});var We=E(Wu=>{"use strict";Wu.fromCallback=function(r){return Object.defineProperty(function(){if(typeof arguments[arguments.length-1]=="function")r.apply(this,arguments);else return new Promise((e,t)=>{arguments[arguments.length]=(n,i)=>{if(n)return t(n);e(i)},arguments.length++,r.apply(this,arguments)})},"name",{value:r.name})};Wu.fromPromise=function(r){return Object.defineProperty(function(){let e=arguments[arguments.length-1];if(typeof e!="function")return r.apply(this,arguments);r.apply(this,arguments).then(t=>e(null,t),e)},"name",{value:r.name})}});var tE=E((hk,eE)=>{"use strict";var dr=require("constants"),uO=process.cwd,Io=null,lO=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return Io||(Io=uO.call(process)),Io};try{process.cwd()}catch{}typeof process.chdir=="function"&&(Xu=process.chdir,process.chdir=function(r){Io=null,Xu.call(process,r)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,Xu));var Xu;eE.exports=fO;function fO(r){dr.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&e(r),r.lutimes||t(r),r.chown=s(r.chown),r.fchown=s(r.fchown),r.lchown=s(r.lchown),r.chmod=n(r.chmod),r.fchmod=n(r.fchmod),r.lchmod=n(r.lchmod),r.chownSync=o(r.chownSync),r.fchownSync=o(r.fchownSync),r.lchownSync=o(r.lchownSync),r.chmodSync=i(r.chmodSync),r.fchmodSync=i(r.fchmodSync),r.lchmodSync=i(r.lchmodSync),r.stat=a(r.stat),r.fstat=a(r.fstat),r.lstat=a(r.lstat),r.statSync=c(r.statSync),r.fstatSync=c(r.fstatSync),r.lstatSync=c(r.lstatSync),r.chmod&&!r.lchmod&&(r.lchmod=function(u,f,h){h&&process.nextTick(h)},r.lchmodSync=function(){}),r.chown&&!r.lchown&&(r.lchown=function(u,f,h,d){d&&process.nextTick(d)},r.lchownSync=function(){}),lO==="win32"&&(r.rename=typeof r.rename!="function"?r.rename:function(u){function f(h,d,m){var b=Date.now(),p=0;u(h,d,function w(k){if(k&&(k.code==="EACCES"||k.code==="EPERM"||k.code==="EBUSY")&&Date.now()-b<6e4){setTimeout(function(){r.stat(d,function(O,C){O&&O.code==="ENOENT"?u(h,d,w):m(k)})},p),p<100&&(p+=10);return}m&&m(k)})}return Object.setPrototypeOf&&Object.setPrototypeOf(f,u),f}(r.rename)),r.read=typeof r.read!="function"?r.read:function(u){function f(h,d,m,b,p,w){var k;if(w&&typeof w=="function"){var O=0;k=function(C,L,T){if(C&&C.code==="EAGAIN"&&O<10)return O++,u.call(r,h,d,m,b,p,k);w.apply(this,arguments)}}return u.call(r,h,d,m,b,p,k)}return Object.setPrototypeOf&&Object.setPrototypeOf(f,u),f}(r.read),r.readSync=typeof r.readSync!="function"?r.readSync:function(u){return function(f,h,d,m,b){for(var p=0;;)try{return u.call(r,f,h,d,m,b)}catch(w){if(w.code==="EAGAIN"&&p<10){p++;continue}throw w}}}(r.readSync);function e(u){u.lchmod=function(f,h,d){u.open(f,dr.O_WRONLY|dr.O_SYMLINK,h,function(m,b){if(m){d&&d(m);return}u.fchmod(b,h,function(p){u.close(b,function(w){d&&d(p||w)})})})},u.lchmodSync=function(f,h){var d=u.openSync(f,dr.O_WRONLY|dr.O_SYMLINK,h),m=!0,b;try{b=u.fchmodSync(d,h),m=!1}finally{if(m)try{u.closeSync(d)}catch{}else u.closeSync(d)}return b}}function t(u){dr.hasOwnProperty("O_SYMLINK")&&u.futimes?(u.lutimes=function(f,h,d,m){u.open(f,dr.O_SYMLINK,function(b,p){if(b){m&&m(b);return}u.futimes(p,h,d,function(w){u.close(p,function(k){m&&m(w||k)})})})},u.lutimesSync=function(f,h,d){var m=u.openSync(f,dr.O_SYMLINK),b,p=!0;try{b=u.futimesSync(m,h,d),p=!1}finally{if(p)try{u.closeSync(m)}catch{}else u.closeSync(m)}return b}):u.futimes&&(u.lutimes=function(f,h,d,m){m&&process.nextTick(m)},u.lutimesSync=function(){})}function n(u){return u&&function(f,h,d){return u.call(r,f,h,function(m){l(m)&&(m=null),d&&d.apply(this,arguments)})}}function i(u){return u&&function(f,h){try{return u.call(r,f,h)}catch(d){if(!l(d))throw d}}}function s(u){return u&&function(f,h,d,m){return u.call(r,f,h,d,function(b){l(b)&&(b=null),m&&m.apply(this,arguments)})}}function o(u){return u&&function(f,h,d){try{return u.call(r,f,h,d)}catch(m){if(!l(m))throw m}}}function a(u){return u&&function(f,h,d){typeof h=="function"&&(d=h,h=null);function m(b,p){p&&(p.uid<0&&(p.uid+=4294967296),p.gid<0&&(p.gid+=4294967296)),d&&d.apply(this,arguments)}return h?u.call(r,f,h,m):u.call(r,f,m)}}function c(u){return u&&function(f,h){var d=h?u.call(r,f,h):u.call(r,f);return d&&(d.uid<0&&(d.uid+=4294967296),d.gid<0&&(d.gid+=4294967296)),d}}function l(u){if(!u||u.code==="ENOSYS")return!0;var f=!process.getuid||process.getuid()!==0;return!!(f&&(u.code==="EINVAL"||u.code==="EPERM"))}}});var iE=E((dk,nE)=>{"use strict";var rE=require("stream").Stream;nE.exports=hO;function hO(r){return{ReadStream:e,WriteStream:t};function e(n,i){if(!(this instanceof e))return new e(n,i);rE.call(this);var s=this;this.path=n,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,i=i||{};for(var o=Object.keys(i),a=0,c=o.length;a<c;a++){var l=o[a];this[l]=i[l]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){s._read()});return}r.open(this.path,this.flags,this.mode,function(u,f){if(u){s.emit("error",u),s.readable=!1;return}s.fd=f,s.emit("open",f),s._read()})}function t(n,i){if(!(this instanceof t))return new t(n,i);rE.call(this),this.path=n,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,i=i||{};for(var s=Object.keys(i),o=0,a=s.length;o<a;o++){var c=s[o];this[c]=i[c]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=r.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}});var oE=E((pk,sE)=>{"use strict";sE.exports=pO;var dO=Object.getPrototypeOf||function(r){return r.__proto__};function pO(r){if(r===null||typeof r!="object")return r;if(r instanceof Object)var e={__proto__:dO(r)};else var e=Object.create(null);return Object.getOwnPropertyNames(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}),e}});var ge=E((mk,Ju)=>{"use strict";var ue=require("fs"),mO=tE(),yO=iE(),EO=oE(),No=require("util"),we,Do;typeof Symbol=="function"&&typeof Symbol.for=="function"?(we=Symbol.for("graceful-fs.queue"),Do=Symbol.for("graceful-fs.previous")):(we="___graceful-fs.queue",Do="___graceful-fs.previous");function gO(){}function uE(r,e){Object.defineProperty(r,we,{get:function(){return e}})}var Hr=gO;No.debuglog?Hr=No.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(Hr=function(){var r=No.format.apply(No,arguments);r="GFS4: "+r.split(/\n/).join(`
GFS4: `),console.error(r)});ue[we]||(aE=global[we]||[],uE(ue,aE),ue.close=function(r){function e(t,n){return r.call(ue,t,function(i){i||cE(),typeof n=="function"&&n.apply(this,arguments)})}return Object.defineProperty(e,Do,{value:r}),e}(ue.close),ue.closeSync=function(r){function e(t){r.apply(ue,arguments),cE()}return Object.defineProperty(e,Do,{value:r}),e}(ue.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){Hr(ue[we]),require("assert").equal(ue[we].length,0)}));var aE;global[we]||uE(global,ue[we]);Ju.exports=Ku(EO(ue));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!ue.__patched&&(Ju.exports=Ku(ue),ue.__patched=!0);function Ku(r){mO(r),r.gracefulify=Ku,r.createReadStream=L,r.createWriteStream=T;var e=r.readFile;r.readFile=t;function t(I,N,j){return typeof N=="function"&&(j=N,N=null),X(I,N,j);function X(V,J,B,K){return e(V,J,function($){$&&($.code==="EMFILE"||$.code==="ENFILE")?Ln([X,[V,J,B],$,K||Date.now(),Date.now()]):typeof B=="function"&&B.apply(this,arguments)})}}var n=r.writeFile;r.writeFile=i;function i(I,N,j,X){return typeof j=="function"&&(X=j,j=null),V(I,N,j,X);function V(J,B,K,$,U){return n(J,B,K,function(H){H&&(H.code==="EMFILE"||H.code==="ENFILE")?Ln([V,[J,B,K,$],H,U||Date.now(),Date.now()]):typeof $=="function"&&$.apply(this,arguments)})}}var s=r.appendFile;s&&(r.appendFile=o);function o(I,N,j,X){return typeof j=="function"&&(X=j,j=null),V(I,N,j,X);function V(J,B,K,$,U){return s(J,B,K,function(H){H&&(H.code==="EMFILE"||H.code==="ENFILE")?Ln([V,[J,B,K,$],H,U||Date.now(),Date.now()]):typeof $=="function"&&$.apply(this,arguments)})}}var a=r.copyFile;a&&(r.copyFile=c);function c(I,N,j,X){return typeof j=="function"&&(X=j,j=0),V(I,N,j,X);function V(J,B,K,$,U){return a(J,B,K,function(H){H&&(H.code==="EMFILE"||H.code==="ENFILE")?Ln([V,[J,B,K,$],H,U||Date.now(),Date.now()]):typeof $=="function"&&$.apply(this,arguments)})}}var l=r.readdir;r.readdir=f;var u=/^v[0-5]\./;function f(I,N,j){typeof N=="function"&&(j=N,N=null);var X=u.test(process.version)?function(B,K,$,U){return l(B,V(B,K,$,U))}:function(B,K,$,U){return l(B,K,V(B,K,$,U))};return X(I,N,j);function V(J,B,K,$){return function(U,H){U&&(U.code==="EMFILE"||U.code==="ENFILE")?Ln([X,[J,B,K],U,$||Date.now(),Date.now()]):(H&&H.sort&&H.sort(),typeof K=="function"&&K.call(this,U,H))}}}if(process.version.substr(0,4)==="v0.8"){var h=yO(r);w=h.ReadStream,O=h.WriteStream}var d=r.ReadStream;d&&(w.prototype=Object.create(d.prototype),w.prototype.open=k);var m=r.WriteStream;m&&(O.prototype=Object.create(m.prototype),O.prototype.open=C),Object.defineProperty(r,"ReadStream",{get:function(){return w},set:function(I){w=I},enumerable:!0,configurable:!0}),Object.defineProperty(r,"WriteStream",{get:function(){return O},set:function(I){O=I},enumerable:!0,configurable:!0});var b=w;Object.defineProperty(r,"FileReadStream",{get:function(){return b},set:function(I){b=I},enumerable:!0,configurable:!0});var p=O;Object.defineProperty(r,"FileWriteStream",{get:function(){return p},set:function(I){p=I},enumerable:!0,configurable:!0});function w(I,N){return this instanceof w?(d.apply(this,arguments),this):w.apply(Object.create(w.prototype),arguments)}function k(){var I=this;G(I.path,I.flags,I.mode,function(N,j){N?(I.autoClose&&I.destroy(),I.emit("error",N)):(I.fd=j,I.emit("open",j),I.read())})}function O(I,N){return this instanceof O?(m.apply(this,arguments),this):O.apply(Object.create(O.prototype),arguments)}function C(){var I=this;G(I.path,I.flags,I.mode,function(N,j){N?(I.destroy(),I.emit("error",N)):(I.fd=j,I.emit("open",j))})}function L(I,N){return new r.ReadStream(I,N)}function T(I,N){return new r.WriteStream(I,N)}var z=r.open;r.open=G;function G(I,N,j,X){return typeof j=="function"&&(X=j,j=null),V(I,N,j,X);function V(J,B,K,$,U){return z(J,B,K,function(H,le){H&&(H.code==="EMFILE"||H.code==="ENFILE")?Ln([V,[J,B,K,$],H,U||Date.now(),Date.now()]):typeof $=="function"&&$.apply(this,arguments)})}}return r}function Ln(r){Hr("ENQUEUE",r[0].name,r[1]),ue[we].push(r),Yu()}var Ao;function cE(){for(var r=Date.now(),e=0;e<ue[we].length;++e)ue[we][e].length>2&&(ue[we][e][3]=r,ue[we][e][4]=r);Yu()}function Yu(){if(clearTimeout(Ao),Ao=void 0,ue[we].length!==0){var r=ue[we].shift(),e=r[0],t=r[1],n=r[2],i=r[3],s=r[4];if(i===void 0)Hr("RETRY",e.name,t),e.apply(null,t);else if(Date.now()-i>=6e4){Hr("TIMEOUT",e.name,t);var o=t.pop();typeof o=="function"&&o.call(null,n)}else{var a=Date.now()-s,c=Math.max(s-i,1),l=Math.min(c*1.2,100);a>=l?(Hr("RETRY",e.name,t),e.apply(null,t.concat([i]))):ue[we].push(r)}Ao===void 0&&(Ao=setTimeout(Yu,0))}}});var Zu=E(Pn=>{"use strict";var _O=We().fromCallback,Tt=ge(),bO=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchown","lchmod","link","lstat","mkdir","mkdtemp","open","readFile","readdir","readlink","realpath","rename","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(r=>typeof Tt[r]=="function");Object.keys(Tt).forEach(r=>{r!=="promises"&&(Pn[r]=Tt[r])});bO.forEach(r=>{Pn[r]=_O(Tt[r])});Pn.exists=function(r,e){return typeof e=="function"?Tt.exists(r,e):new Promise(t=>Tt.exists(r,t))};Pn.read=function(r,e,t,n,i,s){return typeof s=="function"?Tt.read(r,e,t,n,i,s):new Promise((o,a)=>{Tt.read(r,e,t,n,i,(c,l,u)=>{if(c)return a(c);o({bytesRead:l,buffer:u})})})};Pn.write=function(r,e,...t){return typeof t[t.length-1]=="function"?Tt.write(r,e,...t):new Promise((n,i)=>{Tt.write(r,e,...t,(s,o,a)=>{if(s)return i(s);n({bytesWritten:o,buffer:a})})})}});var el=E((Ek,fE)=>{"use strict";var Qu=require("path");function lE(r){return r=Qu.normalize(Qu.resolve(r)).split(Qu.sep),r.length>0?r[0]:null}var vO=/[<>:"|?*]/;function SO(r){let e=lE(r);return r=r.replace(e,""),vO.test(r)}fE.exports={getRootPath:lE,invalidWin32Path:SO}});var dE=E((gk,hE)=>{"use strict";var wO=ge(),tl=require("path"),RO=el().invalidWin32Path,xO=parseInt("0777",8);function rl(r,e,t,n){if(typeof e=="function"?(t=e,e={}):(!e||typeof e!="object")&&(e={mode:e}),process.platform==="win32"&&RO(r)){let o=new Error(r+" contains invalid WIN32 path characters.");return o.code="EINVAL",t(o)}let i=e.mode,s=e.fs||wO;i===void 0&&(i=xO&~process.umask()),n||(n=null),t=t||function(){},r=tl.resolve(r),s.mkdir(r,i,o=>{if(!o)return n=n||r,t(null,n);switch(o.code){case"ENOENT":if(tl.dirname(r)===r)return t(o);rl(tl.dirname(r),e,(a,c)=>{a?t(a,c):rl(r,e,t,c)});break;default:s.stat(r,(a,c)=>{a||!c.isDirectory()?t(o,n):t(null,n)});break}})}hE.exports=rl});var mE=E((_k,pE)=>{"use strict";var OO=ge(),nl=require("path"),TO=el().invalidWin32Path,CO=parseInt("0777",8);function il(r,e,t){(!e||typeof e!="object")&&(e={mode:e});let n=e.mode,i=e.fs||OO;if(process.platform==="win32"&&TO(r)){let s=new Error(r+" contains invalid WIN32 path characters.");throw s.code="EINVAL",s}n===void 0&&(n=CO&~process.umask()),t||(t=null),r=nl.resolve(r);try{i.mkdirSync(r,n),t=t||r}catch(s){if(s.code==="ENOENT"){if(nl.dirname(r)===r)throw s;t=il(nl.dirname(r),e,t),il(r,e,t)}else{let o;try{o=i.statSync(r)}catch{throw s}if(!o.isDirectory())throw s}}return t}pE.exports=il});var et=E((bk,yE)=>{"use strict";var IO=We().fromCallback,sl=IO(dE()),ol=mE();yE.exports={mkdirs:sl,mkdirsSync:ol,mkdirp:sl,mkdirpSync:ol,ensureDir:sl,ensureDirSync:ol}});var al=E((vk,gE)=>{"use strict";var Le=ge(),EE=require("os"),ko=require("path");function NO(){let r=ko.join("millis-test-sync"+Date.now().toString()+Math.random().toString().slice(2));r=ko.join(EE.tmpdir(),r);let e=new Date(1435410243862);Le.writeFileSync(r,"https://github.com/jprichardson/node-fs-extra/pull/141");let t=Le.openSync(r,"r+");return Le.futimesSync(t,e,e),Le.closeSync(t),Le.statSync(r).mtime>1435410243e3}function AO(r){let e=ko.join("millis-test"+Date.now().toString()+Math.random().toString().slice(2));e=ko.join(EE.tmpdir(),e);let t=new Date(1435410243862);Le.writeFile(e,"https://github.com/jprichardson/node-fs-extra/pull/141",n=>{if(n)return r(n);Le.open(e,"r+",(i,s)=>{if(i)return r(i);Le.futimes(s,t,t,o=>{if(o)return r(o);Le.close(s,a=>{if(a)return r(a);Le.stat(e,(c,l)=>{if(c)return r(c);r(null,l.mtime>1435410243e3)})})})})})}function DO(r){if(typeof r=="number")return Math.floor(r/1e3)*1e3;if(r instanceof Date)return new Date(Math.floor(r.getTime()/1e3)*1e3);throw new Error("fs-extra: timeRemoveMillis() unknown parameter type")}function kO(r,e,t,n){Le.open(r,"r+",(i,s)=>{if(i)return n(i);Le.futimes(s,e,t,o=>{Le.close(s,a=>{n&&n(o||a)})})})}function LO(r,e,t){let n=Le.openSync(r,"r+");return Le.futimesSync(n,e,t),Le.closeSync(n)}gE.exports={hasMillisRes:AO,hasMillisResSync:NO,timeRemoveMillis:DO,utimesMillis:kO,utimesMillisSync:LO}});var cl=E((Sk,_E)=>{"use strict";_E.exports=function(r){if(typeof Buffer.allocUnsafe=="function")try{return Buffer.allocUnsafe(r)}catch{return new Buffer(r)}return new Buffer(r)}});var xE=E((wk,RE)=>{"use strict";var oe=ge(),$t=require("path"),PO=et().mkdirsSync,UO=al().utimesMillisSync,Lo=Symbol("notExist");function FO(r,e,t){typeof t=="function"&&(t={filter:t}),t=t||{},t.clobber="clobber"in t?!!t.clobber:!0,t.overwrite="overwrite"in t?!!t.overwrite:t.clobber,t.preserveTimestamps&&process.arch==="ia32"&&console.warn(`fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;

    see https://github.com/jprichardson/node-fs-extra/issues/269`);let n=wE(r,e);if(t.filter&&!t.filter(r,e))return;let i=$t.dirname(e);return oe.existsSync(i)||PO(i),bE(n,r,e,t)}function bE(r,e,t,n){if(!(n.filter&&!n.filter(e,t)))return MO(r,e,t,n)}function MO(r,e,t,n){let s=(n.dereference?oe.statSync:oe.lstatSync)(e);if(s.isDirectory())return GO(s,r,e,t,n);if(s.isFile()||s.isCharacterDevice()||s.isBlockDevice())return qO(s,r,e,t,n);if(s.isSymbolicLink())return zO(r,e,t,n)}function qO(r,e,t,n,i){return e===Lo?vE(r,t,n,i):BO(r,t,n,i)}function BO(r,e,t,n){if(n.overwrite)return oe.unlinkSync(t),vE(r,e,t,n);if(n.errorOnExist)throw new Error(`'${t}' already exists`)}function vE(r,e,t,n){return typeof oe.copyFileSync=="function"?(oe.copyFileSync(e,t),oe.chmodSync(t,r.mode),n.preserveTimestamps?UO(t,r.atime,r.mtime):void 0):jO(r,e,t,n)}function jO(r,e,t,n){let s=cl()(65536),o=oe.openSync(e,"r"),a=oe.openSync(t,"w",r.mode),c=0;for(;c<r.size;){let l=oe.readSync(o,s,0,65536,c);oe.writeSync(a,s,0,l),c+=l}n.preserveTimestamps&&oe.futimesSync(a,r.atime,r.mtime),oe.closeSync(o),oe.closeSync(a)}function GO(r,e,t,n,i){if(e===Lo)return $O(r,t,n,i);if(e&&!e.isDirectory())throw new Error(`Cannot overwrite non-directory '${n}' with directory '${t}'.`);return SE(t,n,i)}function $O(r,e,t,n){return oe.mkdirSync(t),SE(e,t,n),oe.chmodSync(t,r.mode)}function SE(r,e,t){oe.readdirSync(r).forEach(n=>HO(n,r,e,t))}function HO(r,e,t,n){let i=$t.join(e,r),s=$t.join(t,r),o=wE(i,s);return bE(o,i,s,n)}function zO(r,e,t,n){let i=oe.readlinkSync(e);if(n.dereference&&(i=$t.resolve(process.cwd(),i)),r===Lo)return oe.symlinkSync(i,t);{let s;try{s=oe.readlinkSync(t)}catch(o){if(o.code==="EINVAL"||o.code==="UNKNOWN")return oe.symlinkSync(i,t);throw o}if(n.dereference&&(s=$t.resolve(process.cwd(),s)),ul(i,s))throw new Error(`Cannot copy '${i}' to a subdirectory of itself, '${s}'.`);if(oe.statSync(t).isDirectory()&&ul(s,i))throw new Error(`Cannot overwrite '${s}' with '${i}'.`);return VO(i,t)}}function VO(r,e){return oe.unlinkSync(e),oe.symlinkSync(r,e)}function ul(r,e){let t=$t.resolve(r).split($t.sep),n=$t.resolve(e).split($t.sep);return t.reduce((i,s,o)=>i&&n[o]===s,!0)}function WO(r,e){let t=oe.statSync(r),n;try{n=oe.statSync(e)}catch(i){if(i.code==="ENOENT")return{srcStat:t,destStat:Lo};throw i}return{srcStat:t,destStat:n}}function wE(r,e){let{srcStat:t,destStat:n}=WO(r,e);if(n.ino&&n.ino===t.ino)throw new Error("Source and destination must not be the same.");if(t.isDirectory()&&ul(r,e))throw new Error(`Cannot copy '${r}' to a subdirectory of itself, '${e}'.`);return n}RE.exports=FO});var ll=E((Rk,OE)=>{"use strict";OE.exports={copySync:xE()}});var Ct=E((xk,CE)=>{"use strict";var XO=We().fromPromise,TE=Zu();function KO(r){return TE.access(r).then(()=>!0).catch(()=>!1)}CE.exports={pathExists:XO(KO),pathExistsSync:TE.existsSync}});var ME=E((Ok,FE)=>{"use strict";var he=ge(),Ht=require("path"),YO=et().mkdirs,JO=Ct().pathExists,ZO=al().utimesMillis,Po=Symbol("notExist");function QO(r,e,t,n){typeof t=="function"&&!n?(n=t,t={}):typeof t=="function"&&(t={filter:t}),n=n||function(){},t=t||{},t.clobber="clobber"in t?!!t.clobber:!0,t.overwrite="overwrite"in t?!!t.overwrite:t.clobber,t.preserveTimestamps&&process.arch==="ia32"&&console.warn(`fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;

    see https://github.com/jprichardson/node-fs-extra/issues/269`),UE(r,e,(i,s)=>i?n(i):t.filter?AE(IE,s,r,e,t,n):IE(s,r,e,t,n))}function IE(r,e,t,n,i){let s=Ht.dirname(t);JO(s,(o,a)=>{if(o)return i(o);if(a)return fl(r,e,t,n,i);YO(s,c=>c?i(c):fl(r,e,t,n,i))})}function AE(r,e,t,n,i,s){Promise.resolve(i.filter(t,n)).then(o=>o?e?r(e,t,n,i,s):r(t,n,i,s):s(),o=>s(o))}function fl(r,e,t,n,i){return n.filter?AE(NE,r,e,t,n,i):NE(r,e,t,n,i)}function NE(r,e,t,n,i){(n.dereference?he.stat:he.lstat)(e,(o,a)=>{if(o)return i(o);if(a.isDirectory())return nT(a,r,e,t,n,i);if(a.isFile()||a.isCharacterDevice()||a.isBlockDevice())return eT(a,r,e,t,n,i);if(a.isSymbolicLink())return oT(r,e,t,n,i)})}function eT(r,e,t,n,i,s){return e===Po?DE(r,t,n,i,s):tT(r,t,n,i,s)}function tT(r,e,t,n,i){if(n.overwrite)he.unlink(t,s=>s?i(s):DE(r,e,t,n,i));else return n.errorOnExist?i(new Error(`'${t}' already exists`)):i()}function DE(r,e,t,n,i){return typeof he.copyFile=="function"?he.copyFile(e,t,s=>s?i(s):kE(r,t,n,i)):rT(r,e,t,n,i)}function rT(r,e,t,n,i){let s=he.createReadStream(e);s.on("error",o=>i(o)).once("open",()=>{let o=he.createWriteStream(t,{mode:r.mode});o.on("error",a=>i(a)).on("open",()=>s.pipe(o)).once("close",()=>kE(r,t,n,i))})}function kE(r,e,t,n){he.chmod(e,r.mode,i=>i?n(i):t.preserveTimestamps?ZO(e,r.atime,r.mtime,n):n())}function nT(r,e,t,n,i,s){return e===Po?iT(r,t,n,i,s):e&&!e.isDirectory()?s(new Error(`Cannot overwrite non-directory '${n}' with directory '${t}'.`)):LE(t,n,i,s)}function iT(r,e,t,n,i){he.mkdir(t,s=>{if(s)return i(s);LE(e,t,n,o=>o?i(o):he.chmod(t,r.mode,i))})}function LE(r,e,t,n){he.readdir(r,(i,s)=>i?n(i):PE(s,r,e,t,n))}function PE(r,e,t,n,i){let s=r.pop();return s?sT(r,s,e,t,n,i):i()}function sT(r,e,t,n,i,s){let o=Ht.join(t,e),a=Ht.join(n,e);UE(o,a,(c,l)=>{if(c)return s(c);fl(l,o,a,i,u=>u?s(u):PE(r,t,n,i,s))})}function oT(r,e,t,n,i){he.readlink(e,(s,o)=>{if(s)return i(s);if(n.dereference&&(o=Ht.resolve(process.cwd(),o)),r===Po)return he.symlink(o,t,i);he.readlink(t,(a,c)=>a?a.code==="EINVAL"||a.code==="UNKNOWN"?he.symlink(o,t,i):i(a):(n.dereference&&(c=Ht.resolve(process.cwd(),c)),hl(o,c)?i(new Error(`Cannot copy '${o}' to a subdirectory of itself, '${c}'.`)):r.isDirectory()&&hl(c,o)?i(new Error(`Cannot overwrite '${c}' with '${o}'.`)):aT(o,t,i)))})}function aT(r,e,t){he.unlink(e,n=>n?t(n):he.symlink(r,e,t))}function hl(r,e){let t=Ht.resolve(r).split(Ht.sep),n=Ht.resolve(e).split(Ht.sep);return t.reduce((i,s,o)=>i&&n[o]===s,!0)}function cT(r,e,t){he.stat(r,(n,i)=>{if(n)return t(n);he.stat(e,(s,o)=>s?s.code==="ENOENT"?t(null,{srcStat:i,destStat:Po}):t(s):t(null,{srcStat:i,destStat:o}))})}function UE(r,e,t){cT(r,e,(n,i)=>{if(n)return t(n);let{srcStat:s,destStat:o}=i;return o.ino&&o.ino===s.ino?t(new Error("Source and destination must not be the same.")):s.isDirectory()&&hl(r,e)?t(new Error(`Cannot copy '${r}' to a subdirectory of itself, '${e}'.`)):t(null,o)})}FE.exports=QO});var dl=E((Tk,qE)=>{"use strict";var uT=We().fromCallback;qE.exports={copy:uT(ME())}});var XE=E((Ck,WE)=>{"use strict";var BE=ge(),HE=require("path"),ee=require("assert"),wi=process.platform==="win32";function zE(r){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(t=>{r[t]=r[t]||BE[t],t=t+"Sync",r[t]=r[t]||BE[t]}),r.maxBusyTries=r.maxBusyTries||3}function pl(r,e,t){let n=0;typeof e=="function"&&(t=e,e={}),ee(r,"rimraf: missing path"),ee.strictEqual(typeof r,"string","rimraf: path should be a string"),ee.strictEqual(typeof t,"function","rimraf: callback function required"),ee(e,"rimraf: invalid options argument provided"),ee.strictEqual(typeof e,"object","rimraf: options should be object"),zE(e),jE(r,e,function i(s){if(s){if((s.code==="EBUSY"||s.code==="ENOTEMPTY"||s.code==="EPERM")&&n<e.maxBusyTries){n++;let o=n*100;return setTimeout(()=>jE(r,e,i),o)}s.code==="ENOENT"&&(s=null)}t(s)})}function jE(r,e,t){ee(r),ee(e),ee(typeof t=="function"),e.lstat(r,(n,i)=>{if(n&&n.code==="ENOENT")return t(null);if(n&&n.code==="EPERM"&&wi)return GE(r,e,n,t);if(i&&i.isDirectory())return Uo(r,e,n,t);e.unlink(r,s=>{if(s){if(s.code==="ENOENT")return t(null);if(s.code==="EPERM")return wi?GE(r,e,s,t):Uo(r,e,s,t);if(s.code==="EISDIR")return Uo(r,e,s,t)}return t(s)})})}function GE(r,e,t,n){ee(r),ee(e),ee(typeof n=="function"),t&&ee(t instanceof Error),e.chmod(r,438,i=>{i?n(i.code==="ENOENT"?null:t):e.stat(r,(s,o)=>{s?n(s.code==="ENOENT"?null:t):o.isDirectory()?Uo(r,e,t,n):e.unlink(r,n)})})}function $E(r,e,t){let n;ee(r),ee(e),t&&ee(t instanceof Error);try{e.chmodSync(r,438)}catch(i){if(i.code==="ENOENT")return;throw t}try{n=e.statSync(r)}catch(i){if(i.code==="ENOENT")return;throw t}n.isDirectory()?Fo(r,e,t):e.unlinkSync(r)}function Uo(r,e,t,n){ee(r),ee(e),t&&ee(t instanceof Error),ee(typeof n=="function"),e.rmdir(r,i=>{i&&(i.code==="ENOTEMPTY"||i.code==="EEXIST"||i.code==="EPERM")?lT(r,e,n):i&&i.code==="ENOTDIR"?n(t):n(i)})}function lT(r,e,t){ee(r),ee(e),ee(typeof t=="function"),e.readdir(r,(n,i)=>{if(n)return t(n);let s=i.length,o;if(s===0)return e.rmdir(r,t);i.forEach(a=>{pl(HE.join(r,a),e,c=>{if(!o){if(c)return t(o=c);--s===0&&e.rmdir(r,t)}})})})}function VE(r,e){let t;e=e||{},zE(e),ee(r,"rimraf: missing path"),ee.strictEqual(typeof r,"string","rimraf: path should be a string"),ee(e,"rimraf: missing options"),ee.strictEqual(typeof e,"object","rimraf: options should be object");try{t=e.lstatSync(r)}catch(n){if(n.code==="ENOENT")return;n.code==="EPERM"&&wi&&$E(r,e,n)}try{t&&t.isDirectory()?Fo(r,e,null):e.unlinkSync(r)}catch(n){if(n.code==="ENOENT")return;if(n.code==="EPERM")return wi?$E(r,e,n):Fo(r,e,n);if(n.code!=="EISDIR")throw n;Fo(r,e,n)}}function Fo(r,e,t){ee(r),ee(e),t&&ee(t instanceof Error);try{e.rmdirSync(r)}catch(n){if(n.code==="ENOTDIR")throw t;if(n.code==="ENOTEMPTY"||n.code==="EEXIST"||n.code==="EPERM")fT(r,e);else if(n.code!=="ENOENT")throw n}}function fT(r,e){if(ee(r),ee(e),e.readdirSync(r).forEach(t=>VE(HE.join(r,t),e)),wi){let t=Date.now();do try{return e.rmdirSync(r,e)}catch{}while(Date.now()-t<500)}else return e.rmdirSync(r,e)}WE.exports=pl;pl.sync=VE});var Ri=E((Ik,YE)=>{"use strict";var hT=We().fromCallback,KE=XE();YE.exports={remove:hT(KE),removeSync:KE.sync}});var ig=E((Nk,ng)=>{"use strict";var dT=We().fromCallback,QE=require("fs"),eg=require("path"),tg=et(),rg=Ri(),JE=dT(function(e,t){t=t||function(){},QE.readdir(e,(n,i)=>{if(n)return tg.mkdirs(e,t);i=i.map(o=>eg.join(e,o)),s();function s(){let o=i.pop();if(!o)return t();rg.remove(o,a=>{if(a)return t(a);s()})}})});function ZE(r){let e;try{e=QE.readdirSync(r)}catch{return tg.mkdirsSync(r)}e.forEach(t=>{t=eg.join(r,t),rg.removeSync(t)})}ng.exports={emptyDirSync:ZE,emptydirSync:ZE,emptyDir:JE,emptydir:JE}});var cg=E((Ak,ag)=>{"use strict";var pT=We().fromCallback,sg=require("path"),xi=ge(),og=et(),mT=Ct().pathExists;function yT(r,e){function t(){xi.writeFile(r,"",n=>{if(n)return e(n);e()})}xi.stat(r,(n,i)=>{if(!n&&i.isFile())return e();let s=sg.dirname(r);mT(s,(o,a)=>{if(o)return e(o);if(a)return t();og.mkdirs(s,c=>{if(c)return e(c);t()})})})}function ET(r){let e;try{e=xi.statSync(r)}catch{}if(e&&e.isFile())return;let t=sg.dirname(r);xi.existsSync(t)||og.mkdirsSync(t),xi.writeFileSync(r,"")}ag.exports={createFile:pT(yT),createFileSync:ET}});var dg=E((Dk,hg)=>{"use strict";var gT=We().fromCallback,lg=require("path"),zr=ge(),fg=et(),ug=Ct().pathExists;function _T(r,e,t){function n(i,s){zr.link(i,s,o=>{if(o)return t(o);t(null)})}ug(e,(i,s)=>{if(i)return t(i);if(s)return t(null);zr.lstat(r,o=>{if(o)return o.message=o.message.replace("lstat","ensureLink"),t(o);let a=lg.dirname(e);ug(a,(c,l)=>{if(c)return t(c);if(l)return n(r,e);fg.mkdirs(a,u=>{if(u)return t(u);n(r,e)})})})})}function bT(r,e){if(zr.existsSync(e))return;try{zr.lstatSync(r)}catch(s){throw s.message=s.message.replace("lstat","ensureLink"),s}let n=lg.dirname(e);return zr.existsSync(n)||fg.mkdirsSync(n),zr.linkSync(r,e)}hg.exports={createLink:gT(_T),createLinkSync:bT}});var mg=E((kk,pg)=>{"use strict";var pr=require("path"),Oi=ge(),vT=Ct().pathExists;function ST(r,e,t){if(pr.isAbsolute(r))return Oi.lstat(r,n=>n?(n.message=n.message.replace("lstat","ensureSymlink"),t(n)):t(null,{toCwd:r,toDst:r}));{let n=pr.dirname(e),i=pr.join(n,r);return vT(i,(s,o)=>s?t(s):o?t(null,{toCwd:i,toDst:r}):Oi.lstat(r,a=>a?(a.message=a.message.replace("lstat","ensureSymlink"),t(a)):t(null,{toCwd:r,toDst:pr.relative(n,r)})))}}function wT(r,e){let t;if(pr.isAbsolute(r)){if(t=Oi.existsSync(r),!t)throw new Error("absolute srcpath does not exist");return{toCwd:r,toDst:r}}else{let n=pr.dirname(e),i=pr.join(n,r);if(t=Oi.existsSync(i),t)return{toCwd:i,toDst:r};if(t=Oi.existsSync(r),!t)throw new Error("relative srcpath does not exist");return{toCwd:r,toDst:pr.relative(n,r)}}}pg.exports={symlinkPaths:ST,symlinkPathsSync:wT}});var gg=E((Lk,Eg)=>{"use strict";var yg=ge();function RT(r,e,t){if(t=typeof e=="function"?e:t,e=typeof e=="function"?!1:e,e)return t(null,e);yg.lstat(r,(n,i)=>{if(n)return t(null,"file");e=i&&i.isDirectory()?"dir":"file",t(null,e)})}function xT(r,e){let t;if(e)return e;try{t=yg.lstatSync(r)}catch{return"file"}return t&&t.isDirectory()?"dir":"file"}Eg.exports={symlinkType:RT,symlinkTypeSync:xT}});var xg=E((Pk,Rg)=>{"use strict";var OT=We().fromCallback,bg=require("path"),Un=ge(),vg=et(),TT=vg.mkdirs,CT=vg.mkdirsSync,Sg=mg(),IT=Sg.symlinkPaths,NT=Sg.symlinkPathsSync,wg=gg(),AT=wg.symlinkType,DT=wg.symlinkTypeSync,_g=Ct().pathExists;function kT(r,e,t,n){n=typeof t=="function"?t:n,t=typeof t=="function"?!1:t,_g(e,(i,s)=>{if(i)return n(i);if(s)return n(null);IT(r,e,(o,a)=>{if(o)return n(o);r=a.toDst,AT(a.toCwd,t,(c,l)=>{if(c)return n(c);let u=bg.dirname(e);_g(u,(f,h)=>{if(f)return n(f);if(h)return Un.symlink(r,e,l,n);TT(u,d=>{if(d)return n(d);Un.symlink(r,e,l,n)})})})})})}function LT(r,e,t){if(Un.existsSync(e))return;let i=NT(r,e);r=i.toDst,t=DT(i.toCwd,t);let s=bg.dirname(e);return Un.existsSync(s)||CT(s),Un.symlinkSync(r,e,t)}Rg.exports={createSymlink:OT(kT),createSymlinkSync:LT}});var Tg=E((Uk,Og)=>{"use strict";var Mo=cg(),qo=dg(),Bo=xg();Og.exports={createFile:Mo.createFile,createFileSync:Mo.createFileSync,ensureFile:Mo.createFile,ensureFileSync:Mo.createFileSync,createLink:qo.createLink,createLinkSync:qo.createLinkSync,ensureLink:qo.createLink,ensureLinkSync:qo.createLinkSync,createSymlink:Bo.createSymlink,createSymlinkSync:Bo.createSymlinkSync,ensureSymlink:Bo.createSymlink,ensureSymlinkSync:Bo.createSymlinkSync}});var Ag=E((Fk,Ng)=>{"use strict";var Fn;try{Fn=ge()}catch{Fn=require("fs")}function PT(r,e,t){t==null&&(t=e,e={}),typeof e=="string"&&(e={encoding:e}),e=e||{};var n=e.fs||Fn,i=!0;"throws"in e&&(i=e.throws),n.readFile(r,e,function(s,o){if(s)return t(s);o=Ig(o);var a;try{a=JSON.parse(o,e?e.reviver:null)}catch(c){return i?(c.message=r+": "+c.message,t(c)):t(null,null)}t(null,a)})}function UT(r,e){e=e||{},typeof e=="string"&&(e={encoding:e});var t=e.fs||Fn,n=!0;"throws"in e&&(n=e.throws);try{var i=t.readFileSync(r,e);return i=Ig(i),JSON.parse(i,e.reviver)}catch(s){if(n)throw s.message=r+": "+s.message,s;return null}}function Cg(r,e){var t,n=`
`;typeof e=="object"&&e!==null&&(e.spaces&&(t=e.spaces),e.EOL&&(n=e.EOL));var i=JSON.stringify(r,e?e.replacer:null,t);return i.replace(/\n/g,n)+n}function FT(r,e,t,n){n==null&&(n=t,t={}),t=t||{};var i=t.fs||Fn,s="";try{s=Cg(e,t)}catch(o){n&&n(o,null);return}i.writeFile(r,s,t,n)}function MT(r,e,t){t=t||{};var n=t.fs||Fn,i=Cg(e,t);return n.writeFileSync(r,i,t)}function Ig(r){return Buffer.isBuffer(r)&&(r=r.toString("utf8")),r=r.replace(/^\uFEFF/,""),r}var qT={readFile:PT,readFileSync:UT,writeFile:FT,writeFileSync:MT};Ng.exports=qT});var Go=E((Mk,kg)=>{"use strict";var Dg=We().fromCallback,jo=Ag();kg.exports={readJson:Dg(jo.readFile),readJsonSync:jo.readFileSync,writeJson:Dg(jo.writeFile),writeJsonSync:jo.writeFileSync}});var Ug=E((qk,Pg)=>{"use strict";var BT=require("path"),jT=et(),GT=Ct().pathExists,Lg=Go();function $T(r,e,t,n){typeof t=="function"&&(n=t,t={});let i=BT.dirname(r);GT(i,(s,o)=>{if(s)return n(s);if(o)return Lg.writeJson(r,e,t,n);jT.mkdirs(i,a=>{if(a)return n(a);Lg.writeJson(r,e,t,n)})})}Pg.exports=$T});var Mg=E((Bk,Fg)=>{"use strict";var HT=ge(),zT=require("path"),VT=et(),WT=Go();function XT(r,e,t){let n=zT.dirname(r);HT.existsSync(n)||VT.mkdirsSync(n),WT.writeJsonSync(r,e,t)}Fg.exports=XT});var Bg=E((jk,qg)=>{"use strict";var KT=We().fromCallback,Be=Go();Be.outputJson=KT(Ug());Be.outputJsonSync=Mg();Be.outputJSON=Be.outputJson;Be.outputJSONSync=Be.outputJsonSync;Be.writeJSON=Be.writeJson;Be.writeJSONSync=Be.writeJsonSync;Be.readJSON=Be.readJson;Be.readJSONSync=Be.readJsonSync;qg.exports=Be});var Hg=E((Gk,$g)=>{"use strict";var Xe=ge(),Vr=require("path"),YT=ll().copySync,ml=Ri().removeSync,JT=et().mkdirsSync,ZT=cl();function Gg(r,e,t){t=t||{};let n=t.overwrite||t.clobber||!1;if(r=Vr.resolve(r),e=Vr.resolve(e),r===e)return Xe.accessSync(r);if(tC(r,e))throw new Error(`Cannot move '${r}' into itself '${e}'.`);JT(Vr.dirname(e)),i();function i(){if(n)try{return Xe.renameSync(r,e)}catch(s){if(s.code==="ENOTEMPTY"||s.code==="EEXIST"||s.code==="EPERM")return ml(e),t.overwrite=!1,Gg(r,e,t);if(s.code!=="EXDEV")throw s;return jg(r,e,n)}else try{return Xe.linkSync(r,e),Xe.unlinkSync(r)}catch(s){if(s.code==="EXDEV"||s.code==="EISDIR"||s.code==="EPERM"||s.code==="ENOTSUP")return jg(r,e,n);throw s}}}function jg(r,e,t){return Xe.statSync(r).isDirectory()?eC(r,e,t):QT(r,e,t)}function QT(r,e,t){let i=ZT(65536),s=t?"w":"wx",o=Xe.openSync(r,"r"),a=Xe.fstatSync(o),c=Xe.openSync(e,s,a.mode),l=0;for(;l<a.size;){let u=Xe.readSync(o,i,0,65536,l);Xe.writeSync(c,i,0,u),l+=u}return Xe.closeSync(o),Xe.closeSync(c),Xe.unlinkSync(r)}function eC(r,e,t){let n={overwrite:!1};t&&ml(e),i();function i(){return YT(r,e,n),ml(r)}}function tC(r,e){try{return Xe.statSync(r).isDirectory()&&r!==e&&e.indexOf(r)>-1&&e.split(Vr.dirname(r)+Vr.sep)[1].split(Vr.sep)[0]===Vr.basename(r)}catch{return!1}}$g.exports={moveSync:Gg}});var Xg=E(($k,Wg)=>{"use strict";var rC=We().fromCallback,yl=ge(),Ti=require("path"),nC=dl().copy,Vg=Ri().remove,iC=et().mkdirp,sC=Ct().pathExists;function oC(r,e,t,n){typeof t=="function"&&(n=t,t={});let i=t.overwrite||t.clobber||!1;if(r=Ti.resolve(r),e=Ti.resolve(e),r===e)return yl.access(r,n);yl.stat(r,(s,o)=>{if(s)return n(s);if(o.isDirectory()&&uC(r,e))return n(new Error(`Cannot move '${r}' to a subdirectory of itself, '${e}'.`));iC(Ti.dirname(e),a=>a?n(a):aC(r,e,i,n))})}function aC(r,e,t,n){if(t)return Vg(e,i=>i?n(i):zg(r,e,t,n));sC(e,(i,s)=>i?n(i):s?n(new Error("dest already exists.")):zg(r,e,t,n))}function zg(r,e,t,n){yl.rename(r,e,i=>i?i.code!=="EXDEV"?n(i):cC(r,e,t,n):n())}function cC(r,e,t,n){nC(r,e,{overwrite:t,errorOnExist:!0},s=>s?n(s):Vg(r,n))}function uC(r,e){let t=r.split(Ti.sep),n=e.split(Ti.sep);return t.reduce((i,s,o)=>i&&n[o]===s,!0)}Wg.exports={move:rC(oC)}});var Zg=E((Hk,Jg)=>{"use strict";var lC=We().fromCallback,Ci=ge(),Kg=require("path"),Yg=et(),fC=Ct().pathExists;function hC(r,e,t,n){typeof t=="function"&&(n=t,t="utf8");let i=Kg.dirname(r);fC(i,(s,o)=>{if(s)return n(s);if(o)return Ci.writeFile(r,e,t,n);Yg.mkdirs(i,a=>{if(a)return n(a);Ci.writeFile(r,e,t,n)})})}function dC(r,...e){let t=Kg.dirname(r);if(Ci.existsSync(t))return Ci.writeFileSync(r,...e);Yg.mkdirsSync(t),Ci.writeFileSync(r,...e)}Jg.exports={outputFile:lC(hC),outputFileSync:dC}});var $o=E((zk,El)=>{"use strict";El.exports=Object.assign({},Zu(),ll(),dl(),ig(),Tg(),Bg(),et(),Hg(),Xg(),Zg(),Ct(),Ri());var Qg=require("fs");Object.getOwnPropertyDescriptor(Qg,"promises")&&Object.defineProperty(El.exports,"promises",{get(){return Qg.promises}})});var _l=E(gl=>{"use strict";Object.defineProperty(gl,"__esModule",{value:!0});function pC(r){return typeof r=="function"}gl.isFunction=pC});var Ho=E(vl=>{"use strict";Object.defineProperty(vl,"__esModule",{value:!0});var bl=!1;vl.config={Promise:void 0,set useDeprecatedSynchronousErrorHandling(r){if(r){var e=new Error;console.warn(`DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: 
`+e.stack)}else bl&&console.log("RxJS: Back to a better error behavior. Thank you. <3");bl=r},get useDeprecatedSynchronousErrorHandling(){return bl}}});var zo=E(Sl=>{"use strict";Object.defineProperty(Sl,"__esModule",{value:!0});function mC(r){setTimeout(function(){throw r},0)}Sl.hostReportError=mC});var Rl=E(wl=>{"use strict";Object.defineProperty(wl,"__esModule",{value:!0});var yC=Ho(),EC=zo();wl.empty={closed:!0,next:function(r){},error:function(r){if(yC.config.useDeprecatedSynchronousErrorHandling)throw r;EC.hostReportError(r)},complete:function(){}}});var e_=E(xl=>{"use strict";Object.defineProperty(xl,"__esModule",{value:!0});xl.isArray=function(){return Array.isArray||function(r){return r&&typeof r.length=="number"}}()});var Tl=E(Ol=>{"use strict";Object.defineProperty(Ol,"__esModule",{value:!0});function gC(r){return r!==null&&typeof r=="object"}Ol.isObject=gC});var t_=E(Cl=>{"use strict";Object.defineProperty(Cl,"__esModule",{value:!0});var _C=function(){function r(e){return Error.call(this),this.message=e?e.length+` errors occurred during unsubscription:
`+e.map(function(t,n){return n+1+") "+t.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=e,this}return r.prototype=Object.create(Error.prototype),r}();Cl.UnsubscriptionError=_C});var mr=E(Il=>{"use strict";Object.defineProperty(Il,"__esModule",{value:!0});var bC=e_(),vC=Tl(),SC=_l(),Vo=t_(),wC=function(){function r(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}return r.prototype.unsubscribe=function(){var e;if(!this.closed){var t=this,n=t._parentOrParents,i=t._unsubscribe,s=t._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof r)n.remove(this);else if(n!==null)for(var o=0;o<n.length;++o){var a=n[o];a.remove(this)}if(SC.isFunction(i))try{i.call(this)}catch(u){e=u instanceof Vo.UnsubscriptionError?r_(u.errors):[u]}if(bC.isArray(s))for(var o=-1,c=s.length;++o<c;){var l=s[o];if(vC.isObject(l))try{l.unsubscribe()}catch(f){e=e||[],f instanceof Vo.UnsubscriptionError?e=e.concat(r_(f.errors)):e.push(f)}}if(e)throw new Vo.UnsubscriptionError(e)}},r.prototype.add=function(e){var t=e;if(!e)return r.EMPTY;switch(typeof e){case"function":t=new r(e);case"object":if(t===this||t.closed||typeof t.unsubscribe!="function")return t;if(this.closed)return t.unsubscribe(),t;if(!(t instanceof r)){var n=t;t=new r,t._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var i=t._parentOrParents;if(i===null)t._parentOrParents=this;else if(i instanceof r){if(i===this)return t;t._parentOrParents=[i,this]}else if(i.indexOf(this)===-1)i.push(this);else return t;var s=this._subscriptions;return s===null?this._subscriptions=[t]:s.push(t),t},r.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);n!==-1&&t.splice(n,1)}},r.EMPTY=function(e){return e.closed=!0,e}(new r),r}();Il.Subscription=wC;function r_(r){return r.reduce(function(e,t){return e.concat(t instanceof Vo.UnsubscriptionError?t.errors:t)},[])}});var Wo=E(Ii=>{"use strict";Object.defineProperty(Ii,"__esModule",{value:!0});Ii.rxSubscriber=function(){return typeof Symbol=="function"?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}();Ii.$$rxSubscriber=Ii.rxSubscriber});var Wr=E(qn=>{"use strict";var i_=qn&&qn.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(qn,"__esModule",{value:!0});var n_=_l(),Nl=Rl(),RC=mr(),xC=Wo(),Mn=Ho(),Xo=zo(),s_=function(r){i_(e,r);function e(t,n,i){var s=r.call(this)||this;switch(s.syncErrorValue=null,s.syncErrorThrown=!1,s.syncErrorThrowable=!1,s.isStopped=!1,arguments.length){case 0:s.destination=Nl.empty;break;case 1:if(!t){s.destination=Nl.empty;break}if(typeof t=="object"){t instanceof e?(s.syncErrorThrowable=t.syncErrorThrowable,s.destination=t,t.add(s)):(s.syncErrorThrowable=!0,s.destination=new Al(s,t));break}default:s.syncErrorThrowable=!0,s.destination=new Al(s,t,n,i);break}return s}return e.prototype[xC.rxSubscriber]=function(){return this},e.create=function(t,n,i){var s=new e(t,n,i);return s.syncErrorThrowable=!1,s},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,r.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this},e}(RC.Subscription);qn.Subscriber=s_;var Al=function(r){i_(e,r);function e(t,n,i,s){var o=r.call(this)||this;o._parentSubscriber=t;var a,c=o;return n_.isFunction(n)?a=n:n&&(a=n.next,i=n.error,s=n.complete,n!==Nl.empty&&(c=Object.create(n),n_.isFunction(c.unsubscribe)&&o.add(c.unsubscribe.bind(c)),c.unsubscribe=o.unsubscribe.bind(o))),o._context=c,o._next=a,o._error=i,o._complete=s,o}return e.prototype.next=function(t){if(!this.isStopped&&this._next){var n=this._parentSubscriber;!Mn.config.useDeprecatedSynchronousErrorHandling||!n.syncErrorThrowable?this.__tryOrUnsub(this._next,t):this.__tryOrSetError(n,this._next,t)&&this.unsubscribe()}},e.prototype.error=function(t){if(!this.isStopped){var n=this._parentSubscriber,i=Mn.config.useDeprecatedSynchronousErrorHandling;if(this._error)!i||!n.syncErrorThrowable?(this.__tryOrUnsub(this._error,t),this.unsubscribe()):(this.__tryOrSetError(n,this._error,t),this.unsubscribe());else if(n.syncErrorThrowable)i?(n.syncErrorValue=t,n.syncErrorThrown=!0):Xo.hostReportError(t),this.unsubscribe();else{if(this.unsubscribe(),i)throw t;Xo.hostReportError(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var n=this._parentSubscriber;if(this._complete){var i=function(){return t._complete.call(t._context)};!Mn.config.useDeprecatedSynchronousErrorHandling||!n.syncErrorThrowable?(this.__tryOrUnsub(i),this.unsubscribe()):(this.__tryOrSetError(n,i),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,n){try{t.call(this._context,n)}catch(i){if(this.unsubscribe(),Mn.config.useDeprecatedSynchronousErrorHandling)throw i;Xo.hostReportError(i)}},e.prototype.__tryOrSetError=function(t,n,i){if(!Mn.config.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{n.call(this._context,i)}catch(s){return Mn.config.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=s,t.syncErrorThrown=!0,!0):(Xo.hostReportError(s),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(s_);qn.SafeSubscriber=Al});var o_=E(Dl=>{"use strict";Object.defineProperty(Dl,"__esModule",{value:!0});var OC=Wr();function TC(r){for(;r;){var e=r,t=e.closed,n=e.destination,i=e.isStopped;if(t||i)return!1;n&&n instanceof OC.Subscriber?r=n:r=null}return!0}Dl.canReportError=TC});var c_=E(Ll=>{"use strict";Object.defineProperty(Ll,"__esModule",{value:!0});var kl=Wr(),a_=Wo(),CC=Rl();function IC(r,e,t){if(r){if(r instanceof kl.Subscriber)return r;if(r[a_.rxSubscriber])return r[a_.rxSubscriber]()}return!r&&!e&&!t?new kl.Subscriber(CC.empty):new kl.Subscriber(r,e,t)}Ll.toSubscriber=IC});var Bn=E(Pl=>{"use strict";Object.defineProperty(Pl,"__esModule",{value:!0});Pl.observable=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}()});var u_=E(Ul=>{"use strict";Object.defineProperty(Ul,"__esModule",{value:!0});function NC(r){return r}Ul.identity=NC});var f_=E(Ko=>{"use strict";Object.defineProperty(Ko,"__esModule",{value:!0});var AC=u_();function DC(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return l_(r)}Ko.pipe=DC;function l_(r){return r.length===0?AC.identity:r.length===1?r[0]:function(t){return r.reduce(function(n,i){return i(n)},t)}}Ko.pipeFromArray=l_});var yr=E(Fl=>{"use strict";Object.defineProperty(Fl,"__esModule",{value:!0});var kC=o_(),LC=c_(),PC=Bn(),UC=f_(),Yo=Ho(),FC=function(){function r(e){this._isScalar=!1,e&&(this._subscribe=e)}return r.prototype.lift=function(e){var t=new r;return t.source=this,t.operator=e,t},r.prototype.subscribe=function(e,t,n){var i=this.operator,s=LC.toSubscriber(e,t,n);if(i?s.add(i.call(s,this.source)):s.add(this.source||Yo.config.useDeprecatedSynchronousErrorHandling&&!s.syncErrorThrowable?this._subscribe(s):this._trySubscribe(s)),Yo.config.useDeprecatedSynchronousErrorHandling&&s.syncErrorThrowable&&(s.syncErrorThrowable=!1,s.syncErrorThrown))throw s.syncErrorValue;return s},r.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){Yo.config.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),kC.canReportError(e)?e.error(t):console.warn(t)}},r.prototype.forEach=function(e,t){var n=this;return t=h_(t),new t(function(i,s){var o;o=n.subscribe(function(a){try{e(a)}catch(c){s(c),o&&o.unsubscribe()}},s,i)})},r.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},r.prototype[PC.observable]=function(){return this},r.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length===0?this:UC.pipeFromArray(e)(this)},r.prototype.toPromise=function(e){var t=this;return e=h_(e),new e(function(n,i){var s;t.subscribe(function(o){return s=o},function(o){return i(o)},function(){return n(s)})})},r.create=function(e){return new r(e)},r}();Fl.Observable=FC;function h_(r){if(r||(r=Yo.config.Promise||Promise),!r)throw new Error("no Promise impl found");return r}});var d_=E(Ml=>{"use strict";Object.defineProperty(Ml,"__esModule",{value:!0});var MC=function(){function r(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return r.prototype=Object.create(Error.prototype),r}();Ml.ObjectUnsubscribedError=MC});var p_=E(Ni=>{"use strict";var qC=Ni&&Ni.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Ni,"__esModule",{value:!0});var BC=mr(),jC=function(r){qC(e,r);function e(t,n){var i=r.call(this)||this;return i.subject=t,i.subscriber=n,i.closed=!1,i}return e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,n=t.observers;if(this.subject=null,!(!n||n.length===0||t.isStopped||t.closed)){var i=n.indexOf(this.subscriber);i!==-1&&n.splice(i,1)}}},e}(BC.Subscription);Ni.SubjectSubscription=jC});var g_=E(Xr=>{"use strict";var jl=Xr&&Xr.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Xr,"__esModule",{value:!0});var m_=yr(),GC=Wr(),ql=mr(),Ai=d_(),$C=p_(),HC=Wo(),y_=function(r){jl(e,r);function e(t){var n=r.call(this,t)||this;return n.destination=t,n}return e}(GC.Subscriber);Xr.SubjectSubscriber=y_;var E_=function(r){jl(e,r);function e(){var t=r.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return e.prototype[HC.rxSubscriber]=function(){return new y_(this)},e.prototype.lift=function(t){var n=new Bl(this,this);return n.operator=t,n},e.prototype.next=function(t){if(this.closed)throw new Ai.ObjectUnsubscribedError;if(!this.isStopped)for(var n=this.observers,i=n.length,s=n.slice(),o=0;o<i;o++)s[o].next(t)},e.prototype.error=function(t){if(this.closed)throw new Ai.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var n=this.observers,i=n.length,s=n.slice(),o=0;o<i;o++)s[o].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new Ai.ObjectUnsubscribedError;this.isStopped=!0;for(var t=this.observers,n=t.length,i=t.slice(),s=0;s<n;s++)i[s].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(t){if(this.closed)throw new Ai.ObjectUnsubscribedError;return r.prototype._trySubscribe.call(this,t)},e.prototype._subscribe=function(t){if(this.closed)throw new Ai.ObjectUnsubscribedError;return this.hasError?(t.error(this.thrownError),ql.Subscription.EMPTY):this.isStopped?(t.complete(),ql.Subscription.EMPTY):(this.observers.push(t),new $C.SubjectSubscription(this,t))},e.prototype.asObservable=function(){var t=new m_.Observable;return t.source=this,t},e.create=function(t,n){return new Bl(t,n)},e}(m_.Observable);Xr.Subject=E_;var Bl=function(r){jl(e,r);function e(t,n){var i=r.call(this)||this;return i.destination=t,i.source=n,i}return e.prototype.next=function(t){var n=this.destination;n&&n.next&&n.next(t)},e.prototype.error=function(t){var n=this.destination;n&&n.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){var n=this.source;return n?this.source.subscribe(t):ql.Subscription.EMPTY},e}(E_);Xr.AnonymousSubject=Bl});function WC(r,e,t){let n=Jr();return new kn(r,t,e,n)}function XC(r,e,t){let n=JSON.stringify(r.map(i=>({taskId:i.taskId,hash:i.hash})));P&&Jo.note({title:`Executed tasks with hashes: ${n}`}),(0,__.writeFileSync)(b_.join(e,`tasks-hashes-${t}`),n)}function KC(r,e,t){r.filter(i=>i.cacheStatus==="local-cache-hit").map(i=>i.hash).forEach(i=>e.store(i,t))}async function Gl({daemon:r,options:e,fileStorage:t,remoteCache:n,api:i,outputObfuscator:s,runStartTime:o,messages:a,endOfRunMessage:c,taskExecutions:l,versionOfNxBefore133:u,inner:f,encryptionKey:h,storeInCurrentProcess:d,distributedExecutionId:m,runContext:b}){let p=new Date().toISOString(),w=me(),k={command:s.obfuscate(Ji()),startTime:o,endTime:p,distributedExecutionId:m,branch:w,runGroup:ve(),sha:w?tt():void 0,inner:f},O={branch:w,runGroup:ve(),ciExecutionId:je(),ciExecutionEnv:xe()};if(d){ut(m)&&(XC(l,Zo,m),KC(l,n,Zo));try{await n.waitForStoreRequestsToComplete()}catch{return Jo.error({title:"Nx Cloud wasn't able to store artifacts."}),a.printMessages(),!1}for(let C of t.storedHashes){let L=l.find(T=>T.hash===C);if(!L)throw new Error(`Task with hash ${C} isn't recorded`);L.uploadedToStorage=!0}l.forEach(C=>{var L;C.artifactId=(L=b.allTasks.find(T=>T.hash==C.hash))==null?void 0:L.artifactId});try{await i.endRun(k,l,O)}catch{return Jo.error({title:"Nx Cloud wasn't able to record its run."}),a.printMessages(),!1}await sn(e)}else try{let C=Et?Et:e.accessToken,L=Co(),T=require.resolve("./lib/daemon/process-run-end");await r.processInBackground(T,{encryptionKey:h,runnerOptions:{...e,accessToken:C},delayedStoreRequests:n.delayedStoreRequests,ciExecutionContext:O,runEnd:{runData:k,taskExecutions:l,allTasks:b.allTasks,linkId:L},lightRunnerResolutionPaths:Sr}),b.runUrl=`${ys(e.url||"https://nx.app")}/runs/${L}`}catch(C){return Jo.warn({title:"Nx Cloud Problems",bodyLines:[C.message||C.toString()]}),!1}return u?setTimeout(()=>{a.printMessages(),!a.anyErrors&&!f&&c.printCacheHitsMessage()},0):(a.printMessages(),!a.anyErrors&&!f&&c.printCacheHitsMessage()),!0}function YC(r,e,t,n){let i=new Ro(r,Zo,!0,e.cacheableOperations||[],t,n);try{let{CompositeLifeCycle:s}=dt();return s?new s([e.lifeCycle,i]):i}catch{return i}}async function JC(r,e,t,n,i){if(n.skipNxCache)return;let s=t.map(c=>c.hash).filter(c=>!!c),o=await Promise.all(s.map(c=>{let l=(0,v_.join)(Zo,`${c}.commit`);return VC(l)})),a=[];for(let c=0;c<o.length;++c)o[c]||a.push(s[c]);if(a.length>0){let c=r.startRun(i,a);for(let l of a)e.requests[l]=c}}function Di(r,e,t,n=!1){var L;let i=process.env.NX_CLOUD_DISTRIBUTED_EXECUTION_ID,s={statuses:{},scheduledTasks:[],requests:{},allTasks:r},o=e.lifeCycle===void 0,a=[],c=new An(e),l=WC(c,e,s),u=new vo(s,a,i),f=new fr(e.maskedProperties),h=new Date().toISOString(),d=YC(s,e,f,a),m=xr||e.encryptionKey,b=new Jt(m),p=new Yt(e),w=ut(i)||!((L=t.daemon)!=null&&L.enabled()),k=new lr(b,p,e,"cloud-enabled-runner"),O=new xo(c,l,s,k,i,w);JC(l,s,r,e,i),delete process.env.NX_CLOUD_DISTRIBUTED_EXECUTION_ID;let C=zC(r,{...e,remoteCache:O,lifeCycle:d},t);if(C.subscribe){let{Subject:T}=g_(),z=new T;return C.subscribe({next:G=>z.next(G),error:G=>z.error(G),complete:async()=>{!await Gl({daemon:t.daemon,options:e,fileStorage:k,remoteCache:O,api:l,outputObfuscator:f,runStartTime:h,messages:c,endOfRunMessage:u,taskExecutions:a,versionOfNxBefore133:o,inner:n,encryptionKey:m,storeInCurrentProcess:w,runContext:s,distributedExecutionId:i})&&ut(i)&&process.exit(Wt),z.complete()}}),z}else return C.then(async T=>(!await Gl({daemon:t.daemon,options:e,fileStorage:k,remoteCache:O,api:l,outputObfuscator:f,runStartTime:h,messages:c,endOfRunMessage:u,taskExecutions:a,versionOfNxBefore133:o,inner:n,encryptionKey:m,storeInCurrentProcess:w,runContext:s,distributedExecutionId:i})&&ut(i)&&process.exit(Wt),T)).catch(async T=>{throw!await Gl({daemon:t.daemon,options:e,fileStorage:k,remoteCache:O,api:l,outputObfuscator:f,runStartTime:h,messages:c,endOfRunMessage:u,taskExecutions:a,versionOfNxBefore133:o,inner:n,encryptionKey:m,storeInCurrentProcess:w,runContext:s,distributedExecutionId:i})&&ut(i)&&process.exit(Wt),T})}var __,b_,v_,Jo,zC,Zo,VC,S_=q(()=>{"use strict";__=require("fs"),b_=vr(require("path")),v_=require("path");re();wr();kt();tc();Es();gs();bo();Gy();Pu();So();Vy();Wy();Hu();zu();({output:Jo}=Y()),{tasksRunner:zC,cacheDirectory:Zo}=dt(),{pathExists:VC}=$o()});function ki(r){return(0,R_.join)((0,w_.tmpdir)(),`run-group-${r}-marker.lock`)}function x_(r){(0,Qo.mkdirSync)(ki(r))}function O_(r,e){if(e===void 0)return;let t=ki(r);(0,Qo.writeFileSync)(`${t}/pid`,e.toString())}var Qo,w_,R_,T_=q(()=>{"use strict";Qo=require("fs"),w_=require("os"),R_=require("path")});async function ta(){if(me()==null)return;let r=ve();P&&jn.note({title:`Trying to create heartbeat background process for run group: ${r}`});try{x_(r)}catch{let t=await QC(r);P&&(t===void 0?jn.note({title:"Heartbeat marker exists, but no process could be found."}):jn.note({title:`Heartbeat marker exists, process expected with pid ${t}`})),I_(r,t);return}await ZC(r).catch(()=>{jn.error({title:"Took longer than 3 seconds to hear from heartbeat process",bodyLines:["The heartbeat process may have not started properly. This CIPE could have inconsistent status reporting."]})})}async function ZC(r){let e=process.env.NX_CLOUD_HEARTBEAT_INHERIT_STDIO=="true"?"inherit":"pipe";return new Promise((t,n)=>{let i=(0,C_.spawn)(process.execPath,[require.resolve("./lib/heartbeat/heartbeat-process.js")],{detached:!0,windowsHide:!0,stdio:e,env:{...process.env,NX_CLOUD_LIGHT_CLIENT_RESOLUTION_PATHS:JSON.stringify(Sr)}});e==="pipe"?(i.stdout.on("data",s=>{s=="heartbeat-ready"&&(P&&jn.note({title:`Heartbeat process started successfully with PID ${i.pid}`}),O_(r,i.pid),I_(r,i.pid),i.unref(),t())}),setTimeout(()=>n(),3e3)):t()})}async function QC(r){let e=ki(r),t=1;for(;t<=3;)try{let n=(0,Pi.readFileSync)(`${e}/pid`,{encoding:"utf-8"});return Number(n)}catch{await Ge(1e3),t+=1}}function I_(r,e){e!==void 0&&(ea||(ea=setInterval(()=>{if(!eI(e)){let t=ki(r),n;try{n=(0,Pi.readFileSync)(`${t}/logs`,{encoding:"utf-8"})}catch{n="Unable to find shutdown logs, likely the heartbeat process was sent a SIGKILL"}Li(),jn.error({title:"Nx Cloud Heartbeat missing",bodyLines:[`Expected to find process with PID ${e} but none was found.`,"Output:",...n.split(`
`)]}),(0,Pi.rmdirSync)(t,{recursive:!0})}},1e3),process.on("SIGINT",Li),process.on("SIGTERM",Li),process.on("uncaughtException",Li),process.on("exit",Li)))}function Li(){clearInterval(ea),ea=void 0}function eI(r){try{return process.kill(r,0),!0}catch{return!1}}var C_,Pi,jn,ea,$l=q(()=>{"use strict";C_=require("child_process"),Pi=require("fs");re();wr();Zr();T_();({output:jn}=Y())});function k_(){tI(A_),rI(D_,"true")}function L_(r){if(r===!0)return!0;if(r===!1)return!1;let e=process.env.NX_CLOUD_DISTRIBUTED_EXECUTION;if(e==="false"||e==="FALSE"||e==="0")return!1;if(e==="true"||e==="TRUE"||e==="1")return!0;try{return(0,N_.readFileSync)(D_),!0}catch{return!1}}var N_,Hl,tI,rI,nI,A_,D_,zl=q(()=>{"use strict";N_=require("fs"),Hl=require("path"),{ensureDirSync:tI,writeFileSync:rI}=$o(),nI=process.env.NX_CACHE_DIRECTORY?[process.env.NX_CACHE_DIRECTORY]:["node_modules",".cache","nx"],A_=(0,Hl.join)(process.cwd(),...nI),D_=(0,Hl.join)(A_,"NX_CLOUD_DISTRIBUTED_EXECUTION")});async function Ui(r){let e=Te(r);return await ce(()=>e.get("/nx-cloud/executions/workspace-status"))}var Vl=q(()=>{"use strict";_t()});var P_=E(Wl=>{"use strict";Object.defineProperty(Wl,"__esModule",{value:!0});Wl.subscribeToArray=function(r){return function(e){for(var t=0,n=r.length;t<n&&!e.closed;t++)e.next(r[t]);e.complete()}}});var U_=E(Xl=>{"use strict";Object.defineProperty(Xl,"__esModule",{value:!0});var iI=zo();Xl.subscribeToPromise=function(r){return function(e){return r.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,iI.hostReportError),e}}});var Fi=E(Gn=>{"use strict";Object.defineProperty(Gn,"__esModule",{value:!0});function F_(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}Gn.getSymbolIterator=F_;Gn.iterator=F_();Gn.$$iterator=Gn.iterator});var M_=E(Kl=>{"use strict";Object.defineProperty(Kl,"__esModule",{value:!0});var sI=Fi();Kl.subscribeToIterable=function(r){return function(e){var t=r[sI.iterator]();do{var n=t.next();if(n.done){e.complete();break}if(e.next(n.value),e.closed)break}while(!0);return typeof t.return=="function"&&e.add(function(){t.return&&t.return()}),e}}});var q_=E(Yl=>{"use strict";Object.defineProperty(Yl,"__esModule",{value:!0});var oI=Bn();Yl.subscribeToObservable=function(r){return function(e){var t=r[oI.observable]();if(typeof t.subscribe!="function")throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)}}});var Zl=E(Jl=>{"use strict";Object.defineProperty(Jl,"__esModule",{value:!0});Jl.isArrayLike=function(r){return r&&typeof r.length=="number"&&typeof r!="function"}});var ef=E(Ql=>{"use strict";Object.defineProperty(Ql,"__esModule",{value:!0});function aI(r){return!!r&&typeof r.subscribe!="function"&&typeof r.then=="function"}Ql.isPromise=aI});var rf=E(tf=>{"use strict";Object.defineProperty(tf,"__esModule",{value:!0});var cI=P_(),uI=U_(),lI=M_(),fI=q_(),hI=Zl(),dI=ef(),pI=Tl(),mI=Fi(),yI=Bn();tf.subscribeTo=function(r){if(r&&typeof r[yI.observable]=="function")return fI.subscribeToObservable(r);if(hI.isArrayLike(r))return cI.subscribeToArray(r);if(dI.isPromise(r))return uI.subscribeToPromise(r);if(r&&typeof r[mI.iterator]=="function")return lI.subscribeToIterable(r);var e=pI.isObject(r)?"an invalid object":"'"+r+"'",t="You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";throw new TypeError(t)}});var B_=E(nf=>{"use strict";Object.defineProperty(nf,"__esModule",{value:!0});var EI=yr(),gI=mr(),_I=Bn();function bI(r,e){return new EI.Observable(function(t){var n=new gI.Subscription;return n.add(e.schedule(function(){var i=r[_I.observable]();n.add(i.subscribe({next:function(s){n.add(e.schedule(function(){return t.next(s)}))},error:function(s){n.add(e.schedule(function(){return t.error(s)}))},complete:function(){n.add(e.schedule(function(){return t.complete()}))}}))})),n})}nf.scheduleObservable=bI});var j_=E(sf=>{"use strict";Object.defineProperty(sf,"__esModule",{value:!0});var vI=yr(),SI=mr();function wI(r,e){return new vI.Observable(function(t){var n=new SI.Subscription;return n.add(e.schedule(function(){return r.then(function(i){n.add(e.schedule(function(){t.next(i),n.add(e.schedule(function(){return t.complete()}))}))},function(i){n.add(e.schedule(function(){return t.error(i)}))})})),n})}sf.schedulePromise=wI});var G_=E(of=>{"use strict";Object.defineProperty(of,"__esModule",{value:!0});var RI=yr(),xI=mr();function OI(r,e){return new RI.Observable(function(t){var n=new xI.Subscription,i=0;return n.add(e.schedule(function(){if(i===r.length){t.complete();return}t.next(r[i++]),t.closed||n.add(this.schedule())})),n})}of.scheduleArray=OI});var $_=E(af=>{"use strict";Object.defineProperty(af,"__esModule",{value:!0});var TI=yr(),CI=mr(),II=Fi();function NI(r,e){if(!r)throw new Error("Iterable cannot be null");return new TI.Observable(function(t){var n=new CI.Subscription,i;return n.add(function(){i&&typeof i.return=="function"&&i.return()}),n.add(e.schedule(function(){i=r[II.iterator](),n.add(e.schedule(function(){if(!t.closed){var s,o;try{var a=i.next();s=a.value,o=a.done}catch(c){t.error(c);return}o?t.complete():(t.next(s),this.schedule())}}))})),n})}af.scheduleIterable=NI});var H_=E(cf=>{"use strict";Object.defineProperty(cf,"__esModule",{value:!0});var AI=Bn();function DI(r){return r&&typeof r[AI.observable]=="function"}cf.isInteropObservable=DI});var z_=E(uf=>{"use strict";Object.defineProperty(uf,"__esModule",{value:!0});var kI=Fi();function LI(r){return r&&typeof r[kI.iterator]=="function"}uf.isIterable=LI});var V_=E(lf=>{"use strict";Object.defineProperty(lf,"__esModule",{value:!0});var PI=B_(),UI=j_(),FI=G_(),MI=$_(),qI=H_(),BI=ef(),jI=Zl(),GI=z_();function $I(r,e){if(r!=null){if(qI.isInteropObservable(r))return PI.scheduleObservable(r,e);if(BI.isPromise(r))return UI.schedulePromise(r,e);if(jI.isArrayLike(r))return FI.scheduleArray(r,e);if(GI.isIterable(r)||typeof r=="string")return MI.scheduleIterable(r,e)}throw new TypeError((r!==null&&typeof r||r)+" is not observable")}lf.scheduled=$I});var hf=E(ff=>{"use strict";Object.defineProperty(ff,"__esModule",{value:!0});var W_=yr(),HI=rf(),zI=V_();function VI(r,e){return e?zI.scheduled(r,e):r instanceof W_.Observable?r:new W_.Observable(HI.subscribeTo(r))}ff.from=VI});var X_=E(Mi=>{"use strict";var WI=Mi&&Mi.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Mi,"__esModule",{value:!0});var XI=Wr(),KI=function(r){WI(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.notifyNext=function(t,n,i,s,o){this.destination.next(n)},e.prototype.notifyError=function(t,n){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(XI.Subscriber);Mi.OuterSubscriber=KI});var df=E(qi=>{"use strict";var YI=qi&&qi.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(qi,"__esModule",{value:!0});var JI=Wr(),ZI=function(r){YI(e,r);function e(t,n,i){var s=r.call(this)||this;return s.parent=t,s.outerValue=n,s.outerIndex=i,s.index=0,s}return e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(JI.Subscriber);qi.InnerSubscriber=ZI});var K_=E(pf=>{"use strict";Object.defineProperty(pf,"__esModule",{value:!0});var QI=df(),e0=rf(),t0=yr();function r0(r,e,t,n,i){if(i===void 0&&(i=new QI.InnerSubscriber(r,t,n)),!i.closed)return e instanceof t0.Observable?e.subscribe(i):e0.subscribeTo(e)(i)}pf.subscribeToResult=r0});var J_=E($n=>{"use strict";var n0=$n&&$n.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty($n,"__esModule",{value:!0});var i0=Wr();function s0(r,e){return function(n){if(typeof r!="function")throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new Y_(r,e))}}$n.map=s0;var Y_=function(){function r(e,t){this.project=e,this.thisArg=t}return r.prototype.call=function(e,t){return t.subscribe(new o0(e,this.project,this.thisArg))},r}();$n.MapOperator=Y_;var o0=function(r){n0(e,r);function e(t,n,i){var s=r.call(this,t)||this;return s.project=n,s.count=0,s.thisArg=i||s,s}return e.prototype._next=function(t){var n;try{n=this.project.call(this.thisArg,t,this.count++)}catch(i){this.destination.error(i);return}this.destination.next(n)},e}(i0.Subscriber)});var Q_=E(Bi=>{"use strict";var a0=Bi&&Bi.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Bi,"__esModule",{value:!0});var c0=X_(),u0=df(),l0=K_(),f0=J_(),h0=hf();function Z_(r,e){return typeof e=="function"?function(t){return t.pipe(Z_(function(n,i){return h0.from(r(n,i)).pipe(f0.map(function(s,o){return e(n,s,i,o)}))}))}:function(t){return t.lift(new d0(r))}}Bi.switchMap=Z_;var d0=function(){function r(e){this.project=e}return r.prototype.call=function(e,t){return t.subscribe(new p0(e,this.project))},r}(),p0=function(r){a0(e,r);function e(t,n){var i=r.call(this,t)||this;return i.project=n,i.index=0,i}return e.prototype._next=function(t){var n,i=this.index++;try{n=this.project(t,i)}catch(s){this.destination.error(s);return}this._innerSub(n,t,i)},e.prototype._innerSub=function(t,n,i){var s=this.innerSubscription;s&&s.unsubscribe();var o=new u0.InnerSubscriber(this,n,i),a=this.destination;a.add(o),this.innerSubscription=l0.subscribeToResult(this,t,void 0,void 0,o),this.innerSubscription!==o&&a.add(this.innerSubscription)},e.prototype._complete=function(){var t=this.innerSubscription;(!t||t.closed)&&r.prototype._complete.call(this),this.unsubscribe()},e.prototype._unsubscribe=function(){this.innerSubscription=null},e.prototype.notifyComplete=function(t){var n=this.destination;n.remove(t),this.innerSubscription=null,this.isStopped&&r.prototype._complete.call(this)},e.prototype.notifyNext=function(t,n,i,s,o){this.destination.next(n)},e}(c0.OuterSubscriber)});var mf,m0,y0,E0,eb,tb,Hn,yf=q(()=>{"use strict";mf=require("path");re();({readFile:m0,copy:y0,mkdirSync:E0}=$o()),{output:eb,workspaceRoot:tb}=Y(),Hn=class{constructor(e,t){this.fileStorage=e;this.cacheDirectory=t;E0(t,{recursive:!0})}async retrieveAndExtract(e,t){process.env.NX_CLOUD_DEBUG_URLS=="true"&&eb.note({title:`Retrieving artifacts from ${t}`}),await this.fileStorage.retrieve(e,t,this.cacheDirectory);let n=(0,mf.join)(this.cacheDirectory,e,"outputs");return P&&eb.note({title:"Extracting artifacts",bodyLines:[`from: ${n}`,`to: ${tb}`]}),await y0(n,tb),(await m0((0,mf.join)(this.cacheDirectory,e,"terminalOutput"))).toString()}}});function Er(r,e){return!!r||!!e}function gr(){g0.error({title:"Unable to determine the context for running Nx in CI",bodyLines:["- Nx tried to determine the context automatically but wasn't able to do it.","- Use the NX_CI_EXECUTION_ID env variable to set it manually.","- NX_CI_EXECUTION_ID must be a unique value for every CI execution/run."]})}var g0,ji=q(()=>{"use strict";({output:g0}=Y())});function rb(r,e,t,n,i,s,o){let a=i.map(l=>l.map(u=>({taskId:u.id,hash:u.hash,projectName:u.target.project,target:u.target.target,configuration:u.target.configuration||null,params:Dn(u),projectRoot:u.projectRoot,cache:u.cache}))),c={command:Ji(),branch:r,runGroup:e,ciExecutionId:t,ciExecutionEnv:n,tasks:a,maxParallel:_0(s),commitSha:o};return ga&&(c.agentCount=ga),hh||(c.stopAgentsOnFailure=!1),c}function _0(r){return r.parallel==="false"||r.parallel===!1?1:r.parallel==="true"||r.parallel===!0?Number(r.maxParallel||3):r.parallel===void 0?r.maxParallel?Number(r.maxParallel):3:Number(r.parallel)||3}var Ef,zn,gf=q(()=>{"use strict";_t();re();Oo();kt();Si();({output:Ef}=Y()),zn=class{constructor(e){this.apiAxiosInstance=Te(e,6e4)}async start(e){var i;let t=Ce("dteStart"),n;P&&Ef.note({title:"Starting a distributed execution",bodyLines:[JSON.stringify(e,null,2)]});try{n=await ce(()=>this.apiAxiosInstance.post("/nx-cloud/executions/start",e)),t.recordMetric(ne(n))}catch(s){throw t.recordMetric((i=s==null?void 0:s.axiosException)!=null&&i.response?ne(s.axiosException.response):Ie),s}if(!n.data.enabled)throw new Error("Workspace is disabled. Cannot perform distributed task executions.");if(n.data.error)throw new Error(n.data.error);return n.data.id}async status(e,t){var i;let n=Ce("dteStatus");try{let s=await ce(()=>this.apiAxiosInstance.post("/nx-cloud/executions/status",{id:e,prevUpdatedAt:t}));return n.recordMetric(ne(s)),s.data}catch(s){n.recordMetric((i=s==null?void 0:s.axiosException)!=null&&i.response?ne(s.axiosException.response):Ie),Ef.error({title:s.message}),process.exit(1)}}async completeRunGroupWithError(e,t,n,i,s){var a;let o=Ce("completeRunGroup");P&&Ef.note({title:"Completing with an error",bodyLines:[`ciExecutionId: ${n}`,`ciExecutionEnv: ${i}`,`runGroup: ${t}`,`error: ${s}`]});try{let c=await ce(()=>this.apiAxiosInstance.post("/nx-cloud/executions/complete-run-group",{branch:e,runGroup:t,ciExecutionId:n,ciExecutionEnv:i,criticalErrorMessage:s,vcsContext:hr()}),3);o.recordMetric(ne(c))}catch(c){o.recordMetric((a=c==null?void 0:c.axiosException)!=null&&a.response?ne(c.axiosException.response):Ie)}}}});function ra(r){let e=new Object,t;return n=>{e!==n?(e=n,t=new Date):new Date().getTime()-t.getTime()>r.timeout&&(b0.error({title:r.title}),process.exit(1))}}var b0,_f=q(()=>{"use strict";({output:b0}=Y())});async function nb(r,e,t){P&&bf.note({title:`Processing task ${t.taskId}`});let n=e.find(s=>t.taskId===s.id);if(!n)throw new Error(`Found unknown task: ${t.taskId}`);let i=await r.retrieveAndExtract(t.hash,t.url);bf.logCommand(v0(n)),process.stdout.write(i),bf.addVerticalSeparator()}function v0(r){let e=r.target.configuration?`:${r.target.configuration}`:"";return["nx","run",`${r.target.project}:${r.target.target}${e}`,Dn(r)].join(" ")}var bf,ib=q(()=>{"use strict";re();Si();({output:bf}=Y())});async function sb(r,e,t,n){let i=null,s={},o=ra({title:`No new completed tasks after ${Ea/1e3} seconds.`,timeout:Ea});for(await Ge(1e3);;){P&&vf.note({title:"Waiting..."});let a=await r.status(t,i);P&&vf.note({title:"Status update",bodyLines:[`executionId: ${t}`,`executionStatus: ${a.executionStatus}`,`number of completed tasks: ${a.completedTasks.length}`,`error: ${a.criticalErrorMessage}`]}),a.criticalErrorMessage&&(vf.error({title:"Distributed Execution Terminated",bodyLines:["Error:",a.criticalErrorMessage]}),process.exit(1)),a.updatedAt||await Ge(5e3),i=a.updatedAt,o(a.completedTasks.length);for(let c of a.completedTasks)s[c.taskId]||(await nb(e,n,c),s[c.taskId]=!0);if(a.executionStatus==="COMPLETED")return{commandStatus:a.commandStatus,runUrl:a.runUrl}}}var vf,ob=q(()=>{"use strict";_f();re();Zr();ib();({output:vf}=Y())});function ab(r){let e=[],t=new Set(Object.values(r.tasks).map(i=>i.id)),n=0;for(;t.size>0;){let i=e[n]=[];for(let s of t){let o=!0;for(let c of r.dependencies[s])if(t.has(c)){o=!1;break}if(!o)continue;let a=r.tasks[s];i.push(a)}for(let s of i)t.delete(s.id);n++}return e}var cb=q(()=>{"use strict"});var na=E((v1,lb)=>{"use strict";var Sf=Symbol("singleComment"),ub=Symbol("multiComment"),S0=()=>"",w0=(r,e,t)=>r.slice(e,t).replace(/\S/g," "),R0=(r,e)=>{let t=e-1,n=0;for(;r[t]==="\\";)t-=1,n+=1;return!!(n%2)};lb.exports=(r,e={})=>{if(typeof r!="string")throw new TypeError(`Expected argument \`jsonString\` to be a \`string\`, got \`${typeof r}\``);let t=e.whitespace===!1?S0:w0,n=!1,i=!1,s=0,o="";for(let a=0;a<r.length;a++){let c=r[a],l=r[a+1];if(!i&&c==='"'&&(R0(r,a)||(n=!n)),!n){if(!i&&c+l==="//")o+=r.slice(s,a),s=a,i=Sf,a++;else if(i===Sf&&c+l===`\r
`){a++,i=!1,o+=t(r,s,a),s=a;continue}else if(i===Sf&&c===`
`)i=!1,o+=t(r,s,a),s=a;else if(!i&&c+l==="/*"){o+=r.slice(s,a),s=a,i=ub,a++;continue}else if(i===ub&&c+l==="*/"){a++,i=!1,o+=t(r,s,a+1),s=a+1;continue}}}return o+(i?t(r.slice(s)):r.slice(s))}});function hb(r,e,t){let n=JSON.parse(T0((0,fb.readFileSync)(`${x0}/nx.json`).toString()));return new wf(e,C0(n,r)).createTaskGraph(t)}function C0(r,e){let t=r.targetDependencies??{},n=e?e.strictlyOrderedTargets??["build"]:[];for(let i of n)t[i]=t[i]||[],t[i].push({target:i,projects:"dependencies"});return t}var fb,x0,O0,T0,wf,db=q(()=>{"use strict";fb=require("fs"),{workspaceRoot:x0}=Y(),{getDependencyConfigs:O0}=dt(),T0=na();wf=class{constructor(e,t){this.projectGraph=e;this.defaultTargetDependencies=t}createTaskGraph(e){let t={roots:[],tasks:{},dependencies:{}};for(let n of e){this.addTaskToGraph(n,t);let i=O0(n.target,this.defaultTargetDependencies,this.projectGraph);i&&this.addTaskDependencies(n,i,e,t)}return t.roots=Object.keys(t.dependencies).filter(n=>t.dependencies[n].length===0),t}addTaskDependencies(e,t,n,i){for(let s of t)if(s.projects==="self")for(let o of n)o.target.project===e.target.project&&o.target.target===s.target&&i.dependencies[e.id].push(o.id);else if(s.projects==="dependencies"){let o=new Set;this.addDependencies(e.target.project,s.target,n,i,e.id,o)}}addDependencies(e,t,n,i,s,o){o.add(e);let a=this.projectGraph.dependencies[e];if(a){let c=a.map(l=>l.target);for(let l of c){if(o.has(l))continue;let u=this.findTask({project:l,target:t},n);u?i.dependencies[s].indexOf(u.id)===-1&&i.dependencies[s].push(u.id):this.addDependencies(l,t,n,i,s,o)}}}findTask({project:e,target:t},n){return n.find(i=>i.target.project===e&&i.target.target===t)}addTaskToGraph(e,t){t.tasks[e.id]=e,t.dependencies[e.id]=[]}}});var xf={};Dt(xf,{nxCloudDistributedTasksRunner:()=>N0});function A0(r,e,t){return r.taskGraph?r.taskGraph:hb(t,r.projectGraph,e)}function D0(r,e,t,n,i){process.on("SIGINT",async()=>{await r.completeRunGroupWithError(e,t,n,i,"Main job was terminated via SIGINT"),process.exit(1)}),process.on("SIGTERM",async()=>{await r.completeRunGroupWithError(e,t,n,i,"Main job was terminated via SIGTERM"),process.exit(1)})}async function k0(r,e,t,n,i,s,o,a,c,l){let u=await r.start(rb(n,i,s,o,ab(a),e,c));return await sb(r,t,u,Object.values(a.tasks))}var Gi,I0,Rf,N0,Of=q(()=>{"use strict";yf();re();kt();Es();ji();gs();bo();gf();ob();cb();db();({output:Gi}=Y()),{cacheDirectory:I0}=dt(),Rf=class{scheduleTask(e){}startTask(e){}endTasks(e){}},N0=async(r,e,t)=>{e.skipNxCache&&Gi.warn({title:"--skip-nx-cache is ignored when using distributed tasks execution (DTE).",bodyLine:["DTE needs the cache to share files between agents."]}),P&&Gi.note({title:"Starting distributed command execution"}),e.lifeCycle=new Rf;let n=me(),i=ve(),s=je(),o=xe(),a=tt(),c=Yi();Er(i,s)||(gr(),process.exit(1));let l=new Jt(xr||e.encryptionKey),u=new Yt(e),f=new Hn(new lr(l,u,e,"dte-main"),I0),h=new zn(e);D0(h,n,i,s,o);try{let d=A0(t,r,e),m=await k0(h,e,f,n,i,s,o,d,a,c);m.commandStatus===0?Gi.success({title:"Successfully completed running the command.",bodyLines:[`See run details at ${m.runUrl}`]}):Gi.error({title:"Command execution failed.",bodyLines:[`See run details at ${m.runUrl}`]}),await sn(e),process.exit(m.commandStatus)}catch(d){Gi.error({title:"Unable to complete a run.",bodyLines:[d.message]}),d.axiosException?console.log(d.axiosException):console.log(d);try{await h.completeRunGroupWithError(n,i,s,o,`Main job terminated with an error: "${d.message}"`)}finally{process.exit(1)}}}});var mb={};Dt(mb,{default:()=>j0});function U0(r,e,t){let{from:n}=hf(),{switchMap:i}=Q_();return n(Ui(e)).pipe(i(s=>s.data.enabled?(Of(),be(xf)).nxCloudDistributedTasksRunner(r,e,t):(Kr.warn({title:"Nx Cloud: Workspace Disabled",bodyLines:["This run and following runs will not use distributed task execution until","the outstanding balance is paid or additional coupons are added for this","workspace. If you believe you are receiving this message in error, please","contact support at cloud-support@nrwl.io.","","Execution will now continue using this machine only."]}),process.env.NX_INVOKED_BY_RUNNER="true",Di(r,e,t))))}async function F0(r,e,t){return(await Ui(e)).data.enabled?(Of(),be(xf)).nxCloudDistributedTasksRunner(r,e,t):(Kr.warn({title:"Nx Cloud: Workspace Disabled",bodyLines:["This run and following runs will not use distributed task execution until","the outstanding balance is paid.","","If you believe you are receiving this message in error, please","contact support at cloud-support@nrwl.io.","","Execution will now continue using this machine only."]}),process.env.NX_INVOKED_BY_RUNNER="true",Di(r,e,t))}function M0(r,e){let t=e.cacheableOperations||[];return r.some(n=>Tf(n,{cacheableOperations:t}))}function q0(r,e){let t=e.cacheableOperations||[];for(let n of r)Tf(n,{cacheableOperations:t})||(Kr.error({title:"Distributed task execution only works for cacheable targets",bodyLines:[`Target '${n.target.project}:${n.target.target}' cannot be executed.`,"To be able to replay the output of the target, distributed task execution only supports cacheable targets.",`You can verify that '${n.target.target}' is part of the list of cacheable targets in the 'nx.json' file.`,'You can invoke this command without distribution by doing "NX_CLOUD_DISTRIBUTED_EXECUTION=false nx ...".']}),process.exit(1))}function B0(r,e){let t=e.cacheableOperations||[];for(let n of r)Tf(n,{cacheableOperations:t})||(Kr.error({title:"Distributed task execution only works for cacheable targets",bodyLines:[`Target ${n.target.project}:${n.target.target} cannot be executed.`,"To be able to replay the output of the target, distributed task execution only supports cacheable targets.",`You can still invoke "nx ${n.target.target} ${n.target.project}" from within a cacheable target when using "nx:run-commands".`]}),process.exit(Wt))}var Kr,pb,L0,Tf,P0,j0,yb=q(()=>{"use strict";S_();$l();zl();re();Vl();({output:Kr}=Y()),{tasksRunner:pb,runnerReturnsPromise:L0,isCacheableTask:Tf}=dt(),P0=async(r,e,t={})=>{let n=t.nxArgs||{},i=!Et&&!e.accessToken,s=n.cloud===!1||ph;return i||s||e.skipNxCache?(i&&Kr.warn({title:"No access token found",bodyLines:["Nx will continue running, but nothing will be written or read from the remote cache.","Run details will also not be available in the Nx Cloud UI."]}),s&&Kr.warn({title:"Nx Cloud Manually Disabled",bodyLines:["Nx will continue running, but nothing will be written or read from the remote cache.","Run details will also not be available in the Nx Cloud UI.","","If this wasn't intentional, check for the NX_NO_CLOUD environment variable, the --no-cloud flag"]}),e.skipNxCache&&Kr.warn({title:"--skip-nx-cache disables the connection to Nx Cloud for the current run.",bodyLines:["The remote cache will not be read from or written to during this run."]}),pb(r,e,t)):mh()?M0(r,e)?Di(r,e,t,!0):pb(r,e,t):(ut(process.env.NX_CLOUD_DISTRIBUTED_EXECUTION_ID)?B0(r,e):await ta(),L_(n.dte)&&!ut(process.env.NX_CLOUD_DISTRIBUTED_EXECUTION_ID)?(q0(r,e),L0?F0(r,e,t):U0(r,e,t)):(process.env.NX_INVOKED_BY_RUNNER="true",Di(r,e,t)))};j0=P0});var Cf={};Dt(Cf,{cleanUpAgents:()=>H0});async function H0(){let r=`${$0}/lockfiles`;return P&&G0.note({title:"Cleaning up agent metadata for this workspace."}),(0,Eb.rm)(r,{recursive:!0,force:!0},e=>{if(e)throw e})}var Eb,G0,$0,If=q(()=>{"use strict";Eb=require("fs");re();({output:G0}=Y()),{cacheDirectory:$0}=dt()});function It(){var n,i;let r=JSON.parse(z0((0,gb.readFileSync)(`${V0}/nx.json`).toString())),e={},t=[];for(let s in r.targetDefaults)r.targetDefaults[s].cache&&t.push(s);return r.nxCloudAccessToken&&(e.accessToken??(e.accessToken=r.nxCloudAccessToken)),r.nxCloudUrl&&(e.url??(e.url=r.nxCloudUrl)),r.nxCloudEncryptionKey&&(e.encryptionKey=r.nxCloudEncryptionKey),r.parallel&&(e.parallel??(e.parallel=r.parallel)),r.cacheDirectory&&(e.cacheDirectory??(e.cacheDirectory=r.cacheDirectory)),t.length&&(e.cacheableOperations??(e.cacheableOperations=t)),{nxJson:r,nxCloudOptions:{...e,...(i=(n=r.tasksRunnerOptions)==null?void 0:n.default)==null?void 0:i.options}}}var gb,z0,V0,Vn=q(()=>{"use strict";gb=require("fs"),z0=na(),{workspaceRoot:V0}=Y()});var Nf={};Dt(Nf,{runCommandAndStoreInCloud:()=>W0});async function W0(){let{nxCloudOptions:r}=It(),e=Te(r),t=new zn(r),n=new fr(r.maskedProperties),i=me(),s=ve(),o=je(),a=xe(),c=X0(process.argv),[l,...u]=c,f=new Date().toISOString(),{statusCode:h,terminalOutput:d}=await K0(l,u),m=new Date().toISOString(),b={statusCode:h,terminalOutput:d,userCommandAndArgsString:c.join(" "),startTime:f,endTime:m,branch:i,runGroup:s,ciExecutionId:o,ciExecutionEnv:a};await J0(e,n,r,b,t),process.exit(h)}function X0(r){let e=r.findIndex(n=>n==="record")+1,t;if(e<process.argv.length){let n=process.argv[e]==="--"?1:0;t=process.argv.slice(e+n)}else console.log("Invalid command. Use `nx-cloud record [my command] [my arg1] [my arg...]`"),process.exit(1);return t}function K0(r,e){return new Promise((t,n)=>{try{let i=vb.spawn(r,e,{stdio:["inherit","pipe","pipe","ipc"]}),s=[];i.stdout.on("data",o=>{process.stdout.write(o),s.push(o.toString())}),i.stderr.on("data",o=>{process.stderr.write(o),s.push(o.toString())}),i.on("exit",(o,a)=>{let c=o??Q0(a||""),l=s.join("");t({statusCode:c,terminalOutput:l})})}catch(i){n(i)}})}function Y0(r,e){let t=r.obfuscate(e.terminalOutput),n=t.length>bb?`TRUNCATED

${t.slice(t.length-bb)}`:t;return{taskId:"nx-cloud-tasks-runner:record-command",target:"record-command",projectName:"nx-cloud-tasks-runner",hash:"",startTime:e.startTime,endTime:e.endTime,hashDetails:{},params:e.userCommandAndArgsString,cacheStatus:"n/a",status:e.statusCode,terminalOutput:n}}async function J0(r,e,t,n,i){let s=`nx-cloud record -- ${n.userCommandAndArgsString}`,o={meta:{nxCloudVersion:"0.0.0"},tasks:[Y0(e,n)],run:{command:s,startTime:n.startTime,endTime:n.endTime,branch:n.branch,runGroup:n.runGroup,sha:n.branch?tt():void 0},branch:n.branch,runGroup:n.runGroup,ciExecutionId:n.ciExecutionId,ciExecutionEnv:n.ciExecutionEnv,machineInfo:Jr()},a=Buffer.from(JSON.stringify(o)),c=await(0,Sb.promisify)(wb.gzip)(a),l=await ce(()=>r.post("/nx-cloud/runs/end",c,{headers:{...r.defaults.headers,"Content-Encoding":"gzip","Content-Type":"application/octet-stream"}}));process.env.NX_CLOUD_SILENT_RECORD!=="true"&&Z0(l.data.runUrl),n.statusCode!==0&&(n.ciExecutionId||n.runGroup)&&await i.completeRunGroupWithError(n.branch,n.runGroup,n.ciExecutionId,n.ciExecutionEnv,null)}function Z0(r){_b.addVerticalSeparator(),_b.note({title:"Nx Cloud: Successfully recorded command output"}),Kt(`You can view or share your output by visiting ${r}`)}function Q0(r){return r==="SIGHUP"?129:r==="SIGINT"?130:r==="SIGTERM"?143:128}var vb,Sb,wb,_b,bb,Af=q(()=>{"use strict";vb=vr(require("child_process")),Sb=require("util"),wb=require("zlib");_t();re();Vn();ii();gf();So();({output:_b}=Y()),bb=2e5});function Rb(){eN.error({title:"Invalid Task Runner Configuration",bodyLines:["To use Distributed Task Execution, your default task runner configuration must",'use the "nx-cloud" task runner.',"",'This can be adjusted in "nx.json".']})}var eN,xb=q(()=>{"use strict";({output:eN}=Y())});var Ob,ia,Tb=q(()=>{"use strict";_t();re();kt();({output:Ob}=Y()),ia=class{constructor(e,t,n,i,s,o){this.branch=t;this.runGroup=n;this.ciExecutionId=i;this.ciExecutionEnv=s;this.agentName=o;this.apiAxiosInstance=Te(e,6e4)}async tasks(e,t,n,i){var o;let s=Ce("dtePollTasks");try{let a=await ce(()=>this.apiAxiosInstance.post("/nx-cloud/executions/tasks",{runGroup:this.runGroup,ciExecutionId:this.ciExecutionId,ciExecutionEnv:this.ciExecutionEnv,agentName:this.agentName,executionId:e,statusCode:t,completedTasks:n,targets:i}));return s.recordMetric(ne(a)),a.data}catch(a){throw s.recordMetric((o=a==null?void 0:a.axiosException)!=null&&o.response?ne(a.axiosException.response):Ie),a}}async completeRunGroupWithError(e){var n;P&&Ob.note({title:"Completing with an error",bodyLines:[`ciExecutionId: ${this.ciExecutionId}`,`ciExecutionEnv: ${this.ciExecutionEnv}`,`runGroup: ${this.runGroup}`,`error: ${e}`]});let t=Ce("completeRunGroup");try{let i=await ce(()=>this.apiAxiosInstance.post("/nx-cloud/executions/complete-run-group",{branch:this.branch,runGroup:this.runGroup,ciExecutionId:this.ciExecutionId,ciExecutionEnv:this.ciExecutionEnv,agentName:this.agentName,criticalErrorMessage:e}));P&&Ob.note({title:"Completed run group with an error"}),t.recordMetric(ne(i))}catch(i){t.recordMetric((n=i==null?void 0:i.axiosException)!=null&&n.response?ne(i.axiosException.response):Ie),console.error(i)}}}});async function Cb(r,e,t,n,i){let s=0,o=null,a=ra({title:`No new messages received after ${ya/1e3} seconds`,timeout:ya}),c=[],l=new Date,u=!1,f={};for(;;){if(P&&$i.note({title:`${r} fetching tasks...`}),o=await e.tasks(o?o.executionId:null,s,c,i),P&&$i.note({title:`${r} received an API Response`,bodyLines:[`completed: ${o.completed}`,`status: ${o.status}`,`retryDuring: ${o.retryDuring}`,`executionId: ${o.executionId}`,`number of tasks: ${o.tasks.length}`,`error: ${o.criticalErrorMessage}`,`maxParallel: ${o.maxParallel}`]}),o.criticalErrorMessage&&($i.error({title:"Distributed Execution Terminated",bodyLines:["Error:",o.criticalErrorMessage]}),process.exit(1)),o!=null&&o.retryDuring&&(o==null?void 0:o.retryDuring)!==0&&!u&&new Date().getTime()-l.getTime()>o.retryDuring){await Ge(2e4);continue}if((o==null?void 0:o.status)!==void 0){if(o.status==="RUN_GROUP_COMPLETED"||o.status==="NO_FURTHER_TASKS_TO_RUN")return}else if(o.completed)return;if(a(o.tasks.map(d=>d.taskId).join("")),!o.executionId){P&&$i.note({title:`${r} waiting...`}),await Ge(5e3),s=0,c=[];continue}if(u=!0,o.completedTasks)for(let d of o.completedTasks)f[d.taskId]||($i.note({title:`${r} downloading artifacts for ${d.taskId} Hash: ${d.hash}}`}),await t.retrieveAndExtract(d.hash,d.url),f[d.taskId]=!0);let h=await n(o.executionId,o.tasks,o.maxParallel);for(let d of h.completedTasks)f[d.taskId]=!0;s=h.completedStatusCode,c=h.completedTasks}}var $i,Ib=q(()=>{"use strict";_f();re();Zr();({output:$i}=Y())});var sa=E((rP,Fb)=>{"use strict";var tN=require("util"),Nb=require("path"),rN=require("fs");function Hi(r){if(r!==r.toLowerCase()&&r!==r.toUpperCase()||(r=r.toLowerCase()),r.indexOf("-")===-1&&r.indexOf("_")===-1)return r;{let t="",n=!1,i=r.match(/^-+/);for(let s=i?i[0].length:0;s<r.length;s++){let o=r.charAt(s);n&&(n=!1,o=o.toUpperCase()),s!==0&&(o==="-"||o==="_")?n=!0:o!=="-"&&o!=="_"&&(t+=o)}return t}}function Lb(r,e){let t=r.toLowerCase();e=e||"-";let n="";for(let i=0;i<r.length;i++){let s=t.charAt(i),o=r.charAt(i);s!==o&&i>0?n+=`${e}${t.charAt(i)}`:n+=o}return n}function Pb(r){return r==null?!1:typeof r=="number"||/^0x[0-9a-f]+$/i.test(r)?!0:/^0[^.]/.test(r)?!1:/^[-]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(r)}function nN(r){if(Array.isArray(r))return r.map(o=>typeof o!="string"?o+"":o);r=r.trim();let e=0,t=null,n=null,i=null,s=[];for(let o=0;o<r.length;o++){if(t=n,n=r.charAt(o),n===" "&&!i){t!==" "&&e++;continue}n===i?i=null:(n==="'"||n==='"')&&!i&&(i=n),s[e]||(s[e]=""),s[e]+=n}return s}var pt;(function(r){r.BOOLEAN="boolean",r.STRING="string",r.NUMBER="number",r.ARRAY="array"})(pt||(pt={}));var zt,Uf=class{constructor(e){zt=e}parse(e,t){let n=Object.assign({alias:void 0,array:void 0,boolean:void 0,config:void 0,configObjects:void 0,configuration:void 0,coerce:void 0,count:void 0,default:void 0,envPrefix:void 0,narg:void 0,normalize:void 0,string:void 0,number:void 0,__:void 0,key:void 0},t),i=nN(e),s=typeof e=="string",o=iN(Object.assign(Object.create(null),n.alias)),a=Object.assign({"boolean-negation":!0,"camel-case-expansion":!0,"combine-arrays":!1,"dot-notation":!0,"duplicate-arguments-array":!0,"flatten-duplicate-arrays":!0,"greedy-arrays":!0,"halt-at-non-option":!1,"nargs-eats-options":!1,"negation-prefix":"no-","parse-numbers":!0,"parse-positional-numbers":!0,"populate--":!1,"set-placeholder-key":!1,"short-option-groups":!0,"strip-aliased":!1,"strip-dashed":!1,"unknown-options-as-args":!1},n.configuration),c=Object.assign(Object.create(null),n.default),l=n.configObjects||[],u=n.envPrefix,f=a["populate--"],h=f?"--":"_",d=Object.create(null),m=Object.create(null),b=n.__||zt.format,p={aliases:Object.create(null),arrays:Object.create(null),bools:Object.create(null),strings:Object.create(null),numbers:Object.create(null),counts:Object.create(null),normalize:Object.create(null),configs:Object.create(null),nargs:Object.create(null),coercions:Object.create(null),keys:[]},w=/^-([0-9]+(\.[0-9]+)?|\.[0-9]+)$/,k=new RegExp("^--"+a["negation-prefix"]+"(.+)");[].concat(n.array||[]).filter(Boolean).forEach(function(y){let _=typeof y=="object"?y.key:y,x=Object.keys(y).map(function(v){return{boolean:"bools",string:"strings",number:"numbers"}[v]}).filter(Boolean).pop();x&&(p[x][_]=!0),p.arrays[_]=!0,p.keys.push(_)}),[].concat(n.boolean||[]).filter(Boolean).forEach(function(y){p.bools[y]=!0,p.keys.push(y)}),[].concat(n.string||[]).filter(Boolean).forEach(function(y){p.strings[y]=!0,p.keys.push(y)}),[].concat(n.number||[]).filter(Boolean).forEach(function(y){p.numbers[y]=!0,p.keys.push(y)}),[].concat(n.count||[]).filter(Boolean).forEach(function(y){p.counts[y]=!0,p.keys.push(y)}),[].concat(n.normalize||[]).filter(Boolean).forEach(function(y){p.normalize[y]=!0,p.keys.push(y)}),typeof n.narg=="object"&&Object.entries(n.narg).forEach(([y,_])=>{typeof _=="number"&&(p.nargs[y]=_,p.keys.push(y))}),typeof n.coerce=="object"&&Object.entries(n.coerce).forEach(([y,_])=>{typeof _=="function"&&(p.coercions[y]=_,p.keys.push(y))}),typeof n.config<"u"&&(Array.isArray(n.config)||typeof n.config=="string"?[].concat(n.config).filter(Boolean).forEach(function(y){p.configs[y]=!0}):typeof n.config=="object"&&Object.entries(n.config).forEach(([y,_])=>{(typeof _=="boolean"||typeof _=="function")&&(p.configs[y]=_)})),A(n.key,o,n.default,p.arrays),Object.keys(c).forEach(function(y){(p.aliases[y]||[]).forEach(function(_){c[_]=c[y]})});let O=null;Vt();let C=[],L=Object.assign(Object.create(null),{_:[]}),T={};for(let y=0;y<i.length;y++){let _=i[y],x=_.replace(/^-{3,}/,"---"),v,g,F,D,M,pe;if(_!=="--"&&/^-/.test(_)&&ct(_))z(_);else if(x.match(/^---+(=|$)/)){z(_);continue}else if(_.match(/^--.+=/)||!a["short-option-groups"]&&_.match(/^-.+=/))D=_.match(/^--?([^=]+)=([\s\S]*)$/),D!==null&&Array.isArray(D)&&D.length>=3&&(S(D[1],p.arrays)?y=I(y,D[1],i,D[2]):S(D[1],p.nargs)!==!1?y=G(y,D[1],i,D[2]):N(D[1],D[2],!0));else if(_.match(k)&&a["boolean-negation"])D=_.match(k),D!==null&&Array.isArray(D)&&D.length>=2&&(g=D[1],N(g,S(g,p.arrays)?[!1]:!1));else if(_.match(/^--.+/)||!a["short-option-groups"]&&_.match(/^-[^-]+/))D=_.match(/^--?(.+)/),D!==null&&Array.isArray(D)&&D.length>=2&&(g=D[1],S(g,p.arrays)?y=I(y,g,i):S(g,p.nargs)!==!1?y=G(y,g,i):(M=i[y+1],M!==void 0&&(!M.match(/^-/)||M.match(w))&&!S(g,p.bools)&&!S(g,p.counts)||/^(true|false)$/.test(M)?(N(g,M),y++):N(g,_e(g))));else if(_.match(/^-.\..+=/))D=_.match(/^-([^=]+)=([\s\S]*)$/),D!==null&&Array.isArray(D)&&D.length>=3&&N(D[1],D[2]);else if(_.match(/^-.\..+/)&&!_.match(w))M=i[y+1],D=_.match(/^-(.\..+)/),D!==null&&Array.isArray(D)&&D.length>=2&&(g=D[1],M!==void 0&&!M.match(/^-/)&&!S(g,p.bools)&&!S(g,p.counts)?(N(g,M),y++):N(g,_e(g)));else if(_.match(/^-[^-]+/)&&!_.match(w)){F=_.slice(1,-1).split(""),v=!1;for(let Ue=0;Ue<F.length;Ue++){if(M=_.slice(Ue+2),F[Ue+1]&&F[Ue+1]==="="){pe=_.slice(Ue+3),g=F[Ue],S(g,p.arrays)?y=I(y,g,i,pe):S(g,p.nargs)!==!1?y=G(y,g,i,pe):N(g,pe),v=!0;break}if(M==="-"){N(F[Ue],M);continue}if(/[A-Za-z]/.test(F[Ue])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(M)&&S(M,p.bools)===!1){N(F[Ue],M),v=!0;break}if(F[Ue+1]&&F[Ue+1].match(/\W/)){N(F[Ue],M),v=!0;break}else N(F[Ue],_e(F[Ue]))}g=_.slice(-1)[0],!v&&g!=="-"&&(S(g,p.arrays)?y=I(y,g,i):S(g,p.nargs)!==!1?y=G(y,g,i):(M=i[y+1],M!==void 0&&(!/^(-|--)[^-]/.test(M)||M.match(w))&&!S(g,p.bools)&&!S(g,p.counts)||/^(true|false)$/.test(M)?(N(g,M),y++):N(g,_e(g))))}else if(_.match(/^-[0-9]$/)&&_.match(w)&&S(_.slice(1),p.bools))g=_.slice(1),N(g,_e(g));else if(_==="--"){C=i.slice(y+1);break}else if(a["halt-at-non-option"]){C=i.slice(y);break}else z(_)}$(L,!0),$(L,!1),J(L),K(),le(L,p.aliases,c,!0),U(L),a["set-placeholder-key"]&&H(L),Object.keys(p.counts).forEach(function(y){Re(L,y.split("."))||N(y,0)}),f&&C.length&&(L[h]=[]),C.forEach(function(y){L[h].push(y)}),a["camel-case-expansion"]&&a["strip-dashed"]&&Object.keys(L).filter(y=>y!=="--"&&y.includes("-")).forEach(y=>{delete L[y]}),a["strip-aliased"]&&[].concat(...Object.keys(o).map(y=>o[y])).forEach(y=>{a["camel-case-expansion"]&&y.includes("-")&&delete L[y.split(".").map(_=>Hi(_)).join(".")],delete L[y]});function z(y){let _=V("_",y);(typeof _=="string"||typeof _=="number")&&L._.push(_)}function G(y,_,x,v){let g,F=S(_,p.nargs);if(F=typeof F!="number"||isNaN(F)?1:F,F===0)return Pe(v)||(O=Error(b("Argument unexpected for: %s",_))),N(_,_e(_)),y;let D=Pe(v)?0:1;if(a["nargs-eats-options"])x.length-(y+1)+D<F&&(O=Error(b("Not enough arguments following: %s",_))),D=F;else{for(g=y+1;g<x.length&&(!x[g].match(/^-[^0-9]/)||x[g].match(w)||ct(x[g]));g++)D++;D<F&&(O=Error(b("Not enough arguments following: %s",_)))}let M=Math.min(D,F);for(!Pe(v)&&M>0&&(N(_,v),M--),g=y+1;g<M+y+1;g++)N(_,x[g]);return y+M}function I(y,_,x,v){let g=[],F=v||x[y+1],D=S(_,p.nargs);if(S(_,p.bools)&&!/^(true|false)$/.test(F))g.push(!0);else if(Pe(F)||Pe(v)&&/^-/.test(F)&&!w.test(F)&&!ct(F)){if(c[_]!==void 0){let M=c[_];g=Array.isArray(M)?M:[M]}}else{Pe(v)||g.push(X(_,v,!0));for(let M=y+1;M<x.length&&!(!a["greedy-arrays"]&&g.length>0||D&&typeof D=="number"&&g.length>=D||(F=x[M],/^-/.test(F)&&!w.test(F)&&!ct(F)));M++)y=M,g.push(X(_,F,s))}return typeof D=="number"&&(D&&g.length<D||isNaN(D)&&g.length===0)&&(O=Error(b("Not enough arguments following: %s",_))),N(_,g),y}function N(y,_,x=s){if(/-/.test(y)&&a["camel-case-expansion"]){let F=y.split(".").map(function(D){return Hi(D)}).join(".");j(y,F)}let v=X(y,_,x),g=y.split(".");R(L,g,v),p.aliases[y]&&p.aliases[y].forEach(function(F){let D=F.split(".");R(L,D,v)}),g.length>1&&a["dot-notation"]&&(p.aliases[g[0]]||[]).forEach(function(F){let D=F.split("."),M=[].concat(g);M.shift(),D=D.concat(M),(p.aliases[y]||[]).includes(D.join("."))||R(L,D,v)}),S(y,p.normalize)&&!S(y,p.arrays)&&[y].concat(p.aliases[y]||[]).forEach(function(D){Object.defineProperty(T,D,{enumerable:!0,get(){return _},set(M){_=typeof M=="string"?zt.normalize(M):M}})})}function j(y,_){p.aliases[y]&&p.aliases[y].length||(p.aliases[y]=[_],d[_]=!0),p.aliases[_]&&p.aliases[_].length||j(_,y)}function X(y,_,x){x&&(_=sN(_)),(S(y,p.bools)||S(y,p.counts))&&typeof _=="string"&&(_=_==="true");let v=Array.isArray(_)?_.map(function(g){return V(y,g)}):V(y,_);return S(y,p.counts)&&(Pe(v)||typeof v=="boolean")&&(v=Df()),S(y,p.normalize)&&S(y,p.arrays)&&(Array.isArray(_)?v=_.map(g=>zt.normalize(g)):v=zt.normalize(_)),v}function V(y,_){return!a["parse-positional-numbers"]&&y==="_"||!S(y,p.strings)&&!S(y,p.bools)&&!Array.isArray(_)&&(Pb(_)&&a["parse-numbers"]&&Number.isSafeInteger(Math.floor(parseFloat(`${_}`)))||!Pe(_)&&S(y,p.numbers))&&(_=Number(_)),_}function J(y){let _=Object.create(null);le(_,p.aliases,c),Object.keys(p.configs).forEach(function(x){let v=y[x]||_[x];if(v)try{let g=null,F=zt.resolve(zt.cwd(),v),D=p.configs[x];if(typeof D=="function"){try{g=D(F)}catch(M){g=M}if(g instanceof Error){O=g;return}}else g=zt.require(F);B(g)}catch(g){g.name==="PermissionDenied"?O=g:y[x]&&(O=Error(b("Invalid JSON config file: %s",v)))}})}function B(y,_){Object.keys(y).forEach(function(x){let v=y[x],g=_?_+"."+x:x;typeof v=="object"&&v!==null&&!Array.isArray(v)&&a["dot-notation"]?B(v,g):(!Re(L,g.split("."))||S(g,p.arrays)&&a["combine-arrays"])&&N(g,v)})}function K(){typeof l<"u"&&l.forEach(function(y){B(y)})}function $(y,_){if(typeof u>"u")return;let x=typeof u=="string"?u:"",v=zt.env();Object.keys(v).forEach(function(g){if(x===""||g.lastIndexOf(x,0)===0){let F=g.split("__").map(function(D,M){return M===0&&(D=D.substring(x.length)),Hi(D)});(_&&p.configs[F.join(".")]||!_)&&!Re(y,F)&&N(F.join("."),v[g])}})}function U(y){let _,x=new Set;Object.keys(y).forEach(function(v){if(!x.has(v)&&(_=S(v,p.coercions),typeof _=="function"))try{let g=V(v,_(y[v]));[].concat(p.aliases[v]||[],v).forEach(F=>{x.add(F),y[F]=g})}catch(g){O=g}})}function H(y){return p.keys.forEach(_=>{~_.indexOf(".")||typeof y[_]>"u"&&(y[_]=void 0)}),y}function le(y,_,x,v=!1){Object.keys(x).forEach(function(g){Re(y,g.split("."))||(R(y,g.split("."),x[g]),v&&(m[g]=!0),(_[g]||[]).forEach(function(F){Re(y,F.split("."))||R(y,F.split("."),x[g])}))})}function Re(y,_){let x=y;a["dot-notation"]||(_=[_.join(".")]),_.slice(0,-1).forEach(function(g){x=x[g]||{}});let v=_[_.length-1];return typeof x!="object"?!1:v in x}function R(y,_,x){let v=y;a["dot-notation"]||(_=[_.join(".")]),_.slice(0,-1).forEach(function(pe){pe=Ab(pe),typeof v=="object"&&v[pe]===void 0&&(v[pe]={}),typeof v[pe]!="object"||Array.isArray(v[pe])?(Array.isArray(v[pe])?v[pe].push({}):v[pe]=[v[pe],{}],v=v[pe][v[pe].length-1]):v=v[pe]});let g=Ab(_[_.length-1]),F=S(_.join("."),p.arrays),D=Array.isArray(x),M=a["duplicate-arguments-array"];!M&&S(g,p.nargs)&&(M=!0,(!Pe(v[g])&&p.nargs[g]===1||Array.isArray(v[g])&&v[g].length===p.nargs[g])&&(v[g]=void 0)),x===Df()?v[g]=Df(v[g]):Array.isArray(v[g])?M&&F&&D?v[g]=a["flatten-duplicate-arrays"]?v[g].concat(x):(Array.isArray(v[g][0])?v[g]:[v[g]]).concat([x]):!M&&!!F==!!D?v[g]=x:v[g]=v[g].concat([x]):v[g]===void 0&&F?v[g]=D?x:[x]:M&&!(v[g]===void 0||S(g,p.counts)||S(g,p.bools))?v[g]=[v[g],x]:v[g]=x}function A(...y){y.forEach(function(_){Object.keys(_||{}).forEach(function(x){p.aliases[x]||(p.aliases[x]=[].concat(o[x]||[]),p.aliases[x].concat(x).forEach(function(v){if(/-/.test(v)&&a["camel-case-expansion"]){let g=Hi(v);g!==x&&p.aliases[x].indexOf(g)===-1&&(p.aliases[x].push(g),d[g]=!0)}}),p.aliases[x].concat(x).forEach(function(v){if(v.length>1&&/[A-Z]/.test(v)&&a["camel-case-expansion"]){let g=Lb(v,"-");g!==x&&p.aliases[x].indexOf(g)===-1&&(p.aliases[x].push(g),d[g]=!0)}}),p.aliases[x].forEach(function(v){p.aliases[v]=[x].concat(p.aliases[x].filter(function(g){return v!==g}))}))})})}function S(y,_){let x=[].concat(p.aliases[y]||[],y),v=Object.keys(_),g=x.find(F=>v.includes(F));return g?_[g]:!1}function W(y){let _=Object.keys(p);return[].concat(_.map(v=>p[v])).some(function(v){return Array.isArray(v)?v.includes(y):v[y]})}function de(y,..._){return[].concat(..._).some(function(v){let g=y.match(v);return g&&W(g[1])})}function At(y){if(y.match(w)||!y.match(/^-[^-]+/))return!1;let _=!0,x,v=y.slice(1).split("");for(let g=0;g<v.length;g++){if(x=y.slice(g+2),!W(v[g])){_=!1;break}if(v[g+1]&&v[g+1]==="="||x==="-"||/[A-Za-z]/.test(v[g])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(x)||v[g+1]&&v[g+1].match(/\W/))break}return _}function ct(y){return a["unknown-options-as-args"]&&yt(y)}function yt(y){return y=y.replace(/^-{3,}/,"--"),y.match(w)||At(y)?!1:!de(y,/^-+([^=]+?)=[\s\S]*$/,k,/^-+([^=]+?)$/,/^-+([^=]+?)-$/,/^-+([^=]+?\d+)$/,/^-+([^=]+?)\W+.*$/)}function _e(y){return!S(y,p.bools)&&!S(y,p.counts)&&`${y}`in c?c[y]:Yr(br(y))}function Yr(y){return{[pt.BOOLEAN]:!0,[pt.STRING]:"",[pt.NUMBER]:void 0,[pt.ARRAY]:[]}[y]}function br(y){let _=pt.BOOLEAN;return S(y,p.strings)?_=pt.STRING:S(y,p.numbers)?_=pt.NUMBER:S(y,p.bools)?_=pt.BOOLEAN:S(y,p.arrays)&&(_=pt.ARRAY),_}function Pe(y){return y===void 0}function Vt(){Object.keys(p.counts).find(y=>S(y,p.arrays)?(O=Error(b("Invalid configuration: %s, opts.count excludes opts.array.",y)),!0):S(y,p.nargs)?(O=Error(b("Invalid configuration: %s, opts.count excludes opts.narg.",y)),!0):!1)}return{aliases:Object.assign({},p.aliases),argv:Object.assign(T,L),configuration:a,defaulted:Object.assign({},m),error:O,newAliases:Object.assign({},d)}}};function iN(r){let e=[],t=Object.create(null),n=!0;for(Object.keys(r).forEach(function(i){e.push([].concat(r[i],i))});n;){n=!1;for(let i=0;i<e.length;i++)for(let s=i+1;s<e.length;s++)if(e[i].filter(function(a){return e[s].indexOf(a)!==-1}).length){e[i]=e[i].concat(e[s]),e.splice(s,1),n=!0;break}}return e.forEach(function(i){i=i.filter(function(o,a,c){return c.indexOf(o)===a});let s=i.pop();s!==void 0&&typeof s=="string"&&(t[s]=i)}),t}function Df(r){return r!==void 0?r+1:1}function Ab(r){return r==="__proto__"?"___proto___":r}function sN(r){return typeof r=="string"&&(r[0]==="'"||r[0]==='"')&&r[r.length-1]===r[0]?r.substring(1,r.length-1):r}var kf,Lf,Pf,Db=process&&process.env&&process.env.YARGS_MIN_NODE_VERSION?Number(process.env.YARGS_MIN_NODE_VERSION):12,kb=(Lf=(kf=process==null?void 0:process.versions)===null||kf===void 0?void 0:kf.node)!==null&&Lf!==void 0?Lf:(Pf=process==null?void 0:process.version)===null||Pf===void 0?void 0:Pf.slice(1);if(kb&&Number(kb.match(/^([^.]+)/)[1])<Db)throw Error(`yargs parser supports a minimum Node.js version of ${Db}. Read our version support policy: https://github.com/yargs/yargs-parser#supported-nodejs-versions`);var oN=process?process.env:{},Ub=new Uf({cwd:process.cwd,env:()=>oN,format:tN.format,normalize:Nb.normalize,resolve:Nb.resolve,require:r=>{if(typeof require<"u")return require(r);if(r.match(/\.json$/))return JSON.parse(rN.readFileSync(r,"utf8"));throw Error("only .json config files are supported in ESM")}}),zi=function(e,t){return Ub.parse(e.slice(),t).argv};zi.detailed=function(r,e){return Ub.parse(r.slice(),e)};zi.camelCase=Hi;zi.decamelize=Lb;zi.looksLikeNumber=Pb;Fb.exports=zi});async function Mb(r){let e=await aN(r);return async(t,n,i)=>{let s=n.map(c=>{let l=cN(c.params,{configuration:{"camel-case-expansion":!1,"dot-notation":!0}}),u=Uu(l);return l._.length==0&&delete l._,{id:c.taskId,target:{project:c.projectName,target:c.target,configuration:c.configuration},overrides:{...l,__overrides_unparsed__:u},projectRoot:c.projectRoot,cache:c.cache}});process.env.NX_CACHE_FAILURES="true",process.env.NX_CLOUD_DISTRIBUTED_EXECUTION_ID=t,process.env.NX_STREAM_OUTPUT="true",process.env.NX_PREFIX_OUTPUT="true";let o=await e.invoke({tasks:s,parallel:i});return{completedTasks:Object.values(o.taskGraph.tasks).map(c=>({taskId:c.id,hash:c.hash})),completedStatusCode:o.status}}}var aN,cN,qb=q(()=>{"use strict";Si();({initTasksRunner:aN}=dt()),cN=sa()});async function jb(){let r=hN();return async function(t,n,i){let s=0,o=[];for(let a of fN(n)){let c=a.configuration?`--configuration=${a.configuration}`:"",l=i>1?` --parallel --max-parallel=${i}`:"",u=`npx nx run-many --target=${a.target} ${c} --projects=${a.projects.join(",")} ${a.params}${l}`;P&&uN.note({title:`Executing: '${u}'`});try{(0,Bb.execSync)(u,{stdio:["ignore","inherit","inherit"],env:{...process.env,NX_CACHE_FAILURES:"true",NX_CLOUD_DISTRIBUTED_EXECUTION_ID:t,NX_STREAM_OUTPUT:"true",NX_PREFIX_OUTPUT:"true"}}),o.push(...r(t))}catch(f){if(f.status===Wt)throw f;s=1,o.push(...r(t))}}return{completedStatusCode:s,completedTasks:o}}}function fN(r){let e=[];return r.forEach(t=>{let n=e.find(i=>i.target===t.target&&i.configuration===t.configuration);n?n.projects.push(t.projectName):e.push({target:t.target,projects:[t.projectName],params:t.params,configuration:t.configuration})}),e}function hN(){return r=>{let e=`Command execution failed (distributed task execution: ${r}). Tasks hashes haven't been recorded.`,t;try{let n=`${lN}/tasks-hashes-${r}`;t=JSON.parse((0,oa.readFileSync)(n).toString()),(0,oa.unlinkSync)(n)}catch{throw new Error(e)}if(t.length==0)throw new Error(e);return t}}var Bb,oa,uN,lN,Gb=q(()=>{"use strict";Bb=require("child_process"),oa=require("fs");re();({output:uN}=Y()),{cacheDirectory:lN}=dt()});var Mf={};Dt(Mf,{startAgent:()=>mN});async function mN(){let r=me(),e=ve(),t=je(),n=xe(),i=yN();Er(e,t)||(gr(),process.exit(1)),_r.targets&&_r.targets.length?Vi.note({title:`Starting an agent for running Nx target(s) [${_r.targets.join(", ")}]`}):Vi.note({title:`Starting Agent '${i}' for running Nx tasks`});let{nxJson:s,nxCloudOptions:o}=It();function a(){var b;let m=(b=s.tasksRunnerOptions)==null?void 0:b.default;return s.nxCloudAccessToken&&!m?!0:!(m!=null&&m.runner)&&process.env.NX_CLOUD_ACCESS_TOKEN||!(m!=null&&m.runner)&&s.nxCloudAccessToken||(m==null?void 0:m.runner)==="nx-cloud"||(m==null?void 0:m.runner)==="@nrwl/nx-cloud"}if(!a())return Rb(),process.exit(1);await Ui(o)||(Vi.error({title:"Nx Cloud: Workspace is disabled",bodyLines:["Distributed Task Execution is disabled when your workspace is disabled","","Organization administrators can find more information on the 'Billing' page in the Nx Cloud Webapp"]}),process.exit(1));let l=new ia(o,r,e,t,n,i);EN(l,o,i);let u=new Jt(xr||o.encryptionKey),f=new Yt(o),h=new Hn(new lr(u,f,o,"dte-agent"),$b),d=pN?await Mb(o):await jb();return Cb(i,l,h,d,_r.targets).then(async m=>(await sn(o),m)).catch(async m=>{throw await l.completeRunGroupWithError(`Critical Error in Agent: "${m.message}"`),m})}function yN(){return process.env.NX_AGENT_NAME!==void 0?process.env.NX_AGENT_NAME:process.env.CIRCLECI!==void 0&&process.env.CIRCLE_STAGE?process.env.CIRCLE_STAGE:process.env.CIRCLECI!==void 0&&process.env.CIRCLE_JOB?process.env.CIRCLE_JOB:`Agent ${Math.floor(Math.random()*1e5)}`}function EN(r,e,t){let n=`${$b}/lockfiles`,i=`${n}/${t}.lock`;(0,mt.existsSync)(n)||(0,mt.mkdirSync)(n,{recursive:!0});let s=(0,mt.readdirSync)(n);s.length&&(s.includes(`${t}.lock`)&&(Vi.error({title:"Duplicate Agent ID Detected",bodyLines:["We have detected another agent with this ID running in this workspace. This should not happen.","",'End all currently running agents, run "npx nx-cloud clean-up-agents", and try again.']}),process.exit(1)),Vi.warn({title:"Other Nx Cloud Agents Detected",bodyLines:["We have detected other agents running in this workspace. This can cause unexpected behavior.","","This can also be a false positive caused by agents that did not shut down correctly.",'If you believe this is the case, run "npx nx-cloud clean-up-agents".']})),(0,mt.writeFileSync)(i,""),process.on("exit",o=>{Ff(i,o)}),process.on("SIGTERM",async()=>{await r.completeRunGroupWithError("Agent was terminated via SIGTERM"),Ff(i,1)}),process.on("SIGINT",async()=>{await r.completeRunGroupWithError("Agent was terminated via SIGINT"),Ff(i,1)})}function Ff(r,e){(0,mt.existsSync)(r)&&((0,mt.unlinkSync)(r),process.exit(e))}var mt,dN,vP,Vi,SP,pN,$b,_r,qf=q(()=>{"use strict";mt=require("fs");yf();re();Vn();Vl();kt();Es();xb();ji();gs();bo();Tb();Ib();qb();Gb();dN=sa(),vP=na(),{output:Vi,workspaceRoot:SP}=Y(),{initTasksRunner:pN,cacheDirectory:$b}=dt(),_r=dN(process.argv,{array:["targets"],default:{}});_r.targets&&_r.targets.length===1&&(_r.targets=_r.targets[0].split(",").map(r=>r.trim()))});function Hb(r,e){if([".yml",".yaml"].some(i=>r==null?void 0:r.endsWith(i)))try{let i=u=>(0,Bf.execSync)(`${u}`,{stdio:"pipe"}).toString().trim().split(`
`).filter(Boolean),s=process.env.NX_BASE??(0,Bf.execSync)(`git rev-parse ${e}~1`,{stdio:"pipe"}).toString().trim()??e,o=i(`npx nx show projects --affected --base=${s}`),a=i("npx nx show projects"),c=o.length/a.length,l=Math.round(c*100);P&&gN.note({title:`Affected project ratio: ${l}%`})}catch(i){P&&console.error("Error calculating affected project ratio: ",i);return}}var Bf,gN,zb=q(()=>{"use strict";Bf=require("child_process");re();({output:gN}=Y())});var Vb,Wn,jf=q(()=>{"use strict";_t();Oo();kt();({output:Vb}=Y()),Wn=class{constructor(e){this.apiAxiosInstance=Te(e)}async createRunGroup(e,t,n,i,s,o,a,c,l,u,f,h,d=!1){var b;let m=Ce("createRunGroup");try{let p=await ce(()=>this.apiAxiosInstance.post("/nx-cloud/executions/create-run-group",{branch:e,runGroup:t,ciExecutionId:n,ciExecutionEnv:i,stopAgentsOnFailure:s,agentCount:o,stopAgentsAfter:a,commitSha:l,distributesOn:c,affectedProjectRatio:f,vcsContext:hr(),envVars:h,requireExplicitCompletion:d}));m.recordMetric(ne(p))}catch(p){m.recordMetric((b=p==null?void 0:p.axiosException)!=null&&b.response?ne(p.axiosException.response):Ie),Vb.error({title:p.message}),process.exit(1)}}async completeRunGroup(e,t,n,i){var o;let s=Ce("completeRunGroup");try{let a=await ce(()=>this.apiAxiosInstance.post("/nx-cloud/executions/complete-run-group",{branch:e,runGroup:t,ciExecutionId:n,ciExecutionEnv:i,vcsContext:hr()}));s.recordMetric(ne(a))}catch(a){s.recordMetric((o=a==null?void 0:a.axiosException)!=null&&o.response?ne(a.axiosException.response):Ie),Vb.error({title:a.message}),process.exit(1)}}async sendHeartbeat(e,t){await this.apiAxiosInstance.post("/nx-cloud/heartbeat",{ciExecutionId:e,runGroup:t})}}});var Gf={};Dt(Gf,{startCiRun:()=>bN});async function bN(){var u;let{nxCloudOptions:r}=It(),e=me(),t=ve(),n=je(),i=xe(),s=tt(),o=Yi(),a=Hb(Nt.distributesOn,((u=r.affected)==null?void 0:u.defaultBase)??"main"),c=Eh(Nt.withEnvVars,r.accessToken);Er(t,n)||(gr(),process.exit(1)),P&&Wb.note({title:`Creating run group. branch: ${e}, ciExecutionId: ${n}, ciExecutionEnv: ${i}, runGroup: ${t}, commitSha: ${s}, requireExplicitCompletion: ${Nt.requireExplicitCompletion}`}),Nt.commandCount&&(Wb.error({title:"--command-count is deprecated. Use --stop-agents-after instead.",bodyLines:['E.g., npx nx-cloud start-ci-run --stop-agents-after="e2e"']}),process.exit(1)),await new Wn(r).createRunGroup(e,t,n,i,Nt.stopAgentsOnFailure,Nt.agentCount,Nt.stopAgentsAfter,Nt.distributesOn,s,o,a,c,Nt.requireExplicitCompletion),await ta(),Nt.useDteByDefault&&k_()}var _N,Wb,UP,Nt,$f=q(()=>{"use strict";$l();zl();re();zb();Vn();jf();ji();_N=sa(),{output:Wb,workspaceRoot:UP}=Y(),Nt=_N(process.argv,{boolean:["stop-agents-on-failure","use-dte-by-default","require-explicit-completion"],number:["agent-count","command-count"],string:["stop-agents-after"],default:{useDteByDefault:!0}})});var aa={};Dt(aa,{stopAllAgents:()=>SN});async function SN(){let r=me(),e=ve(),t=je(),n=xe();Er(e,t)||(gr(),process.exit(1)),P&&vN.note({title:`Stopping all agents running tasks for run group. branch: ${r}, ciExecutionId: ${t}, ciExecutionEnv: ${n}, runGroup: ${e}`});let{nxCloudOptions:i}=It();await new Wn(i).completeRunGroup(r,e,t,n)}var vN,ca=q(()=>{"use strict";re();Vn();jf();ji();({output:vN}=Y())});var zf=E((jP,Kb)=>{"use strict";var Xb=require("fs"),Hf;function wN(){try{return Xb.statSync("/.dockerenv"),!0}catch{return!1}}function RN(){try{return Xb.readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch{return!1}}Kb.exports=()=>(Hf===void 0&&(Hf=wN()||RN()),Hf)});var Zb=E((GP,Vf)=>{"use strict";var xN=require("os"),ON=require("fs"),Yb=zf(),Jb=()=>{if(process.platform!=="linux")return!1;if(xN.release().toLowerCase().includes("microsoft"))return!Yb();try{return ON.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")?!Yb():!1}catch{return!1}};process.env.__IS_WSL_TEST__?Vf.exports=Jb:Vf.exports=Jb()});var ev=E(($P,Qb)=>{"use strict";Qb.exports=(r,e,t)=>{let n=i=>Object.defineProperty(r,e,{value:i,enumerable:!0,writable:!0});return Object.defineProperty(r,e,{configurable:!0,enumerable:!0,get(){let i=t();return n(i),i},set(i){n(i)}}),r}});var av=E((HP,ov)=>{"use strict";var TN=require("path"),CN=require("child_process"),{promises:la,constants:sv}=require("fs"),ua=Zb(),IN=zf(),Xf=ev(),tv=TN.join(__dirname,"xdg-open"),{platform:Xn,arch:rv}=process,NN=()=>{try{return la.statSync("/run/.containerenv"),!0}catch{return!1}},Wf;function AN(){return Wf===void 0&&(Wf=NN()||IN()),Wf}var DN=(()=>{let r="/mnt/",e;return async function(){if(e)return e;let t="/etc/wsl.conf",n=!1;try{await la.access(t,sv.F_OK),n=!0}catch{}if(!n)return r;let i=await la.readFile(t,{encoding:"utf8"}),s=/(?<!#.*)root\s*=\s*(?<mountPoint>.*)/g.exec(i);return s?(e=s.groups.mountPoint.trim(),e=e.endsWith("/")?e:`${e}/`,e):r}})(),nv=async(r,e)=>{let t;for(let n of r)try{return await e(n)}catch(i){t=i}throw t},fa=async r=>{if(r={wait:!1,background:!1,newInstance:!1,allowNonzeroExitCode:!1,...r},Array.isArray(r.app))return nv(r.app,a=>fa({...r,app:a}));let{name:e,arguments:t=[]}=r.app||{};if(t=[...t],Array.isArray(e))return nv(e,a=>fa({...r,app:{name:a,arguments:t}}));let n,i=[],s={};if(Xn==="darwin")n="open",r.wait&&i.push("--wait-apps"),r.background&&i.push("--background"),r.newInstance&&i.push("--new"),e&&i.push("-a",e);else if(Xn==="win32"||ua&&!AN()&&!e){let a=await DN();n=ua?`${a}c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe`:`${process.env.SYSTEMROOT}\\System32\\WindowsPowerShell\\v1.0\\powershell`,i.push("-NoProfile","-NonInteractive","\u2013ExecutionPolicy","Bypass","-EncodedCommand"),ua||(s.windowsVerbatimArguments=!0);let c=["Start"];r.wait&&c.push("-Wait"),e?(c.push(`"\`"${e}\`""`,"-ArgumentList"),r.target&&t.unshift(r.target)):r.target&&c.push(`"${r.target}"`),t.length>0&&(t=t.map(l=>`"\`"${l}\`""`),c.push(t.join(","))),r.target=Buffer.from(c.join(" "),"utf16le").toString("base64")}else{if(e)n=e;else{let a=!__dirname||__dirname==="/",c=!1;try{await la.access(tv,sv.X_OK),c=!0}catch{}n=process.versions.electron||Xn==="android"||a||!c?"xdg-open":tv}t.length>0&&i.push(...t),r.wait||(s.stdio="ignore",s.detached=!0)}r.target&&i.push(r.target),Xn==="darwin"&&t.length>0&&i.push("--args",...t);let o=CN.spawn(n,i,s);return r.wait?new Promise((a,c)=>{o.once("error",c),o.once("close",l=>{if(!r.allowNonzeroExitCode&&l>0){c(new Error(`Exited with code ${l}`));return}a(o)})}):(o.unref(),o)},Kf=(r,e)=>{if(typeof r!="string")throw new TypeError("Expected a `target`");return fa({...e,target:r})},kN=(r,e)=>{if(typeof r!="string")throw new TypeError("Expected a `name`");let{arguments:t=[]}=e||{};if(t!=null&&!Array.isArray(t))throw new TypeError("Expected `appArguments` as Array type");return fa({...e,app:{name:r,arguments:t}})};function iv(r){if(typeof r=="string"||Array.isArray(r))return r;let{[rv]:e}=r;if(!e)throw new Error(`${rv} is not supported`);return e}function Yf({[Xn]:r},{wsl:e}){if(e&&ua)return iv(e);if(!r)throw new Error(`${Xn} is not supported`);return iv(r)}var ha={};Xf(ha,"chrome",()=>Yf({darwin:"google chrome",win32:"chrome",linux:["google-chrome","google-chrome-stable","chromium"]},{wsl:{ia32:"/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe",x64:["/mnt/c/Program Files/Google/Chrome/Application/chrome.exe","/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe"]}}));Xf(ha,"firefox",()=>Yf({darwin:"firefox",win32:"C:\\Program Files\\Mozilla Firefox\\firefox.exe",linux:"firefox"},{wsl:"/mnt/c/Program Files/Mozilla Firefox/firefox.exe"}));Xf(ha,"edge",()=>Yf({darwin:"microsoft edge",win32:"msedge",linux:["microsoft-edge","microsoft-edge-dev"]},{wsl:"/mnt/c/Program Files (x86)/Microsoft/Edge/Application/msedge.exe"}));Kf.apps=ha;Kf.openApp=kN;ov.exports=Kf});function cv(){let{output:r}=Y();r.error({title:"Connections to Nx Cloud are disabled for this workspace",bodyLines:["This was an intentional decision by someone on your team.","Nx Cloud cannot and will not be enabled.","","To allow connections to Nx Cloud again, remove the 'neverConnectToCloud'","property in nx.json."]})}var uv=q(()=>{"use strict"});var Jf={};Dt(Jf,{uploadAndShowRunDetails:()=>UN});async function PN(r){let e=new An(r),t={},n=Jr(),i=new kn(e,t,r,n),s=new fr(r.maskedProperties),o=JSON.parse((0,fv.readFileSync)((0,dv.join)(lv,"run.json")).toString()),a=o.tasks.map(l=>({...l,terminalOutput:wo(lv,s,l.hash,l.cacheStatus,l.status)})),c=Co();return await i.endRun(o.run,a,{branch:null,runGroup:null,ciExecutionId:null,ciExecutionEnv:null},c),`${ys(r.url||"https://nx.app")}/runs/${c}`}async function UN(){let{nxJson:r,nxCloudOptions:e}=It();r.neverConnectToCloud&&(cv(),process.exit(1));let t=await PN(e);LN.success({title:"Successfully uploaded the run details",bodyLines:[`View run details at ${t}`]}),(0,hv.default)(t)}var fv,hv,dv,LN,lv,Zf=q(()=>{"use strict";fv=require("fs"),hv=vr(av()),dv=require("path");re();Vn();uv();tc();Hu();zu();Pu();So();Bu();({output:LN}=Y()),{cacheDirectory:lv}=dt()});exports.nxCloudTasksRunner=(...r)=>(yb(),be(mb)).default(...r);exports.configureLightClientRequire=()=>(wr(),be(ah)).configureLightClientRequire;var FN={"clean-up-agents":()=>(If(),be(Cf)).cleanUpAgents(),record:()=>(Af(),be(Nf)).runCommandAndStoreInCloud(),"start-agent":()=>(qf(),be(Mf)).startAgent(),"start-ci-run":()=>($f(),be(Gf)).startCiRun(),"stop-all-agents":()=>(ca(),be(aa)).stopAllAgents(),"complete-ci-run":()=>(ca(),be(aa)).stopAllAgents(),"upload-and-show-run-details":()=>(Zf(),be(Jf)).uploadAndShowRunDetails()};exports.commands=FN;exports.cleanUpAgents=()=>(If(),be(Cf)).cleanUpAgents();exports.runCommandAndStoreInCloud=()=>(Af(),be(Nf)).runCommandAndStoreInCloud();exports.startAgent=()=>(qf(),be(Mf)).startAgent();exports.startCiRun=()=>($f(),be(Gf)).startCiRun();exports.stopAllAgents=()=>(ca(),be(aa)).stopAllAgents();exports.uploadAndShowRunDetails=()=>(Zf(),be(Jf)).uploadAndShowRunDetails();
